"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_item-picker_components_PullRequestAndBranchPicker_tsx"],{56520:(e,l,a)=>{a.d(l,{uf:()=>q,Cy:()=>T,Co:()=>I,Ni:()=>P,OG:()=>K,Te:()=>L,h9:()=>x});var n=a(74848);let r=function(){var e={defaultValue:null,kind:"LocalArgument",name:"name"},l={defaultValue:null,kind:"LocalArgument",name:"owner"},a=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},t={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"oid",storageKey:null},n,i],storageKey:null},s={alias:null,args:null,concreteType:"PullRequestConnection",kind:"LinkedField",name:"associatedPullRequests",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:null},u=[r,n,i,t,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"nameWithOwner",storageKey:null},{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[r,n,t,s,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[n],storageKey:null}],storageKey:null}],storageKey:null},s],o=[{kind:"InlineDataFragmentSpread",name:"BranchPickerRef",selections:u,args:null,argumentDefinitions:[]}],d=[{kind:"Literal",name:"first",value:25},{kind:"Literal",name:"refPrefix",value:"refs/heads/"}];return{fragment:{argumentDefinitions:[e,l],kind:"Fragment",metadata:null,name:"BranchPickerRepositoryBranchesQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"BranchPickerRepositoryBranchRefs",selections:[n,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:o,storageKey:null},{alias:null,args:d,concreteType:"RefConnection",kind:"LinkedField",name:"refs",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"BranchPickerRepositoryBranches",selections:[{alias:null,args:null,concreteType:"RefEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"node",plural:!1,selections:o,storageKey:null}],storageKey:null}],args:null,argumentDefinitions:[]}],storageKey:'refs(first:25,refPrefix:"refs/heads/")'}],args:null,argumentDefinitions:[]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,e],kind:"Operation",name:"BranchPickerRepositoryBranchesQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[n,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:u,storageKey:null},{alias:null,args:d,concreteType:"RefConnection",kind:"LinkedField",name:"refs",plural:!1,selections:[{alias:null,args:null,concreteType:"RefEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"node",plural:!1,selections:u,storageKey:null}],storageKey:null}],storageKey:'refs(first:25,refPrefix:"refs/heads/")'}],storageKey:null}]},params:{id:"7319648851ece31f26cbd26dc431185a",metadata:{},name:"BranchPickerRepositoryBranchesQuery",operationKind:"query",text:null}}}();r.hash="379faafddfb7432c18055ea644544898";let i={kind:"InlineDataFragment",name:"BranchPickerRepositoryBranchRefs"};i.hash="3987830ca22f372a937fcef8c7dd5e8b";let t={kind:"InlineDataFragment",name:"BranchPickerRepositoryBranches"};t.hash="fc20fd3ed00706559cd5314915dda570";let s={kind:"InlineDataFragment",name:"BranchPickerRef"};s.hash="98ea8dab9ebd07b2e3330c4f789fa7b3";let u=function(){var e={defaultValue:null,kind:"LocalArgument",name:"first"},l={defaultValue:null,kind:"LocalArgument",name:"name"},a={defaultValue:null,kind:"LocalArgument",name:"owner"},n={defaultValue:null,kind:"LocalArgument",name:"query"},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"oid",storageKey:null},i,t],storageKey:null},u={alias:null,args:null,concreteType:"PullRequestConnection",kind:"LinkedField",name:"associatedPullRequests",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[e,l,a,n],kind:"Fragment",metadata:null,name:"BranchPickerSearchBranchesQuery",selections:[{args:null,kind:"FragmentSpread",name:"BranchPickerSearchBranchesFragment"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,l,e,n],kind:"Operation",name:"BranchPickerSearchBranchesQuery",selections:[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"query",variableName:"query"},{kind:"Literal",name:"refPrefix",value:"refs/heads/"}],concreteType:"RefConnection",kind:"LinkedField",name:"refs",plural:!1,selections:[{alias:null,args:null,concreteType:"RefEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"node",plural:!1,selections:[r,i,t,s,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"nameWithOwner",storageKey:null},{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[r,i,s,u,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[i],storageKey:null}],storageKey:null}],storageKey:null},u],storageKey:null}],storageKey:null}],storageKey:null},i],storageKey:null}]},params:{id:"1a36b75f74be7de2d87b1a5de6d10511",metadata:{},name:"BranchPickerSearchBranchesQuery",operationKind:"query",text:null}}}();u.hash="88b11505f4054c53e3e0f6e9d965f58a";let o=function(){var e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},n={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"oid",storageKey:null},l,a],storageKey:null},r={alias:null,args:null,concreteType:"PullRequestConnection",kind:"LinkedField",name:"associatedPullRequests",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"first"},{kind:"RootArgument",name:"name"},{kind:"RootArgument",name:"owner"},{kind:"RootArgument",name:"query"}],kind:"Fragment",metadata:null,name:"BranchPickerSearchBranchesFragment",selections:[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"query",variableName:"query"},{kind:"Literal",name:"refPrefix",value:"refs/heads/"}],concreteType:"RefConnection",kind:"LinkedField",name:"refs",plural:!1,selections:[{alias:null,args:null,concreteType:"RefEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"BranchPickerRef",selections:[e,l,a,n,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"nameWithOwner",storageKey:null},{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[e,l,n,r,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[l],storageKey:null}],storageKey:null}],storageKey:null},r],args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null}}();o.hash="a9785b05fefd0c1ae7aea87d04f60956";var d=a(38621),c=a(55847),m=a(75177),g=a(30729),y=a(96540),k=a(19335),p=a(5979),f=a(69487),h=a(3893),b=a(18312),R=a(67136),F=a(55516),S=a(36538);let K=r,P=i,I=s,L=u,x=o,T=({currentBranch:e})=>(0,n.jsx)(c.Q,{leadingVisual:d.GitBranchIcon,trailingVisual:d.TriangleDownIcon,disabled:!0,children:e??p.k.selectBranch});function q({initialBranch:e,defaultBranchId:l,branchesKey:a,owner:r,repo:i,onSelect:s,title:u,"aria-labelledby":o,"aria-describedby":d}){let[c,m]=(0,y.useState)(null),[g,p]=(0,y.useState)(void 0),[h,K]=(0,y.useState)(!1),[P,T]=(0,y.useState)(""),{addToast:q}=(0,R.Y6)(),D=(0,b.useFragment)(x,c),N=(0,y.useMemo)(()=>{if(D)return(D?.repository?.refs?.edges||[]).flatMap(e=>e?.node?[(0,f.readInlineData)(I,e.node)]:[])},[D]);(0,y.useEffect)(()=>{p(N)},[N]);let v=(0,f.readInlineData)(t,a),A=(0,y.useMemo)(()=>{let l=v?.edges?.flatMap(e=>e?.node?[f.readInlineData(I,e.node)]:[]).filter(l=>l.id!==e?.id)??[];return e&&l.unshift(e),l},[v?.edges,e]),C=(0,y.useMemo)(()=>g||A,[A,g]),V=(0,b.useRelayEnvironment)(),w=(0,y.useCallback)(e=>{if(""===e){p([]);return}K(!0),(0,f.fetchQuery)(V,L,{owner:r,name:i,query:e,first:25}).subscribe({next:e=>{null!==e&&m(e),K(!1)},error:()=>{q({type:"error",message:k.S.couldNotSearchAssignees}),K(!1)}})},[q,V,r,i]),Q=(0,F.d)(e=>w(e),S.t.pickerDebounceTime),j=(0,y.useCallback)(e=>{let l=e.trim();P!==l&&(Q(l),T(e))},[Q,P]);return(0,n.jsx)(B,{items:C,initialSelectedItem:e,onFilter:j,defaultBranchId:l,onSelectionChange:s,loading:h,"aria-labelledby":o,"aria-describedby":d,title:u})}function B({items:e,initialSelectedItem:l,onFilter:a,defaultBranchId:r,onSelectionChange:i,"aria-labelledby":t,"aria-describedby":s,title:u,loading:o=!1}){let k=(0,y.useCallback)(e=>{a(e)},[a]),f=(0,y.useCallback)(e=>e.id,[]),b=(0,y.useCallback)(e=>({id:`${e.id}`,children:(0,n.jsx)("span",{children:e.name}),source:e,leadingVisual:()=>(0,n.jsx)(g.A,{icon:d.GitBranchIcon,size:16}),trailingVisual:()=>e.id===r?(0,n.jsx)("span",{children:"Default"}):null}),[r]),R=(0,y.useRef)(null),F=(0,y.useCallback)(({...e})=>(0,n.jsx)(c.Q,{leadingVisual:d.GitBranchIcon,trailingVisual:d.TriangleDownIcon,"aria-label":t?void 0:p.k.selectBranch,"aria-labelledby":t,"aria-describedby":s,...e,ref:R,children:l?(0,n.jsx)("span",{children:l.name}):p.k.selectBranch}),[s,t,l]);return(0,n.jsx)(m.A,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:1},children:(0,n.jsx)(h.O,{items:e,initialSelectedItems:l?[l]:[],filterItems:k,getItemKey:f,convertToItemProps:b,placeholderText:p.k.selectBranch,selectionVariant:"single",onSelectionChange:([e])=>i(e),loading:o,renderAnchor:F,selectPanelRef:R,enforceAtleastOneSelected:!0,resultListAriaLabel:"Branch results",title:u??"Select a branch",width:"large"})})}try{T.displayName||(T.displayName="BranchPickerPlaceholder")}catch{}try{q.displayName||(q.displayName="BranchPickerInternal")}catch{}try{B.displayName||(B.displayName="BranchPickerBase")}catch{}},1084:(e,l,a)=>{a.d(l,{OC:()=>K});var n,r=a(74848),i=a(55847),t=a(75177),s=a(52464),u=a(30729),o=a(3893),d=a(96540),c=a(19335),m=a(5979),g=a(38621),y=a(18312),k=a(55516),p=a(67136),f=a(27111),h=a(56520),b=a(47584),R=a(36538);let F={groupId:"selected"},S={groupId:"suggestions",header:{title:"Suggestions",variant:"filled"}},K=({repoNameWithOwner:e,initialSelectedPrs:l,initialSelectedBranches:a,loading:n,...i})=>{let{addToast:t}=(0,p.Y6)(),s=(0,y.useRelayEnvironment)(),[u,o]=(0,d.useState)(null),[m,g]=(0,d.useState)(""),[F,S]=(0,d.useState)(n??!1),[K,I]=(0,d.useState)(null),L=(0,d.useCallback)(l=>{let a=e.split("/"),n=a[0],r=a[1];if(n&&r)return new Promise((e,a)=>{(0,y.fetchQuery)(s,h.Te,{owner:n,name:r,query:l,first:25}).subscribe({next:e=>{null!==e&&(I(e),S(!1))},error:e=>{a(e)}})})},[s,e]),x=(0,d.useCallback)(l=>{if(!e)return;S(!0);let a=`${l} sort:created-desc`;(0,y.fetchQuery)(s,f.dB,(0,f.Hm)(e,a)).subscribe({next:e=>{null!==e&&(o(e),S(!1))},error:()=>{S(!1),t({type:"error",message:c.S.couldNotSearchPullRequests})}})},[t,s,e]),T=(0,d.useCallback)(e=>{L(e),x(e)},[x,L]),q=(0,k.d)(e=>T(e),R.t.pickerDebounceTime);return(0,d.useEffect)(()=>{b.X3||T(m)},[e]),(0,d.useEffect)(()=>{q(m)},[q,m]),(0,r.jsx)(P,{pullRequestItemsKey:u,branchItemsKey:K,initialSelectedPrs:l,initialSelectedBranches:a,onFilter:function(e){g(e)},loading:F,...i})};function P({pullRequestItemsKey:e,branchItemsKey:l,initialSelectedPrs:a=[],initialSelectedBranches:n=[],...i}){let t=(0,y.useFragment)(f.De,e),s=(0,d.useMemo)(()=>{let e=new Map;for(let l of function(e){if(!e)return[];let{commenters:l,mentions:a,assignee:n,author:r,open:i}=e,t=[...l?.nodes||[],...a?.nodes||[],...n?.nodes||[],...r?.nodes||[],...i?.nodes||[]],s=new Map;for(let e of t)if(void 0!==e){let l=(0,y.readInlineData)(f.PZ,e);l&&s.set(l.id,l)}return Array.from(s.values())}(t??null))e.set(l.id,l);for(let l of a)e.set(l.id,l);return[...e.values()].sort(L)},[t,a]),u=(0,y.useFragment)(h.h9,l),o=(0,d.useMemo)(()=>{let e=new Map;for(let l of u?.repository?.refs?.edges?.flatMap(e=>e?.node?[y.readInlineData(h.Co,e.node)]:[])??[])e.set(l.id,l);for(let l of n)e.set(l.id,l);return[...e.values()]},[n,u?.repository?.refs?.edges]);return(0,r.jsx)(I,{initialSelectedPrs:a,initialSelectedBranches:n,pullRequestItems:s,branchItems:o,...i})}function I({pullRequestItems:e,branchItems:l,initialSelectedPrs:a=[],initialSelectedBranches:n=[],loading:c,onFilter:y,anchorElement:k,shortcutsEnabled:p,...h}){let b=(0,d.useMemo)(()=>[...a,...n],[a,n]),R=(0,d.useRef)(null),K=(0,d.useMemo)(()=>l.filter(e=>e.id!==e.repository.defaultBranchRef?.id&&0===e.associatedPullRequests.totalCount),[l]),P=(0,d.useCallback)(e=>{y(e)},[y]),I=(0,d.useCallback)(e=>e.id,[]),L=(0,d.useMemo)(()=>{let a=[];return b.length>0&&a.push(F),l.length+e.length>0&&e.length+l.length-b.length>0&&a.push(S),a},[l.length,b.length,e.length]),x=(0,d.useCallback)(e=>{let l="PullRequest"===e.__typename,i=l?e.title:e.name,o=l?`${e.repository.nameWithOwner}#${e.number}`:m.k.noPullRequest,d=l?(0,r.jsx)(u.A,{icon:(0,f.IL)(e),size:16,sx:{path:{fill:(0,f.fW)(e)}}}):(0,r.jsx)(u.A,{icon:g.GitBranchIcon,size:16});return{id:`${e.id}`,groupId:[...n,...a].find(l=>l.id===e.id)?F.groupId:S.groupId,children:(0,r.jsxs)(t.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)("span",{children:i}),(0,r.jsx)(s.A,{sx:{fontSize:0,color:"fg.muted"},children:o})]}),source:e,leadingVisual:()=>d,sx:{wordBreak:"break-word"}}},[n,a]),T=(0,d.useCallback)(({...e})=>k?k(e):(0,r.jsx)(i.Q,{leadingVisual:g.GitPullRequestIcon,trailingVisual:g.TriangleDownIcon,...e,"aria-labelledby":"pr-picker-label",ref:R,children:b.length>0?m.k.getNumberOfSelectedPrsLabel(b.length):m.k.selectPr}),[k,b.length]);return(0,r.jsx)(t.A,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:1},children:(0,r.jsx)(o.O,{loading:c,items:[...e,...K],initialSelectedItems:b,groups:L,filterItems:P,getItemKey:I,convertToItemProps:x,placeholderText:m.k.searchPr,selectionVariant:"multiple",selectPanelRef:R,renderAnchor:T,width:"medium",resultListAriaLabel:"Pull request results",height:"large",...h})})}function L(e,l){let a=new Date(e.createdAt),n=new Date(l.createdAt);return a<n?1:a>n?-1:0}try{(n=()=>(0,r.jsx)(i.Q,{leadingVisual:g.GitPullRequestIcon,trailingVisual:g.TriangleDownIcon,"aria-labelledby":"pr-picker-label",disabled:!0,children:m.k.selectPr})).displayName||(n.displayName="PullRequestAndBranchPickerPlaceholder")}catch{}try{K.displayName||(K.displayName="LazyPullRequestAndBranchPicker")}catch{}try{P.displayName||(P.displayName="PullRequestAndBranchPickerInternal")}catch{}try{I.displayName||(I.displayName="PullRequestAndBranchPickerBase")}catch{}},27111:(e,l,a)=>{a.d(l,{PZ:()=>K,De:()=>P,dB:()=>I,IL:()=>A,fW:()=>v,WB:()=>N,Hm:()=>L});var n,r,i=a(74848);let t={kind:"InlineDataFragment",name:"PullRequestPickerPullRequest"};t.hash="14535df753a3408896cf861b01319c58";let s=function(){var e={kind:"Variable",name:"first",variableName:"first"},l={kind:"Literal",name:"type",value:"ISSUE"},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"PullRequestPickerPullRequest",selections:[{kind:"InlineFragment",selections:[a,n,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"state",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDraft",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isInMergeQueue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameWithOwner",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},n],storageKey:null}],storageKey:null}],type:"PullRequest",abstractKey:null}],args:null,argumentDefinitions:[]}],storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"assignee"},{kind:"RootArgument",name:"author"},{kind:"RootArgument",name:"commenters"},{kind:"RootArgument",name:"first"},{kind:"RootArgument",name:"mentions"},{kind:"RootArgument",name:"open"}],kind:"Fragment",metadata:null,name:"PullRequestPickerQuery",selections:[{alias:"commenters",args:[e,{kind:"Variable",name:"query",variableName:"commenters"},l],concreteType:"SearchResultItemConnection",kind:"LinkedField",name:"search",plural:!1,selections:r,storageKey:null},{alias:"mentions",args:[e,{kind:"Variable",name:"query",variableName:"mentions"},l],concreteType:"SearchResultItemConnection",kind:"LinkedField",name:"search",plural:!1,selections:r,storageKey:null},{alias:"assignee",args:[e,{kind:"Variable",name:"query",variableName:"assignee"},l],concreteType:"SearchResultItemConnection",kind:"LinkedField",name:"search",plural:!1,selections:r,storageKey:null},{alias:"author",args:[e,{kind:"Variable",name:"query",variableName:"author"},l],concreteType:"SearchResultItemConnection",kind:"LinkedField",name:"search",plural:!1,selections:r,storageKey:null},{alias:"open",args:[e,{kind:"Variable",name:"query",variableName:"open"},l],concreteType:"SearchResultItemConnection",kind:"LinkedField",name:"search",plural:!1,selections:r,storageKey:null}],type:"Query",abstractKey:null}}();s.hash="a38666c3d059c9d2a20d807ac84b6afd";let u=function(){var e={defaultValue:null,kind:"LocalArgument",name:"assignee"},l={defaultValue:null,kind:"LocalArgument",name:"author"},a={defaultValue:null,kind:"LocalArgument",name:"commenters"},n={defaultValue:10,kind:"LocalArgument",name:"first"},r={defaultValue:null,kind:"LocalArgument",name:"mentions"},i={defaultValue:null,kind:"LocalArgument",name:"open"},t={kind:"Variable",name:"first",variableName:"first"},s={kind:"Literal",name:"type",value:"ISSUE"},u={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[u,{kind:"InlineFragment",selections:[o,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"state",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDraft",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isInMergeQueue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameWithOwner",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},u,o],storageKey:null}],storageKey:null}],type:"PullRequest",abstractKey:null},{kind:"InlineFragment",selections:[o],type:"Node",abstractKey:"__isNode"}],storageKey:null}];return{fragment:{argumentDefinitions:[e,l,a,n,r,i],kind:"Fragment",metadata:null,name:"PullRequestPickerSearchQuery",selections:[{args:null,kind:"FragmentSpread",name:"PullRequestPickerQuery"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,r,e,l,i,n],kind:"Operation",name:"PullRequestPickerSearchQuery",selections:[{alias:"commenters",args:[t,{kind:"Variable",name:"query",variableName:"commenters"},s],concreteType:"SearchResultItemConnection",kind:"LinkedField",name:"search",plural:!1,selections:d,storageKey:null},{alias:"mentions",args:[t,{kind:"Variable",name:"query",variableName:"mentions"},s],concreteType:"SearchResultItemConnection",kind:"LinkedField",name:"search",plural:!1,selections:d,storageKey:null},{alias:"assignee",args:[t,{kind:"Variable",name:"query",variableName:"assignee"},s],concreteType:"SearchResultItemConnection",kind:"LinkedField",name:"search",plural:!1,selections:d,storageKey:null},{alias:"author",args:[t,{kind:"Variable",name:"query",variableName:"author"},s],concreteType:"SearchResultItemConnection",kind:"LinkedField",name:"search",plural:!1,selections:d,storageKey:null},{alias:"open",args:[t,{kind:"Variable",name:"query",variableName:"open"},s],concreteType:"SearchResultItemConnection",kind:"LinkedField",name:"search",plural:!1,selections:d,storageKey:null}]},params:{id:"f5839127717c71099ada0c934056544c",metadata:{},name:"PullRequestPickerSearchQuery",operationKind:"query",text:null}}}();u.hash="a547573799e4da6c378af01603f7fc41";var o=a(55847),d=a(75177),c=a(52464),m=a(30729),g=a(3893),y=a(96540),k=a(19335),p=a(5979),f=a(38621),h=a(18312),b=a(55516),R=a(67136);let F={MERGED:{color:"done.fg",icon:f.GitMergeIcon},IN_MERGE_QUEUE:{color:"attention.fg",icon:f.GitMergeQueueIcon},OPEN:{color:"open.fg",icon:f.GitPullRequestIcon},CLOSED:{color:"closed.fg",icon:f.GitPullRequestClosedIcon},DRAFT:{color:"fg.muted",icon:f.GitPullRequestDraftIcon}};var S=a(36538);let K=t,P=s,I=u,L=(e,l="")=>{let a=`is:pr repo:${e}`,n=l.trim();return n=n.length>0?` ${n}`:"",{commenters:`${a} commenter:@me${n}`,mentions:`${a} mentions:@me${n}`,assignee:`${a} assignee:@me${n}`,author:`${a} author:@me${n}`,open:`${a} state:open${n}`}},x={groupId:"pullRequests"},T={groupId:"suggestions",header:{title:"Suggestions",variant:"filled"}},q={groupId:"warning",header:{title:p.k.maxPRsLinkingWarning,variant:"subtle"}},B=({repoNameWithOwner:e,initialSelectedPrs:l,fragmentKey:a,onSelectionChange:n,triggerOpen:r})=>{let{addToast:t}=(0,R.Y6)(),s=(0,h.useRelayEnvironment)(),[u,o]=(0,y.useState)(a),d=(0,h.useFragment)(P,u),[c,m]=(0,y.useState)(""),[g,p]=(0,y.useState)(!1),f=(0,y.useMemo)(()=>{let e=new Map;for(let l of function(e){let{commenters:l,mentions:a,assignee:n,author:r,open:i}=e,t=[...l?.nodes||[],...a?.nodes||[],...n?.nodes||[],...r?.nodes||[],...i?.nodes||[]],s=new Map;for(let e of t){if(void 0===e)continue;let l=(0,h.readInlineData)(K,e);l&&s.set(l.id,l)}return Array.from(s.values())}(d))e.set(l.id,l);for(let a of l)e.set(a.id,a);return[...e.values()]},[d,l]),F=(0,y.useCallback)(l=>{p(!0),(0,h.fetchQuery)(s,I,L(e,l)).subscribe({next:e=>{null!==e&&(o(e),p(!1))},error:()=>{p(!1),t({type:"error",message:k.S.couldNotSearchPullRequests})}})},[t,s,e]),x=(0,b.d)(e=>F(e),S.t.pickerDebounceTime);return(0,y.useEffect)(()=>{0===c.length&&o(a),x(c)},[x,c,a]),(0,i.jsx)(D,{items:f,initialSelectedItems:l,onFilter:function(e){m(e)},onSelectionChange:n,loading:g,triggerOpen:r})};function D({items:e,initialSelectedItems:l=[],onFilter:a,onSelectionChange:n,loading:r=!1,triggerOpen:t=!1}){let s=(0,y.useRef)(null),u=(0,y.useCallback)(e=>{a(e)},[a]),k=(0,y.useCallback)(e=>e.id,[]),h=(0,y.useMemo)(()=>{let a=[];return a.push(q),l.length>0&&a.push(x),e.length>0&&e.length-l.length>0&&a.push(T),a},[l.length,e.length]),b=(0,y.useCallback)(e=>({id:`${e.id}`,groupId:l.find(l=>l.id===e.id)?x.groupId:T.groupId,children:(0,i.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)("span",{children:e.title}),(0,i.jsx)(c.A,{sx:{fontSize:0,color:"fg.muted"},children:`${e.repository.nameWithOwner}#${e.number}`})]}),source:e,leadingVisual:()=>(0,i.jsx)(m.A,{icon:A(e),size:16,sx:{path:{fill:v(e)}}})}),[l]),R=(0,y.useCallback)(({...e})=>(0,i.jsx)(o.Q,{leadingVisual:f.GitPullRequestIcon,trailingVisual:f.TriangleDownIcon,...e,"aria-labelledby":"pr-picker-label",ref:s,children:l.length>0?p.k.getNumberOfSelectedPrsLabel(l.length):p.k.selectPr}),[l.length]);return(0,i.jsx)(d.A,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:1},children:(0,i.jsx)(g.O,{items:e,initialSelectedItems:l,groups:h,filterItems:u,getItemKey:k,convertToItemProps:b,placeholderText:p.k.searchPr,selectionVariant:"multiple",onSelectionChange:n,selectPanelRef:s,renderAnchor:R,loading:r,width:"medium",resultListAriaLabel:"Pull request results",triggerOpen:t})})}let N=(e,l,a)=>{if(e&&"OPEN"===a)return"DRAFT";if(l)return"IN_MERGE_QUEUE";if("CLOSED"===a||"MERGED"===a||"OPEN"===a)return a;throw Error(`Unknown pull request state: ${a}`)};function v(e){return F[N(e.isDraft,e.isInMergeQueue,e.state)].color}function A(e){return F[N(e.isDraft,e.isInMergeQueue,e.state)].icon}try{(n=()=>(0,i.jsx)(o.Q,{leadingVisual:f.GitPullRequestIcon,trailingVisual:f.TriangleDownIcon,"aria-labelledby":"pr-picker-label",disabled:!0,children:p.k.selectPr})).displayName||(n.displayName="PullRequestPickerPlaceholder")}catch{}try{(r=({initialSelectedPrs:e,pullRequestQueryRef:l,repoNameWithOwner:a,onSelectionChange:n,triggerOpen:r})=>{let t=(0,h.usePreloadedQuery)(I,l);return t?(0,i.jsx)(B,{repoNameWithOwner:a,initialSelectedPrs:e,fragmentKey:t,onSelectionChange:n,triggerOpen:r}):(0,i.jsx)(i.Fragment,{})}).displayName||(r.displayName="PullRequestPicker")}catch{}try{B.displayName||(B.displayName="PullRequestPickerInternal")}catch{}try{D.displayName||(D.displayName="PullRequestPickerBase")}catch{}}}]);
//# sourceMappingURL=ui_packages_item-picker_components_PullRequestAndBranchPicker_tsx-1ac6f51434cf.js.map