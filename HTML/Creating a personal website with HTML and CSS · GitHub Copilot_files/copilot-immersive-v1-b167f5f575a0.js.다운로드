"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["copilot-immersive-v1","ui_packages_code-mirror_CodeMirror_tsx","ui_packages_code-mirror_autocomplete_theme_ts-ui_packages_code-mirror_extensions_help-panels_-d428aa","ui_packages_failbot_failbot_ts"],{12927:(e,t,n)=>{n.d(t,{E7:()=>H});var a=n(74848),i=n(96540);let r=(0,i.createContext)({actions:[],staticMenuActions:[],label:"Actions",gap:0}),o=({children:e,value:{actions:t=[],staticMenuActions:n,variant:o="toolbar",label:s,gap:l}})=>{let c=(0,i.useMemo)(()=>({actions:t,staticMenuActions:n,variant:o,label:s,gap:l}),[t,n,o,s,l]);return(0,a.jsx)(r.Provider,{value:c,children:e})},s=()=>{let e=(0,i.useContext)(r);if(!e)throw Error("useActionBarContent must be used with ActionBarContentProvider.");return e};try{r.displayName||(r.displayName="ActionBarContentContext")}catch{}try{o.displayName||(o.displayName="ActionBarContentProvider")}catch{}let l=(0,i.createContext)({outerContainerRef:(0,i.createRef)(),itemContainerRef:(0,i.createRef)()}),c=({value:{anchorRef:e},children:t})=>{let n=(0,i.useRef)(null),r=(0,i.useRef)(null),o=(0,i.useMemo)(()=>({outerContainerRef:n,itemContainerRef:r,anchorRef:e}),[e]);return(0,a.jsx)(l.Provider,{value:o,children:t})},d=()=>{let e=(0,i.useContext)(l);if(!e)throw Error("useActionBarRef must be used with ActionBarRefProvider.");return e};try{l.displayName||(l.displayName="ActionBarRefContext")}catch{}try{c.displayName||(c.displayName="ActionBarRefProvider")}catch{}var u=n(73218),m=n(18610),p=n(45221),h=n(58748);let f=e=>{if(!e)return 0;let t=window.getComputedStyle(e);return t?.columnGap?parseInt(t.columnGap,10):0},g=(e,t)=>{let n=2*f(t),a=e.getBoundingClientRect().width,i=window.getComputedStyle(e);return a+(i?.marginLeft?parseInt(i.marginLeft,10):0)+(i?.marginRight?parseInt(i.marginRight,10):0)+n},v=(e,t)=>{let n=x(e,t);if(void 0===n)return;let a=n;return t&&(a-=t.offsetLeft),a},x=(e,t)=>{if(!e)return;let n=e.offsetWidth;return t&&(n-=t.offsetWidth),n},_=e=>"condensed"===e?"var(--base-size-4)":"spacious"===e?"var(--base-size-16)":"none"===e?0:"var(--base-size-8)",y=(0,i.createContext)({visibleChildEndIndex:0,justifySpaceBetween:!1,recalculateItemSize:u.l}),C=({children:e,value:{actionKeys:t}})=>{let n=t.length,[r,o]=(0,m.N)(n),{outerContainerRef:s,itemContainerRef:l}=d(),[c,u]=(0,i.useState)(),[f,_]=(0,i.useState)(),[C,j]=(0,i.useState)(new Map(t.map(e=>[e,void 0]))),[N,b]=(0,i.useState)(!1),I=(0,i.useMemo)(()=>t.slice(0,r).every(e=>C.has(e)&&"number"==typeof C.get(e)),[t,C,r]),S=(0,i.useCallback)(e=>{let n=t[e];if(n)return C.get(n)},[t,C]),w=(0,i.useCallback)((e,t)=>{let n=l.current;if(!n)return;let a=g(t,n);j(t=>{if(a===t.get(e)||isNaN(a))return t;let n=new Map(Array.from(t.entries()));return n.set(e,a),n})},[l]),E=(0,i.useCallback)(()=>{if(!I)return;let e=s.current,t=l.current,n=x(e,t);if(void 0===n)return;let a=v(e,t);void 0!==a&&n<=a&&o(Math.max(0,r-1))},[I,s,l,o,r]),k=(0,i.useCallback)(()=>{let e=s.current,t=l.current,a=x(e,t);if(void 0===a)return;let i=S(r);if(void 0===i)return;let c=v(e,t);void 0!==c&&a>c+i&&o(Math.min(n,r+1))},[s,l,S,r,o,n]),T=(0,i.useCallback)(()=>{let e=s.current,t=l.current;if(!e||!t)return;let n=e.offsetWidth;n&&(void 0===c||n<=c?E():n>c&&k(),u(n),b(n<=(f??t.offsetWidth)))},[k,E,f,c,s,l]);(0,p.A)(()=>{let e=l.current;if(!e)return;let n=new Map;for(let a of t){let t=e.querySelector(`[data-action-bar-item="${a}"]`);t&&n.set(a,g(t,e))}j(n)},[t,l]),(0,p.A)(()=>{let e=l.current;e&&_(e.offsetWidth)},[l]),(0,p.A)(()=>{T()},[T]),(0,h.w)(T,s);let P=(0,i.useMemo)(()=>({visibleChildEndIndex:r,justifySpaceBetween:N,recalculateItemSize:w}),[r,N,w]);return(0,a.jsx)(y.Provider,{value:P,children:e})},j=()=>(0,i.useContext)(y)||{justifySpaceBetween:!1,visibleChildEndIndex:0,recalculateItemSize:u.l};try{y.displayName||(y.displayName="ActionBarResizeContext")}catch{}try{C.displayName||(C.displayName="ActionBarResizeProvider")}catch{}var N=n(53949),b=n(69676),I=n(82678),S=n(20053),w=n(38621),E=n(14744),k=n.n(E),T=n(89323),P=n(87330),A=n(8338);let L={IconButton_0:"OverflowMenu-module__IconButton_0--P3118"},O=w.KebabHorizontalIcon,R="invisible",B=({anchorProps:{"aria-label":e,icon:t=O,variant:n=R,...r}={icon:O,variant:R}})=>{let{anchorRef:o}=d(),{actions:l,staticMenuActions:c,label:u}=s(),{visibleChildEndIndex:m}=j(),p=(0,i.useMemo)(()=>k()(r,{"aria-label":e?.trim()||`More ${u}`,icon:t,className:L.IconButton_0,variant:n}),[e,t,u,n,r]),h=(0,i.useMemo)(()=>l?.slice(m),[l,m]),f=h&&h.length>0,g=c&&c.length>0;return f||g?(0,a.jsxs)(T.W,{anchorRef:o,children:[(0,a.jsx)(T.W.Anchor,{children:(0,a.jsx)(P.K,{...(0,N.G)("overflow-menu-anchor"),...p})}),(0,a.jsx)(T.W.Overlay,{align:"end",children:(0,a.jsxs)(A.l,{children:[g&&c.map(e=>(0,a.jsx)(i.Fragment,{children:e.render()},e.key)),h?.map(e=>a.jsx(i.Fragment,{children:e.render(!0)},e.key))]})})]}):null};try{B.displayName||(B.displayName="OverflowMenu")}catch{}let D={Box_0:"VisibleAndOverflowContainer-module__Box_0--cTFgm",space:"VisibleAndOverflowContainer-module__space--BaowS"},M={Box_0:"VisibleItem-module__Box_0--wJA9C"},U=({children:e,actionKey:t})=>{let n=(0,i.useRef)(null),{recalculateItemSize:r}=j();return(0,p.A)(()=>{n.current&&r(t,n.current)},[n,r,t]),(0,a.jsx)("div",{...(0,N.G)(`action-bar-item-${t}`),"data-action-bar-item":t,ref:n,className:M.Box_0,children:e})};try{U.displayName||(U.displayName="VisibleItem")}catch{}let $={Box_1:"VisibleItems-module__Box_1--_dgKR"},V=({className:e,style:t})=>{let{itemContainerRef:n}=d(),{actions:i,gap:r}=s(),{visibleChildEndIndex:o}=j(),l=i?.slice(0,o);return(0,a.jsx)("div",{...(0,N.G)("action-bar"),ref:n,className:(0,S.$)(e,$.Box_1),style:{gap:r,...t},children:l?.map(({key:e,render:t})=>a.jsx(U,{actionKey:e,children:t(!1)},e))})};try{V.displayName||(V.displayName="VisibleItems")}catch{}let W=({overflowMenuToggleProps:e,children:t,...n})=>{let{outerContainerRef:i}=d(),{label:r,variant:o,gap:l}=s(),{justifySpaceBetween:c}=j();return(0,I.G)({containerRef:i,bindKeys:b.z0.ArrowHorizontal|b.z0.HomeAndEnd,focusOutBehavior:"wrap",disabled:"toolbar"!==o},[i]),(0,a.jsxs)("div",{ref:i,...(0,N.G)("action-bar-container"),role:"toolbar"===o?"toolbar":void 0,"aria-label":"toolbar"===o?r:void 0,style:{gap:l},className:(0,S.$)(D.Box_0,c&&D.space),children:[(0,a.jsx)(V,{...n}),t,(0,a.jsx)(B,{anchorProps:e})]})};try{W.displayName||(W.displayName="VisibleAndOverflowContainer")}catch{}let F="normal",z=({children:e,...t})=>(0,a.jsx)(W,{...t,children:e}),H=({actions:e=[],staticMenuActions:t,overflowMenuToggleProps:n,children:r,label:s,variant:l,density:d=F,anchorRef:u,className:m,style:p})=>{let h=(0,i.useMemo)(()=>({actions:e,staticMenuActions:t,variant:l,label:s,gap:_(d)}),[e,t,l,s,d]),f=(0,i.useMemo)(()=>({actionKeys:e.map(e=>e.key)}),[e]),g=t&&t.length>0,v=e&&e.length>0;if(!v&&!g)return null;let x={overflowMenuToggleProps:n,className:m,style:p};return(0,a.jsx)(c,{value:{anchorRef:u},children:(0,a.jsx)(o,{value:h,children:v?(0,a.jsx)(C,{value:f,children:(0,a.jsx)(z,{...x,children:r})}):(0,a.jsx)(z,{...x,children:r})})})};try{z.displayName||(z.displayName="InternalActionBar")}catch{}try{H.displayName||(H.displayName="ActionBar")}catch{}},56176:(e,t,n)=>{let a;function i(){if(!a)throw Error("Client env was requested before it was loaded. This likely means you are attempting to use client env at the module level in SSR, which is not supported. Please move your client env usage into a function.");return a}function r(){return a?.locale??"en-US"}function o(){return!!i().login}n.d(t,{JK:()=>r,M3:()=>o,_$:()=>i}),!function(){if("undefined"!=typeof document){let e=document.getElementById("client-env");if(e)try{a=JSON.parse(e.textContent||"")}catch(e){console.error("Error parsing client-env",e)}}}()},48741:(e,t,n)=>{n.d(t,{E:()=>a});let a=n(24774).Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{border:0,backgroundColor:"transparent"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace",fontSize:"12px",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-medium)",boxShadow:"var(--shadow-resting-medium, var(--color-shadow-medium))",minWidth:"auto"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]':{padding:"2px 8px",margin:0,color:"var(--fgColor-default, var(--color-fg-default))",whiteSpace:"pre"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:first-child':{borderTopLeftRadius:"var(--borderRadius-medium)",borderTopRightRadius:"var(--borderRadius-medium)"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:last-child':{borderBottomLeftRadius:"var(--borderRadius-medium)",borderBottomRightRadius:"var(--borderRadius-medium)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected], .cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected] .cm-completionDetail":{color:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",background:"var(--bgColor-accent-emphasis, var(--color-accent-emphasis))"},".cm-completionDetail":{paddingLeft:"8px",color:"var(--fgColor-muted, var(--color-fg-muted))",fontSize:"var(--fontSize-small)",fontStyle:"normal"}})},48031:(e,t,n)=>{n.d(t,{G:()=>i});var a=n(24774);function i(e=null,t="bottom"){return[a.S7.of(()=>({dom:e,top:"top"===t}))]}},42378:(e,t,n)=>{n.d(t,{BE:()=>s,Cw:()=>b,I6:()=>C,Lo:()=>d,Md:()=>f,TB:()=>j,TC:()=>y,TU:()=>m,YH:()=>g,Z3:()=>p,eO:()=>x,e_:()=>_,f9:()=>l,fV:()=>h,tJ:()=>v,td:()=>u,w0:()=>c,ye:()=>N});var a=n(15874),i=n(54528),r=n(6585),o=n(24774);let s=e=>e.state.selection.main,l=(e,t)=>{e.dispatch({selection:{anchor:t}})},c=e=>e.state.selection.ranges.some(e=>!e.empty),d=e=>e.sliceDoc(e.selection.main.from,e.selection.main.to),u=(e,t,n)=>{e.dispatch({selection:{anchor:t,head:n}})};function m(e,t){return e.state.doc.line(t.line+1).from+t.ch}function p(e,t){let n=e.state.doc.lineAt(t);return{line:n.number-1,ch:t-n.from}}let h=(e,t)=>e.state.doc.line(t),f=(e,t,n)=>{let a=h(e,t);_(e,a.from,a.from,n)},g=(e,t,n)=>{let a=h(e,t);_(e,a.from,a.from+n.length,"")},v=(e,t)=>{e.dispatch(e.state.replaceSelection(t))},x=(e,t,n)=>e.sliceDoc(t,n),_=(e,t,n,a)=>{e.dispatch({changes:{from:t,to:n,insert:a}})},y=(e,t)=>{let n=s(e);_(e,n.from,n.to,t)},C=(e,t)=>new i.ZX(e.state.doc,t).next(),j=(e,t,n)=>{let a=new i.ZX(e.state.doc,t).next();e.dispatch({changes:{from:a.value.from,to:a.value.to,insert:n}})},N=(e,t,n,a,i)=>{if(void 0!==n)try{let s=h(e,t),l=h(e,n);if(s&&l){e.focus();let t=i?l.from+i:l.to;u(e,s.from+(a??0),t),e.dispatch({effects:[o.Lz.scrollIntoView(r.OF.range(s.from,l.to),{y:"center"})]})}}catch{}else try{let n=h(e,t);n&&(e.focus(),l(e,n.from+(a??0)),e.dispatch({effects:[o.Lz.scrollIntoView(n.from,{y:"center"})]}))}catch{}};function b(e){return e.state.facet(a.Xt)}},54533:(e,t,n)=>{n.d(t,{$Z:()=>u,LU:()=>o,QA:()=>s,SI:()=>d,by:()=>c,fQ:()=>l,oy:()=>r});var a=n(82610),i=n(77342);function r(e){return e.split("#")[0]}function o(e,t){let n=r(e),a=t.get(n)??[],i=a.indexOf(e);return a.length>1&&-1!==i?i+1:null}function s(e){return{type:"thread-scoped-file",name:e.name,language:e.language,text:e.value}}function l(e,t,n,a){return{type:"file",id:`file:${e.name}#${n}`,reference:e,messageId:t,name:e.name,language:e.language,value:e.text,timestamp:new Date(a),isStreaming:!1,isUserEdited:!1}}function c(e,t,n){return{type:"file",id:`file:${(0,a.Vb)(e)}#0`,reference:e,messageId:t??i.Wp,name:e.path,language:e.languageName??"",value:"",isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date}}function d(e,t){return{type:"issue",id:`issue:${e.number}`,messageId:t??i.Wp,name:e.title??"",number:e.number,owner:e.repository.owner,repo:e.repository.name}}function u(e){return Array.from(e.values()).flat().filter(e=>"file"===e.type).filter(e=>e.isUserEdited)}},67514:(e,t,n)=>{var a,i=n(21253),r=n(56413),o=n(88292),s=n(74848);function l(e){return(0,s.jsx)(s.Fragment,{children:e.children})}try{l.displayName||(l.displayName="App")}catch{}var c=n(44848),d=n(82610),u=n(2622),m=n(65615),p=n(45373),h=n(70187),f=n(38359),g=n(41980),v=n(96540),x=n(83150),_=n(8932),y=n(46988),C=n(10871),j=n(37827);let N={container:"ImmersiveDisabled-module__container--EDOnQ",content:"ImmersiveDisabled-module__content--dpYC9",footer:"ImmersiveDisabled-module__footer--xPpOC",bannerContainer:"ImmersiveDisabled-module__bannerContainer--Y_iqm"};function b(){return(0,s.jsxs)("div",{className:N.container,children:[(0,s.jsx)("div",{className:N.content,children:(0,s.jsx)(_.A,{})}),(0,s.jsx)("div",{className:N.footer,children:(0,s.jsx)("div",{className:N.bannerContainer,children:(0,s.jsx)(j.l,{variant:"upsell",title:"Copilot is disabled",hideTitle:!0,description:"Copilot on GitHub is currently disabled by your organization.",primaryAction:(0,s.jsx)(C.z,{as:"a",href:"https://github.com/settings/copilot",onClick:()=>(0,y.BI)("dotcom_chat.activate",{target:"NO_ACCESS_SETTING_DISABLED",mode:"immersive"}),children:"Settings"})})})})]})}try{b.displayName||(b.displayName="ImmersiveDisabled")}catch{}var I=n(22937),S=n(88117),w=n(37937),E=n(7426),k=n(68956),T=n(20053),P=n(47767);function A(){let{pathname:e}=(0,P.zy)();return(0,v.useMemo)(()=>e.includes("/share/"),[e])}var L=n(47584);let O=/\/copilot\/c\/([^/]+)/,R=/\/copilot\/share\/([^/]+)/;function B(){let e=L.fV.pathname;return(0,v.useMemo)(()=>{let t=e.match(O)||e.match(R);if(!t)return null;let[,n]=t;return n??null},[e])}var D=n(47173),M=n(77342);let U={banner:"ChatInputBanners-module__banner--QlUDL"};var $=n(64633),V=n(39483),W=n(38621),F=n(91321),z=n(89323),H=n(87330),G=n(8338);let K={container:"EditorUpsellBanner-module__container--CVVb2",banner:"EditorUpsellBanner-module__banner--nLwUI",title:"EditorUpsellBanner-module__title--UkB0l",description:"EditorUpsellBanner-module__description--wNgDi",actions:"EditorUpsellBanner-module__actions--tJUAU",editorButton:"EditorUpsellBanner-module__editorButton--gkwOw",closeButton:"EditorUpsellBanner-module__closeButton--qXUPm"};function q(){let e=(0,m.A3)("isEditorUpsellBannerDismissed"),t=(0,E.b)(),{isLicensedLimited:n}=(0,S.x)(),a=(0,v.useId)(),i=e=>{(0,y.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${e.toUpperCase()}`,mode:"immersive"})};return e||!n?null:(0,s.jsx)("div",{className:K.container,children:(0,s.jsxs)("section",{className:K.banner,"aria-labelledby":a,children:[(0,s.jsx)("h2",{className:K.title,id:a,children:"Install Copilot in your favorite code editor"}),(0,s.jsx)("p",{className:K.description,children:"Copilot is available for a multitude of editors to fit your needs"}),(0,s.jsxs)(F.A,{className:K.actions,children:[(0,s.jsx)(C.z,{className:K.editorButton,href:V.A.vscode.url,leadingVisual:(0,s.jsx)("img",{src:V.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>i("vscode"),children:V.A.vscode.name}),(0,s.jsxs)(z.W,{children:[(0,s.jsx)(z.W.Anchor,{children:(0,s.jsx)(H.K,{"aria-label":"More editors",icon:W.TriangleDownIcon,unsafeDisableTooltip:!0})}),(0,s.jsx)(z.W.Overlay,{align:"end",children:(0,s.jsx)(G.l,{children:(0,s.jsx)($.t,{})})})]})]}),(0,s.jsx)(H.K,{variant:"invisible",className:K.closeButton,icon:W.XIcon,"aria-label":"Dismiss banner",onClick:()=>{t.dismissEditorUpsellBanner(),(0,y.BI)("dotcom_chat.activate",{target:"EDITOR_UPSELL_BANNER_DISMISS",mode:"immersive"})}})]})})}try{q.displayName||(q.displayName="EditorUpsellBanner")}catch{}function X({onDismiss:e,className:t}){let{resetDate:n}=(0,S.x)();return(0,s.jsx)("div",{className:t,children:(0,s.jsx)(j.l,{variant:"upsell",title:"Limit reached soon",description:`You only have a few free responses remaining. Your limit resets on ${n}.`,hideTitle:!0,primaryAction:(0,s.jsx)(C.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:()=>{(0,y.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})},children:"Upgrade"}),onDismiss:()=>{e(),(0,y.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_DISMISS",mode:"immersive"})}})})}try{X.displayName||(X.displayName="QuotaMeterBanner")}catch{}var Q=n(31806),J=n(10967),Y=n(97286);function Z({topic:e}){return"type"in e&&"docset"===e.type?(0,s.jsx)(et,{docset:e}):(0,s.jsx)(ee,{repo:e})}function ee({repo:e}){let t=(0,m.pn)(e=>e.model&&!e.model.hasLimitedCapabilities),n=`${e.ownerLogin}/${e.name}`,[a,i]=(0,J.vn)(n),r=(0,v.useRef)(!1),o=a.code===J.W5.Unindexed||a.docs===J.W5.Unindexed;(0,v.useEffect)(function(){!r.current&&o&&t&&(r.current=!0,i())},[t,o,i]);let l=(0,v.useRef)(null);return(0,s.jsx)(Q.Z,{icon:(0,s.jsx)(W.RepoIcon,{}),topic:e,removeButtonRef:l})}function et({docset:e}){let t=(0,E.b)(),n=(0,m.pn)(t=>t.currentReferences.find(t=>"docset"===t.type&&t.id===e.id)),a=(0,v.useCallback)(()=>t.removeReference(n),[t,n]),{status:i,data:r}=(0,Y.I)({queryKey:["copilot-immersive-v1","docsets"],queryFn:async()=>{let e=await t.fetchKnowledgeBases();if(!e.ok)throw Error(e.error);return e.payload},select:t=>t.find(t=>t.id===e.id)});(0,v.useEffect)(function(){"success"===i&&void 0===r&&a()},[i,r,a]);let o=(0,v.useRef)(null);return r?(0,s.jsx)(Q.Z,{icon:(0,s.jsx)(W.BookIcon,{}),topic:r,removeButtonRef:o}):null}try{Z.displayName||(Z.displayName="TopicIndicator")}catch{}try{ee.displayName||(ee.displayName="RepoTopicIndicator")}catch{}try{et.displayName||(et.displayName="KbTopicIndicator")}catch{}function en(){let[e,t]=(0,v.useState)(()=>w.J.getTrialSuccessBannerFlag()??!1);return(0,v.useEffect)(()=>{t(w.J.getTrialSuccessBannerFlag()??!1)},[]),{visible:e,onDismiss:()=>{w.J.removeTrialSuccessBannerFlag(),t(!1)}}}function ea({onDismiss:e,className:t}){let{visible:n,onDismiss:a}=en();return n?(0,s.jsx)("div",{className:t,children:(0,s.jsx)(j.l,{variant:"success",title:"Copilot Pro trial activated",description:"Your 30-day Copilot Pro trial is now active.",hideTitle:!0,onDismiss:()=>{a(),e(),(0,y.BI)("dotcom_chat.activate",{target:"TRIAL_SUCCESS_BANNER_DISMISS",mode:"immersive"})}})}):null}try{ea.displayName||(ea.displayName="TrialSuccessBanner")}catch{}function ei(){let e=(0,m.pn)(e=>null!==e.selectedThreadID),{ambientError:t}=(0,m.Pk)(),n=(0,S.x)().licenseType,a=function(){let{isLicensedLimited:e,chatQuotaRemaining:t}=(0,S.x)(),[n,a]=(0,v.useState)(()=>w.J.getMeterBannerFlag()??!1);return(0,v.useEffect)(()=>{if(e&&void 0!==t){let e=w.J.getMeterBannerFlag();t>0&&t<=10?null===e?(w.J.setMeterBannerFlag(!0),a(!0)):a(e):(w.J.removeMeterBannerFlag(),a(!1))}},[e,t]),{visible:n&&void 0!==t&&e,onDismiss:()=>{w.J.setMeterBannerFlag(!1),a(!1)}}}(),i=en(),r=function(){let e=(0,m.pn)(e=>(0,d.Z6)(e.currentTopic)?e.currentTopic:void 0),t=(0,m.pn)(e=>e.currentReferences.find(e=>"docset"===e.type));return u.W.topicsAsReferences?null:e??t}(),o=u.W.ambientErrorBanner&&t;return(0,s.jsxs)(s.Fragment,{children:[!a.visible&&!o&&!i.visible&&!r&&!e&&(0,s.jsx)(q,{}),a.visible&&(0,s.jsx)(X,{className:U.banner,onDismiss:a.onDismiss}),o&&(0,s.jsx)(D.P,{ambientError:t,useLargerBorderRadius:!0}),i.visible&&n===M.mF.LicensedFull&&(0,s.jsx)(ea,{className:U.banner,onDismiss:i.onDismiss}),r&&(0,s.jsx)(Z,{topic:r})]})}try{ei.displayName||(ei.displayName="ChatInputBanners")}catch{}var er=n(54533),eo=n(69425),es=n(12152),el=n(42252),ec=n(69676),ed=n(82678),eu=n(71941),em=n(34614),ep=n(24664);let eh={errorFallbackContainer:"ErrorFallback-module__errorFallbackContainer--woWrK"};function ef({regionName:e}){return(0,s.jsx)("div",{className:eh.errorFallbackContainer,children:(0,s.jsxs)(ep.A,{children:[(0,s.jsx)(ep.A.Visual,{children:(0,s.jsx)(W.AlertIcon,{size:"medium"})}),(0,s.jsx)(ep.A.Heading,{children:"Something went wrong"}),(0,s.jsxs)(ep.A.Description,{children:[e," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",(0,s.jsx)(em.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),"."]})]})})}try{ef.displayName||(ef.displayName="ErrorFallback")}catch{}let eg={container:"ContentPreview-module__container--bV98v",toolbar:"ContentPreview-module__toolbar--b58FL",actions:"ContentPreview-module__actions--AGnBu",tabsContainer:"ContentPreview-module__tabsContainer--bNywg",tabs:"ContentPreview-module__tabs--Si9sh",rightDivider:"ContentPreview-module__rightDivider--Ta3Js",leftDivider:"ContentPreview-module__leftDivider--X7WDV",content:"ContentPreview-module__content--o15no"};var ev=n(22418),ex=n(29653),e_=n(41686),ey=n(64704),eC=n(35982),ej=n(69930),eN=n(66325),eb=n(10833),eI=n(73218),eS=n(75177),ew=n(18312);let eE={container:"IssuePreview-module__container--XUu9S"};var ek=n(2676);let eT={version:"VersionName-module__version--OW5eC"};function eP({version:e}){return(0,s.jsxs)(ek.A,{className:eT.version,as:"span",children:["v",e]})}try{eP.displayName||(eP.displayName="VersionName")}catch{}let eA={anchor:"VersionSelector-module__anchor--HA1Ko"};function eL({item:e}){let{versionedItems:t,openItem:n}=(0,x.xx)(),a=(0,er.oy)(e.id),i=t.get(a)??[];if(i.length<=1)return null;let r=i.indexOf(e.id);return(0,s.jsxs)(z.W,{children:[(0,s.jsx)(z.W.Button,{variant:"invisible",className:eA.anchor,children:(0,s.jsx)(eP,{version:r+1})}),(0,s.jsx)(z.W.Overlay,{children:(0,s.jsx)(G.l,{selectionVariant:"single",children:i.map((t,a)=>(0,s.jsxs)(G.l.Item,{onSelect:()=>n(t),selected:t===e.id,children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(eP,{version:a+1})}),"Version ",a+1]},t))})})]})}try{eL.displayName||(eL.displayName="VersionSelector")}catch{}function eO({isPreviewOpening:e,issue:t,onClose:n}){let[a,i]=(0,v.useState)(e),[r,o]=(0,v.useState)(null),[l,c]=(0,v.useState)(t.name),[d,p]=(0,v.useState)(t.body??""),[h,f]=(0,ew.useQueryLoader)(eN._),g=(0,v.useRef)(null),x=(0,ew.useRelayEnvironment)();(0,eb.DW)(x,t.owner,t.repo).subscribe({next:e=>{null==r&&null!=e.repository&&o((0,ew.readInlineData)(eb.R6,e.repository))}});let _=(0,m.Pk)(),y=(0,E.b)(),C=u.W.createIssueForm;(0,v.useEffect)(()=>{c(t.name),p(t.body??"")},[t.name,t.body]),(0,v.useEffect)(()=>{if(a){let e=setTimeout(()=>i(!1),500);return()=>clearTimeout(e)}f({owner:t.owner,name:t.repo})},[a,f,t.owner,t.repo]);let j=(0,v.useMemo)(()=>({navigate:eI.l,shouldSkipSetDocumentTitle:!0,titleAs:"h2",useViewportQueries:!1,withLiveUpdates:!0,onIssueDelete:n}),[n]),N=(0,v.useCallback)(async e=>{await y.sendChatMessage({thread:y.getSelectedThread(_),content:`I created the issue myself, it can be found at: (${e.issue.url})`,references:[],topic:_.currentTopic,context:_.context,customInstructions:_.customInstructions,model:_.model})},[y,_]);return a?(0,s.jsx)(ej.Q,{optionConfig:j}):h?C?r?(0,s.jsxs)(eS.A,{className:eE.container,sx:{p:3,display:"flex",flexDirection:"column",alignItems:"stretch",gap:2},tabIndex:-1,children:[(0,s.jsx)("div",{children:(0,s.jsx)(eL,{item:t})}),(0,s.jsx)("div",{children:(0,s.jsx)(ey.S,{optionConfig:(0,e_.Y)(),preselectedData:{repository:r},children:(0,s.jsx)(ex.e,{repository:r,title:l,body:d,setTitle:c,setBody:p,resetTitleAndBody:()=>{c(""),p("")},clearOnCreate:n,issueFormRef:g,onCreateSuccess:N,onCreateError:eI.l,onCancel:n,footer:(0,s.jsx)(ev.l,{onClose:n})})})})]}):null:(0,s.jsx)("div",{className:eE.container,children:(0,s.jsx)(eC.s,{repository:t.repo,owner:t.owner,title:t.name,body:t.body,children:(0,s.jsx)(eN.H,{urlParameterQueryData:h})})}):null}try{eO.displayName||(eO.displayName="CreateIssuePreview")}catch{}var eR=n(34225),eB=n(26514),eD=n(46584),eM=n(23976),eU=n(55847),e$=n(54006);let eV=e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name||"file",n.click(),URL.revokeObjectURL(t)},eW={container:"FilePreview-module__container--_pENP",contentWrapper:"FilePreview-module__contentWrapper--CRC1E",codeMirrorContainer:"FilePreview-module__codeMirrorContainer--bIVZV",toolbar:"FilePreview-module__toolbar--toYCM",toolbarLeft:"FilePreview-module__toolbarLeft--FG_Fy",toolbarLoC:"FilePreview-module__toolbarLoC--cjBe0",toolbarActions:"FilePreview-module__toolbarActions--GZPSm"};var eF=n(33764),ez=n(21728);let eH={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function eG(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}var eK=n(75632);let eq={container:"SandboxView-module__container--_qS7F",iframe:"SandboxView-module__iframe--bgP8I"},eX={error:"ErrorMessage-module__error--EPInF",errorIcon:"ErrorMessage-module__errorIcon--qRxBg",errorHeader:"ErrorMessage-module__errorHeader--ePU6Q"};function eQ(e){let t;let n=(0,ez.c)(4),{error:a}=e;if(n[0]!==a){let e,i;let r=a?.split("\n")??[];n[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("span",{className:eX.errorIcon,children:(0,s.jsx)(W.StopIcon,{size:24})}),i=(0,s.jsx)("h2",{className:eX.errorHeader,children:"HTML rendering failed"}),n[2]=e,n[3]=i):(e=n[2],i=n[3]),t=(0,s.jsxs)("div",{className:eX.error,children:[e,i,r.length>0?(0,s.jsx)("p",{children:r.map(eJ)}):(0,s.jsx)("p",{children:"Refresh the page or check the HTML"})]}),n[0]=a,n[1]=t}else t=n[1];return t}function eJ(e){return(0,s.jsxs)(s.Fragment,{children:[e,(0,s.jsx)("br",{})]},`error-line-${e}}`)}try{eQ.displayName||(eQ.displayName="ErrorMessage")}catch{}function eY(e){let t,n,a,i;let r=(0,ez.c)(11),{content:o,scripts:l,styles:c,viewscreenUrl:d}=e,u=(0,eK.G7)("viewscreen_sandbox");r[0]!==d?(n=new URL("view/sandbox?url=client://sandbox",d).toString(),t=new URL(n,L.fV.origin),r[0]=d,r[1]=t,r[2]=n):(t=r[1],n=r[2]);let m=t.origin,p=(0,v.useRef)(null),h=(0,v.useRef)(null);r[3]!==o||r[4]!==l||r[5]!==c?(a={content:o,scripts:l,styles:c},r[3]=o,r[4]=l,r[5]=c,r[6]=a):a=r[6];let{renderState:f,errorMessage:g}=function(e,t,n,a){let i,r,o,s,l,c;let d=(0,ez.c)(16),[u,m]=(0,v.useState)(eH.LOADING),[p,h]=(0,v.useState)();d[0]!==t||d[1]!==e||d[2]!==a?(i=n=>(function(e,t,n,a,i,r){let o=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!o)return;let s=o.body,l=n.current?.contentWindow;switch(s){case"hello":eG(l,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),eG(l,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":r(eH.ERROR),o.payload?.error&&i(o.payload.error);break;case"loading":r(eH.LOADING);break;case"loaded":r(eH.LOADED);break;case"ready":if(!n.current||!a.current)return;r(eH.READY)}})(n,0,e,t,h,m),d[0]=t,d[1]=e,d[2]=a,d[3]=i):i=d[3];let f=i;return d[4]!==f?(r=()=>(window.addEventListener("message",f),()=>window.removeEventListener("message",f)),o=[f],d[4]=f,d[5]=r,d[6]=o):(r=d[5],o=d[6]),(0,v.useEffect)(r,o),d[7]!==t||d[8]!==e||d[9]!==n||d[10]!==u?(s=()=>{u===eH.READY&&e.current&&t.current&&function(e,t,n){let a={type:"render:cmd",body:{cmd:"sandbox:data:ready","sandbox:data:ready":{...n}}};eG(e.contentWindow,a)}(e.current,t.current,n)},l=[t,e,n,u],d[7]=t,d[8]=e,d[9]=n,d[10]=u,d[11]=s,d[12]=l):(s=d[11],l=d[12]),(0,v.useEffect)(s,l),d[13]!==p||d[14]!==u?(c={renderState:u,errorMessage:p},d[13]=p,d[14]=u,d[15]=c):c=d[15],c}(p,h,a,m);return u?(r[7]!==g||r[8]!==f||r[9]!==n?(i=(0,s.jsx)("div",{ref:h,className:eq.container,children:f===eH.ERROR?(0,s.jsx)(eQ,{error:g}):(0,s.jsx)("iframe",{ref:p,className:eq.iframe,sandbox:"allow-scripts",title:"Preview page for the user provided code",src:n})}),r[7]=g,r[8]=f,r[9]=n,r[10]=i):i=r[10],i):null}try{eY.displayName||(eY.displayName="SandboxView")}catch{}let eZ={loadingContainer:"HtmlPreview-module__loadingContainer--b987j",loadingHead:"HtmlPreview-module__loadingHead--abHb3",loadingText:"HtmlPreview-module__loadingText--WYXW5"};function e0(e,t,n){let a=`file:${e}`;if(!n.has(a))return null;let i=n.get(a)??[],r=i[i.length-1];if(!r)return null;let o=t.get(r);return o&&"file"===o.type?o:null}function e1({file:e}){let{previewUrl:t}=(0,f.X)(),{items:n,versionedItems:a}=(0,x.xx)(),{scripts:i,styles:r,files:o}=function(e,t,n){let a=Array.from(e.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>e0(e,t,n)),i=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&n.push(t)}return n})(e).map(e=>e0(e,t,n)),r=Array.from(e.matchAll(RegExp("<script(?![^>]*\\bsrc=).*?>(.*?)<\\/script>","gms"))).map(e=>e[1]).filter(e=>void 0!==e);return{scripts:[...a.map(e=>e?.value??""),...r,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join("\n"),styles:i.map(e=>e?.value??"").join("\n"),files:a.concat(i)}}(e.value,n,a),[l,c]=(0,v.useState)(!1),d=(e.isStreaming||o.some(e=>!e||e.isStreaming))&&!l;return((0,v.useEffect)(()=>{if(d){let e=setTimeout(()=>{c(!0)},3e3);return()=>clearTimeout(e)}}),d)?(0,s.jsxs)("div",{className:eZ.loadingContainer,children:[(0,s.jsx)("div",{className:eZ.loadingHead,children:(0,s.jsx)(eF.Ay,{animationType:"thinking",loopAnimation:!0,mode:"immersive"})}),(0,s.jsx)("p",{className:eZ.loadingText,children:"Preparing your preview\u2026"})]}):(0,s.jsx)(eY,{scripts:i,styles:r,content:e.value,viewscreenUrl:t})}try{e1.displayName||(e1.displayName="HtmlPreview")}catch{}var e2=n(24880),e5=n(44968),e3=n(57572),e4=n(63867),e6=n(74022);let e7={markdownPreview:"MarkdownPreview-module__markdownPreview--TTDgv",spinner:"MarkdownPreview-module__spinner--hV_1B",error:"MarkdownPreview-module__error--MpG_1",errorIcon:"MarkdownPreview-module__errorIcon--ZskC4",errorHeader:"MarkdownPreview-module__errorHeader--WHC6c"};function e8({file:e}){let t=function(e,t){let[n,a]=(0,v.useState)(e),i=(0,v.useMemo)(()=>(0,e6.A)(a,2e3),[2e3]);return(0,v.useEffect)(()=>i(e),[i,e]),n}(e.value,2e3),{status:n,data:a}=(0,Y.I)({queryKey:["copilot-immersive","MarkdownPreview",t,e.name],queryFn:async()=>{let n=await (0,e3.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:t,filename:e.name}});if(!n.ok)throw Error(`Failed to load rendered markdown (${n.status} on ${n.url})`);return await n.json()},placeholderData:e2.rX,staleTime:1/0});return(0,s.jsx)("div",{className:(0,T.$)("readme html-blob blob",e7.markdownPreview),children:"pending"===n?(0,s.jsx)("div",{className:e7.spinner,children:(0,s.jsx)(e4.A,{srText:"Loading Markdown preview\u2026"})}):"error"===n?(0,s.jsxs)("div",{className:e7.error,children:[(0,s.jsx)("span",{className:e7.errorIcon,children:(0,s.jsx)(W.StopIcon,{size:24})}),(0,s.jsx)("h2",{className:e7.errorHeader,children:"Markdown rendering failed"}),(0,s.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,s.jsx)(e5.mo,{className:"markdown-body",html:a.html})})}try{e8.displayName||(e8.displayName="MarkdownPreview")}catch{}function e9({file:e,onClose:t}){let{openItem:n,removeItems:a,updateItem:i,versionedItems:r}=(0,x.xx)(),o=(0,m.Pk)(),l=e.isStreaming?o.messages[o.messages.length-1]:o.messages.find(t=>t.id===e.messageId),{linesOfCode:c,isPreviewable:u,size:p}=function(e){let t=(0,eD.u)("copilot_immersive_file_preview_additional_formats"),n=(0,eD.u)("copilot_immersive_preview_html_files");return(0,v.useMemo)(()=>{let a=new Blob([e.value]).size,i=new Set;return t&&i.add("markdown"),n&&i.add("html"),{linesOfCode:e.value.split("\n").length,isPreviewable:i.has(e.language),size:function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(a)}},[e.language,e.value,t,n])}(e);!function(e,t){let{reference:n}=e,a=(0,E.b)(),{isLoading:i,isError:r,data:o}=(0,Y.I)({queryKey:["copilot-reference-preview","copilot","references",n?.type,n?(0,d.Vb)(n):void 0],queryFn:async()=>{if(!n||"file"!==n.type||e.value)return null;let i=await a.service.hydrateReference(n);return i.ok?(t({...e,value:i.payload.contents,isStreaming:!1}),i.payload):null},staleTime:Number.POSITIVE_INFINITY});(0,v.useEffect)(()=>{o?.contents&&e.value!==o.contents&&t({...e,value:o.contents,isStreaming:!1})},[o?.contents,e,t])}(e,i);let[h,f]=(0,v.useState)("code"),g=(0,v.useCallback)(()=>{let t=function(e,t){let n=(0,er.oy)(e),a=t.get(n)??[],i=a.indexOf(e);return a[i-1]}(e.id,r);t&&n(t),a([e.id])},[e.id,n,a,r]);return(0,v.useEffect)(()=>{(l?.error?.type==="publicCode"||l?.error?.type==="filtered")&&t()},[l?.error,t]),(0,s.jsxs)("div",{className:eW.container,children:[(0,s.jsxs)("div",{className:eW.toolbar,children:[(0,s.jsxs)("div",{className:eW.toolbarLeft,children:[u&&(0,s.jsxs)(eM.I,{"aria-label":"File view",onChange:e=>{let t=0===e?"preview":"code";f(t),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:[(0,s.jsx)(eM.I.Button,{selected:"preview"===h,children:"Preview"}),(0,s.jsx)(eM.I.Button,{selected:"code"===h,children:"Code"})]}),(0,s.jsx)(eL,{item:e}),(0,s.jsxs)("p",{className:eW.toolbarLoC,children:[c," ",1===c?"line":"lines"," \xb7 ",p]})]}),(0,s.jsxs)("div",{className:eW.toolbarActions,children:[e.isUserEdited&&(0,s.jsx)(eU.Q,{onClick:g,children:"Revert"}),(0,s.jsx)(eB.T,{textToCopy:e.value,ariaLabel:"Copy code",onCopy:()=>(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}),(0,s.jsx)(H.K,{"aria-label":"Download code",icon:W.DownloadIcon,variant:"invisible",onClick:()=>{eV(new File([e.value],e.name)),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}})]})]}),(0,s.jsx)("div",{className:eW.contentWrapper,children:u&&"preview"===h?(0,s.jsx)(tt,{file:e}):(0,s.jsx)(te,{file:e})})]})}function te({file:e}){let{openItem:t,updateItem:n,versionedItems:a}=(0,x.xx)(),i=function(e,t){let n=e.get((0,er.oy)(t.id))??[];return n[n.length-1]===t.id}(a,e),r=(0,eD.u)("copilot_immersive_edit_file")&&!e.isStreaming&&i&&!e.reference,o=(0,v.useId)(),l=(0,v.useMemo)(()=>(function({language:e,value:t}){let n=/^\t/m.test(t)?"tab":"space";return{indentUnit:function(e,t){if("space"!==t)return 8;{var n;let t=e.match(/^( +)[^*]/im);return void 0!==(n=t?.[1]?.length)&&n>=1&&n<=12?n:2}}(t,n),indentWithTabs:"tab"===n,lineWrapping:function(e){let t=(0,e$.v)(e);return t?.wrap??!1}(e)}})(e),[e]),[c,d]=(0,v.useState)(),u=c?.id===e.id?c.value:e.value,m=(0,v.useCallback)(a=>{if(r&&a!==e.value){if(e.isUserEdited)e.value=a,d({value:a,id:e.id});else{let i={...e,id:`file:${e.name}#${Date.now()}`,timestamp:new Date,isUserEdited:!0};n(i),t(i.id),d({value:a,id:i.id})}}},[e,r,t,n]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{id:o,className:"sr-only",children:[e.name," file contents"]}),(0,s.jsx)(eR.default,{ariaLabelledBy:o,containerClassName:eW.codeMirrorContainer,fileName:e.name,height:"100%",isReadOnly:!r,spacing:l,value:u,onChange:m,placeholder:"Loading..."})]})}function tt({file:e}){return"markdown"===e.language?(0,s.jsx)(e8,{file:e}):"html"===e.language?(0,s.jsx)(e1,{file:e}):null}try{e9.displayName||(e9.displayName="FilePreview")}catch{}try{te.displayName||(te.displayName="CodeMirrorView")}catch{}try{tt.displayName||(tt.displayName="PreviewComponent")}catch{}let tn={container:"ImagePreview-module__container--AUrb4",imageElement:"ImagePreview-module__imageElement--DNVl1"};function ta({image:e}){return(0,s.jsx)("div",{className:tn.container,children:(0,s.jsx)("img",{className:tn.imageElement,src:e.url,alt:e.altText})})}try{ta.displayName||(ta.displayName="ImagePreview")}catch{}var ti=n(16031),tr=n(3172);let to=(0,v.memo)(function({isPreviewOpening:e,issue:t,onClose:n}){let[a,i]=(0,v.useState)(e);(0,v.useEffect)(()=>{if(a){let e=setTimeout(()=>i(!1),500);return()=>clearTimeout(e)}},[a]);let r=(0,v.useMemo)(()=>({navigate:eI.l,shouldSkipSetDocumentTitle:!0,titleAs:"h2",useViewportQueries:!1,withLiveUpdates:!0,onIssueDelete:n}),[n]),o=(0,v.useMemo)(()=>({owner:t.owner,repo:t.repo,number:t.number,type:"Issue"}),[t.number,t.owner,t.repo]);return a?(0,s.jsx)(ej.Q,{optionConfig:r}):(0,s.jsx)("div",{className:eE.container,children:(0,s.jsx)(tr.e,{children:(0,s.jsx)(ti.cI,{itemIdentifier:o,optionConfig:r})})})});try{to.displayName||(to.displayName="IssuePreview")}catch{}function ts({isOpening:e,onClose:t,previewItem:n}){let a=null;switch(n.type){case"file":a=(0,s.jsx)(e9,{file:n,onClose:t});break;case"issue":a=(0,s.jsx)(to,{isPreviewOpening:e,issue:n,onClose:t});break;case"new-issue":a=(0,s.jsx)(eO,{isPreviewOpening:e,issue:n,onClose:()=>t(!0)});break;case"image":a=(0,s.jsx)(ta,{image:n})}return a?(0,s.jsx)(es.t,{fallback:(0,s.jsx)(ef,{regionName:"This workbench item"}),children:a}):null}try{ts.displayName||(ts.displayName="ContentPreviewItem")}catch{}let tl={tabContainer:"ContentPreviewTab-module__tabContainer--TyGLZ",tabContent:"ContentPreviewTab-module__tabContent--zNIXv",isActive:"ContentPreviewTab-module__isActive--xbw0T",mainButton:"ContentPreviewTab-module__mainButton--Y_fZZ",icon:"ContentPreviewTab-module__icon--Ff5yz",title:"ContentPreviewTab-module__title--WZajJ",closeButton:"ContentPreviewTab-module__closeButton--DACs7"};function tc({file:e}){return e.isStreaming?(0,s.jsx)(e4.A,{size:"small"}):"markdown"===e.language?(0,s.jsx)(W.MarkdownIcon,{}):(0,s.jsx)(W.CodeIcon,{})}function td({item:e}){switch(e.type){case"file":return(0,s.jsx)(tc,{file:e});case"image":return(0,s.jsx)(W.ImageIcon,{});case"issue":return(0,s.jsx)(W.IssueOpenedIcon,{});default:return null}}let tu=(0,v.forwardRef)(function({onClick:e,onClose:t,isActive:n,item:a,controlHintId:i,tabPanelId:r,...o},l){let c=()=>{t&&t(),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},d=(0,v.useRef)(null),u=a.name;return(0,s.jsx)("div",{className:tl.tabContainer,children:(0,s.jsxs)("div",{className:(0,T.$)(tl.tabContent,{[tl.isActive]:n}),children:[(0,s.jsxs)("button",{className:tl.mainButton,type:"button",role:"tab","aria-selected":n?"true":void 0,"aria-describedby":i,"aria-controls":r,onClick:t=>{e&&e(t),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},onKeyDown:e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":c();break;case"tab":if(e.shiftKey)break;e.preventDefault(),d.current?.focus()}},onAuxClick:e=>{1===e.button&&c()},ref:l,...o,children:[(0,s.jsx)("span",{className:tl.icon,children:(0,s.jsx)(td,{item:a})}),(0,s.jsx)("span",{className:tl.title,"data-title":u,"data-testid":`content-preview-tab-${a.id}`,children:u})]}),(0,s.jsx)("div",{className:tl.closeButton,children:(0,s.jsx)(H.K,{icon:W.XIcon,size:"small",variant:"invisible","aria-label":`Close ${u}`,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:c,ref:d})})]})})});try{tc.displayName||(tc.displayName="CodeTabIcon")}catch{}try{td.displayName||(td.displayName="TabIcon")}catch{}try{tu.displayName||(tu.displayName="ContentPreviewTab")}catch{}function tm(){return(0,s.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})})}try{tm.displayName||(tm.displayName="DiceIcon")}catch{}let tp={container:"EmptyState-module__container--iHvWJ",icon:"EmptyState-module__icon--e1df9",heading:"EmptyState-module__heading--p3oK5",subtitle:"EmptyState-module__subtitle--oksOj"};function th(){let e=(0,E.b)(),t=(0,m.Pk)(),n=(0,P.zy)(),a=e.getSelectedThread(t),i=(0,f.X)(),[r,o]=(0,v.useState)([]);return(0,v.useEffect)(()=>{var e;if(Array.isArray(e=i.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=i.icebreakers.find(e=>"interactional"===e.type);e&&e.data.length>0&&o(e.data)}},[i.icebreakers,n]),(0,s.jsxs)("div",{className:tp.container,children:[(0,s.jsx)(W.BrowserIcon,{size:24,className:tp.icon}),(0,s.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),(0,s.jsx)("h2",{className:tp.heading,children:"View files directly within Copilot"}),(0,s.jsx)("p",{className:tp.subtitle,children:"Ask to generate a file or app, or use the button below to try it yourself."}),(0,s.jsx)(eU.Q,{leadingVisual:tm,onClick:()=>{if(0===r.length)return;let n=function(e){let t=Math.floor(Math.random()*e.length),n=e[t];if(!n)throw Error("No icebreaker found");return n}(r),i=0===t.messages.length?a:e.getSelectedThread(t),o=t.currentUserLogin,s=n.message;e.sendChatMessage({thread:i,content:s.replaceAll("$$USERNAME$$",o),references:t.currentReferences,topic:t.currentTopic,context:t.context,customInstructions:t.customInstructions,model:t.model}),(0,y.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:t.currentTopic?.name,mode:"immersive",suggestionId:n.id})},disabled:t.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]})}try{th.displayName||(th.displayName="EmptyState")}catch{}let tf={container:"LoadingState-module__container--a0Cz6"};function tg(){return(0,s.jsx)("div",{className:tf.container,children:(0,s.jsx)(e4.A,{size:"large"})})}try{tg.displayName||(tg.displayName="LoadingState")}catch{}function tv(e,t,n={}){(0,y.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...n})}function tx({returnFocusRef:e,containerLabelId:t}){let{items:n,openItems:a,selectedItem:i,openItem:r,closeItem:o,closePreviewPane:l,showLoadingState:d,previewPaneOpen:u}=(0,x.xx)(),p=(0,el.S)(u),h=u&&!p,f=p&&!u,g=a.map(e=>n.get(e)).filter(e=>e?.type==="file"),_=(0,c.nu)((0,m.A3)("activePlugin")),C=(0,v.useId)(),j=(0,v.useId)(),N=(0,v.useId)(),b=a.map(e=>n.get(e)).filter(e=>!!e);(0,v.useEffect)(()=>{f&&e.current?.focus()},[f,e]);let I=async()=>{let e=g.map(e=>new File([e.value],e.name));eV(new File([await (0,eu._6)(e).blob()],"files.zip"))},S=b.find(e=>e.id===i)??b[0],w=(0,v.useCallback)((e=!1)=>{if(S){let t=e&&1===b.length;o(S.id),t&&(l(),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},[o,l,b.length,S]),E=(0,v.useRef)([]),k=(0,v.useRef)(null);(0,ed.G)({containerRef:k,focusableElementFilter:e=>"tab"===e.role,bindKeys:ec.z0.ArrowHorizontal|ec.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},[b]);let P=!(0,eo.g)(k),A=e=>{let t=b[e];if(!t)return;let n=E.current[e+1]??E.current[e-1]??k.current;n?.focus();let a=1===b.length;o(t.id),a&&l(),tv("filePreviewTab.close",t)},L=g.length>1&&(0,s.jsxs)(z.W,{children:[(0,s.jsx)(z.W.Anchor,{children:(0,s.jsx)(H.K,{icon:W.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,s.jsx)(z.W.Overlay,{children:(0,s.jsx)(G.l,{children:(0,s.jsxs)(G.l.Item,{onSelect:I,children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.FileZipIcon,{})}),"Download all files"]})})})]});return _?.PreviewAreaComponent?(0,s.jsx)(t_,{plugin:_,closePreviewPane:l}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:eg.toolbar,children:[(0,s.jsx)("div",{className:(0,T.$)(eg.actions,eg.rightDivider),children:(0,s.jsx)(ty,{})}),(0,s.jsx)("div",{className:eg.tabsContainer,children:(0,s.jsxs)("div",{className:eg.tabs,role:"tablist","aria-labelledby":t,ref:k,tabIndex:-1,onWheel:e=>{e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft+=e.deltaY)},children:[b.map((e,t)=>(0,s.jsx)(tu,{id:e.id===i?C:void 0,tabPanelId:e.id===i?j:void 0,controlHintId:N,isActive:e.id===i,onClick:()=>{r(e.id),tv("filePreviewTab.click",e)},onClose:()=>A(t),item:e,ref:e=>{E.current[t]=e}},e.id)),(0,s.jsx)("span",{id:N,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),(0,s.jsx)("span",{})]})}),L&&(0,s.jsx)("div",{className:(0,T.$)(eg.actions,P&&eg.leftDivider),children:L})]}),(0,s.jsx)("div",{className:eg.content,role:"tabpanel",id:j,"aria-labelledby":C,children:d?(0,s.jsx)(tg,{}):S?(0,s.jsx)(ts,{isOpening:h,previewItem:S,onClose:w}):(0,s.jsx)(th,{})})]})}function t_({plugin:e,closePreviewPane:t}){let n=(0,m.Pk)(),{PreviewAreaComponent:a}=e;return a?(0,s.jsx)(a,{chatState:n,plugin:e,closePreviewPane:t},n.selectedThreadID):null}function ty(){let{closePreviewPane:e}=(0,x.xx)();return(0,s.jsx)(H.K,{variant:"invisible",icon:W.SidebarCollapseIcon,"aria-label":"Close workbench",onClick:()=>{e(),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"})}})}function tC(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:eg.toolbar,children:(0,s.jsx)("div",{className:(0,T.$)(eg.actions,eg.rightDivider),children:(0,s.jsx)(ty,{})})}),(0,s.jsx)("div",{className:(0,T.$)(eg.content),children:(0,s.jsx)(ef,{regionName:"The workbench"})})]})}function tj(e){let t=(0,v.useId)();return(0,s.jsxs)("aside",{"aria-labelledby":t,className:eg.container,tabIndex:-1,children:[(0,s.jsx)("h2",{id:t,className:"sr-only",children:"Workbench"}),(0,s.jsx)(es.t,{fallback:(0,s.jsx)(tC,{}),children:(0,s.jsx)(tx,{...e,containerLabelId:t})})]})}try{tx.displayName||(tx.displayName="ContentPreviewInner")}catch{}try{t_.displayName||(t_.displayName="PluginContent")}catch{}try{ty.displayName||(ty.displayName="CloseContentPreviewButton")}catch{}try{tC.displayName||(tC.displayName="ContentPreviewFallback")}catch{}try{tj.displayName||(tj.displayName="ContentPreview")}catch{}var tN=n(14987),tb=n(91582),tI=n(25408),tS=n(57393),tw=n(2640),tE=n(57516),tk=n(46928),tT=n(46309),tP=n(47139),tA=n(87335),tL=n(32837);function tO(){let e=(0,E.b)();return(0,v.useCallback)(async t=>{if(window.location.pathname===d.Jz){t?.customCopilotId===void 0&&e.dispatch({type:"SET_CUSTOM_COPILOT_ID",customCopilotId:null});return}history.pushState(history.state,"",d.Jz),e.dispatch({type:"SELECT_PLUGIN",plugin:null}),await e.selectThread(null,t)},[e])}var tR=n(53526),tB=n(73451),tD=n(67138),tM=n(91246),tU=n(37404),t$=n(76797),tV=n(52464);let tW={container:"ShareConversationDialog-module__container--wpFqj",innerContainer:"ShareConversationDialog-module__innerContainer--ew7o4",infoIcon:"ShareConversationDialog-module__infoIcon--w3s7C",sharedLinkContainer:"ShareConversationDialog-module__sharedLinkContainer--3dbSk",textInputContainer:"ShareConversationDialog-module__textInputContainer--_LqvX",textInput:"ShareConversationDialog-module__textInput--ag3aq",copiedButton:"ShareConversationDialog-module__copiedButton--td1x8",actionDescription:"ShareConversationDialog-module__actionDescription--R6m66",updatedButton:"ShareConversationDialog-module__updatedButton--hbOLz",deletedMessage:"ShareConversationDialog-module__deletedMessage--ULapD",successIcon:"ShareConversationDialog-module__successIcon--_uV9B",warningText:"ShareConversationDialog-module__warningText--mnPk3",mutedText:"ShareConversationDialog-module__mutedText--uOtOA",bannerContainer:"ShareConversationDialog-module__bannerContainer--v41YW",buttonStack:"ShareConversationDialog-module__buttonStack--AQnkh"},tF=({closeDialog:e,threadId:t})=>{let n=(0,m.Pk)(),a=(0,E.b)(),[i,r]=(0,v.useState)(!1),[o,l]=(0,v.useState)(!1),[c,d]=(0,v.useState)(!1),[p,h]=(0,v.useState)(!1),{selectedThreadID:f,ssoOrganizations:g,apiUrl:x,threads:_,messages:C}=n,[N,b]=(0,v.useState)(()=>{let e=t||f,n=_.get(e);return n?.sharedID||""}),I=(0,v.useRef)(""!==N),S=_.get(t||f),w=C[C.length-1],k=S?.sharedMessageID===w?.id,T=k?"this shared link is up to date":"a previous version of this conversation has been shared",P=L.fV.origin,A=`${P}/copilot/share/${N||"..."}`;(0,v.useEffect)(()=>{if(i){let e=setTimeout(()=>r(!1),1500);return()=>clearTimeout(e)}},[i]),(0,v.useEffect)(()=>{if(c){let e=setTimeout(()=>d(!1),2e3);return()=>clearTimeout(e)}},[c]),(0,v.useEffect)(()=>{if(p){let e=setTimeout(()=>h(!1),2e3);return()=>clearTimeout(e)}},[p]);let O=(0,v.useCallback)(async()=>{try{await (0,t$.D)(A),r(!0),(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},[A]);(0,v.useEffect)(()=>{N&&O()},[O,N]),(0,v.useEffect)(()=>{let e=t||f;if(e){let t=_.get(e);b(t?.sharedID||"")}},[a,b,f,_,t]);let R=(0,v.useCallback)(async()=>{l(!0);let e=t||f,n=new tU.k(x,g),i=await n.shareThread(e,u.W.copilotShareActiveSubthread?a.FindLastMessageID():"");if(i.ok){let{sharedAt:t,sharedID:n,sharedMessageID:r}=i.payload;l(!1),b(n);let o=_.get(e);a.dispatch({type:"SHARED_THREAD_UPDATED",thread:{...o,sharedID:n,sharedAt:t,sharedMessageID:r}}),(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive"})}else l(!1)},[x,a,f,g,_,t]),B=(0,v.useCallback)(async()=>{let e=t||f,n=new tU.k(x,g),i=await n.unshareThread(e);i.ok&&(a.dispatch({type:"SHARED_THREAD_UPDATED",thread:{...i.payload}}),I.current=!1,h(!0),(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive"}))},[x,a,f,g,t]),D=(0,v.useCallback)(()=>{r(!1),d(!1)},[]),M=(0,v.useCallback)(()=>{D(),e()},[e,D]);return(0,s.jsx)(tM.l,{title:"Share conversation",onClose:M,width:"large",children:(0,s.jsxs)("div",{className:tW.container,children:[(0,s.jsx)(j.l,{"aria-label":"Private content banner",hideTitle:!0,title:"This conversation may contain private content",className:tW.bannerContainer,description:(0,s.jsx)(s.Fragment,{children:"This conversation may contain private content. Viewers must have access to all referenced content."})}),(0,s.jsxs)(tT.B,{direction:"vertical",gap:"condensed",children:[(0,s.jsxs)(tT.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:[(0,s.jsx)(tV.A,{weight:"semibold",children:"Link"}),(0,s.jsx)("span",{className:tW.mutedText,children:N?T:"create link to share the current version of this conversation."})]}),(0,s.jsx)("div",{className:tW.innerContainer,children:(0,s.jsx)("div",{className:tW.sharedLinkContainer,children:(0,s.jsx)("div",{className:tW.textInputContainer,children:(0,s.jsx)(tD.A,{"aria-label":"Shared link",readOnly:!0,disabled:""===N,value:N&&A,placeholder:N?void 0:A,className:tW.textInput})})})})]}),(0,s.jsxs)(tT.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:tW.buttonStack,children:[p&&(0,s.jsxs)("div",{className:tW.deletedMessage,children:[(0,s.jsx)(W.CheckIcon,{size:16,className:tW.successIcon}),(0,s.jsx)("span",{children:"Share link deleted"})]}),(()=>{if(!N)return(0,s.jsx)(eU.Q,{variant:"primary",leadingVisual:W.LinkIcon,loading:o,disabled:o,onClick:R,children:"Create link"})})(),N&&(()=>{if(!N)return;let e=async()=>{await R(),d(!0)};return(0,s.jsxs)(z.W,{children:[(0,s.jsx)(z.W.Button,{className:c?tW.updatedButton:void 0,children:c?(0,s.jsxs)(tT.B,{direction:"horizontal",padding:"none",gap:"condensed",align:"center",children:[(0,s.jsx)(W.CheckIcon,{}),"Updated!"]}):"Manage link"}),(0,s.jsx)(z.W.Overlay,{width:"medium",children:(0,s.jsxs)(G.l,{children:[(0,s.jsxs)(G.l.Item,{onSelect:e,disabled:k,children:[(0,s.jsxs)(tT.B,{direction:"horizontal",padding:"none",gap:"condensed",align:"center",children:[(0,s.jsx)(W.SyncIcon,{}),"Update link"]}),(0,s.jsxs)(G.l.Description,{variant:"block",className:tW.actionDescription,children:["Update shared conversation to include most recent messages",k&&(0,s.jsx)(tT.B,{align:"start",children:(0,s.jsx)("span",{className:tW.warningText,children:"This shared link is up to date"})})]})]}),(0,s.jsx)(G.l.Divider,{}),(0,s.jsxs)(G.l.Item,{variant:"danger",onSelect:()=>B(),children:[(0,s.jsxs)(tT.B,{direction:"horizontal",padding:"none",gap:"condensed",align:"center",children:[(0,s.jsx)(W.TrashIcon,{}),"Delete link"]}),(0,s.jsx)(G.l.Description,{variant:"block",className:tW.actionDescription,children:"Delete shared link and remove access for all users"})]})]})})]})})(),(()=>{if(N)return(0,s.jsx)(eU.Q,{onClick:O,className:i?tW.copiedButton:void 0,leadingVisual:i?(0,s.jsx)(W.CheckIcon,{className:tW.successIcon}):(0,s.jsx)(W.CopyIcon,{}),variant:i?"default":"primary",children:i?"Copied!":"Copy link"})})()]})]})})};try{tF.displayName||(tF.displayName="ShareConversationDialog")}catch{}function tz({onOpenDialog:e,showShare:t=!0}){let{canShareThread:n}=(0,f.X)(),{isWaitingOnCopilot:a,messages:i}=(0,m.Pk)(),r=(0,d.Q7)(i).length>0||a;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(G.l.Item,{onSelect:()=>{(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),e("rename")},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.PencilIcon,{})}),"Rename"]}),t&&n&&(0,s.jsxs)(G.l.Item,{disabled:r,onSelect:()=>{(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),e("share")},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.ShareAndroidIcon,{})}),"Share"]}),(0,s.jsxs)(G.l.Item,{variant:"danger",onSelect:()=>{(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),e("delete")},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.TrashIcon,{})}),"Delete"]})]})}function tH({visibleDialog:e,onClose:t,threadName:n,threadId:a,selectedThreadId:i,onStartLoading:r,onFinishLoading:o}){let{threads:l}=(0,m.Pk)(),c=(0,E.b)(),u=(0,tk.Z)(),p=(0,v.useCallback)(async()=>{t(),(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),r();let e=l.get(a);e&&(a===i&&u(d.Jz),await c.deleteThread(e)),o()},[l,a,i,u,c,o,r,t]),h=(0,v.useCallback)(async e=>{t(),(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),r();let n=l.get(a);n&&await c.renameThread(n,e),o()},[l,a,c,r,o,t]);return(0,s.jsx)(s.Fragment,{children:"delete"===e?(0,s.jsx)(tG,{onCancel:t,onConfirm:p}):"rename"===e?(0,s.jsx)(tK,{currentName:n,onCancel:t,onSubmit:h}):"share"===e?(0,s.jsx)(tF,{closeDialog:()=>{t(),(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"})},threadId:i}):null})}let tG=({onConfirm:e,onCancel:t})=>(0,s.jsx)(tR.K,{title:"Delete conversation",onClose:n=>{"confirm"===n?((0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"}),e()):((0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),t())},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this conversation? This action cannot be undone."}),tK=({currentName:e,onCancel:t,onSubmit:n})=>{let[a,i]=(0,v.useState)(void 0),r=(0,v.useRef)(null),o=(0,v.useId)(),l=()=>{(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),t()};return(0,s.jsx)(tM.l,{title:"Rename conversation",onClose:l,width:"small",footerButtons:[{content:"Cancel",onClick:l},{content:"Update",buttonType:"primary",type:"submit",form:o,onClick:()=>(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}],initialFocusRef:r,children:(0,s.jsx)("form",{id:o,onSubmit:e=>{e.preventDefault();let t=r.current?.value?.trim()??"";t?t.length>100?i("max_length"):n(t):i("required")},children:(0,s.jsxs)(tB.A,{required:!0,children:[(0,s.jsx)(tB.A.Label,{visuallyHidden:!0,children:"Name"}),(0,s.jsx)(tD.A,{ref:r,defaultValue:e,maxLength:100,block:!0}),"required"===a&&(0,s.jsx)(tB.A.Validation,{variant:"error",children:"Enter a name"}),"max_length"===a&&(0,s.jsx)(tB.A.Validation,{variant:"error",children:"Name cannot exceed 100 characters"})]})})})};try{tz.displayName||(tz.displayName="ConversationActions")}catch{}try{tH.displayName||(tH.displayName="ConversationActionDialogs")}catch{}try{tG.displayName||(tG.displayName="DeleteDialog")}catch{}try{tK.displayName||(tK.displayName="RenameDialog")}catch{}let tq={header:"Header-module__header--ufLgW",centerControls:"Header-module__centerControls--R1eiB",rightControls:"Header-module__rightControls--Ce65x",editedPromptIndicator:"Header-module__editedPromptIndicator--k1vcE",leadingVisual:"Header-module__leadingVisual--O6MuP"},tX={content:"PreviewModelCapabilityWarning-module__content--oyFl0",header:"PreviewModelCapabilityWarning-module__header--r2ydd",row:"PreviewModelCapabilityWarning-module__row--u6n_X",rowIcon:"PreviewModelCapabilityWarning-module__rowIcon--dTgPI"};function tQ(){let e=(0,m.A3)("model"),[t,n]=(0,v.useState)(!1),a=(0,v.useRef)(null);return e&&e.hasLimitedCapabilities?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(H.K,{className:"fgColor-accent",variant:"invisible","aria-label":"Model capabilities",icon:()=>(0,s.jsx)(W.InfoIcon,{className:"fgColor-accent"}),ref:a,onClick:()=>{n(!0),(0,y.BI)("dotcom_chat.activate",{target:"PREVIEW_MODEL_INFO_OPEN",mode:"immersive"})}}),t&&(0,s.jsx)(tM.l,{title:`Limited capabilities (${e.displayName})`,width:"large",onClose:()=>{n(!1),(0,y.BI)("dotcom_chat.activate",{target:"PREVIEW_MODEL_INFO_CLOSE",mode:"immersive"})},returnFocusRef:a,children:(0,s.jsxs)("div",{className:tX.content,children:[(0,s.jsx)("p",{children:"While this model is better at reasoning, it is generally slower for everyday tasks and has limited capabilities in retrieving external data. Here are a few of the common actions that are not supported:"}),(0,s.jsxs)("ul",{className:"border rounded-2",children:[(0,s.jsx)("h3",{className:tX.header,children:"Not supported"}),(0,s.jsxs)("li",{className:tX.row,children:[(0,s.jsx)(W.BookIcon,{className:tX.rowIcon})," Using knowledge bases"]}),(0,s.jsxs)("li",{className:tX.row,children:[(0,s.jsx)(W.IssueOpenedIcon,{className:tX.rowIcon})," Retrieving issues"]}),(0,s.jsxs)("li",{className:tX.row,children:[(0,s.jsx)(W.GitPullRequestIcon,{className:tX.rowIcon})," Retrieving pull requests"]}),(0,s.jsxs)("li",{className:tX.row,children:[(0,s.jsx)(W.CommentDiscussionIcon,{className:tX.rowIcon})," Retrieving discussions"]})]})]})})]}):null}try{tQ.displayName||(tQ.displayName="PreviewModelCapabilityWarning")}catch{}let tJ={shareButton:"ShareConversationButton-module__shareButton--_CML9"},tY=()=>{let{isWaitingOnCopilot:e,messages:t}=(0,m.Pk)(),[n,a]=(0,v.useState)(!1),i=(0,d.Q7)(t),r=i.length>0||e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(H.K,{icon:W.ShareAndroidIcon,"aria-label":i.length>0?"Disabled for Copilot extentions":e?"Copilot is responding\u2026":"Share conversation",className:tJ.shareButton,onClick:()=>{r||(a(!0),(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_OPEN",mode:"immersive"}))},inactive:r}),n&&(0,s.jsx)(tF,{closeDialog:()=>{a(!1),(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"})}})]})};try{tY.displayName||(tY.displayName="ShareConversationButton")}catch{}function tZ({closeDialog:e,customCopilotId:t}){let[n,a]=(0,v.useState)(!1),i=L.fV.origin,r=t?`${i}${d.VR}/${t}/share`:`${i}/copilot`;return(0,s.jsx)(tM.l,{title:"Share space",onClose:e,width:"large",children:(0,s.jsxs)(tT.B,{gap:"condensed",children:[(0,s.jsxs)(tT.B,{direction:"horizontal",gap:"condensed",align:"start",children:[(0,s.jsx)(W.InfoIcon,{size:20,className:tW.infoIcon})," This space may contain private content. Viewers must have have access to all referenced content."]}),(0,s.jsxs)(tT.B,{direction:"horizontal",gap:"condensed",align:"start",children:[(0,s.jsx)(tD.A,{className:"flex-1",readOnly:!0,value:r,placeholder:r}),n?(0,s.jsxs)(eU.Q,{sx:{color:"var(--fgColor-success)"},children:[(0,s.jsx)(W.CheckIcon,{})," Copied!"]}):(0,s.jsx)(eU.Q,{leadingVisual:W.CopyIcon,onClick:()=>{(0,t$.D)(r),a(!0)},children:"Copy link"})]})]})})}try{tZ.displayName||(tZ.displayName="ShareCopilotSpaceDialog")}catch{}var t0=n(40961);let t1="DependabotIcon",t2="blue",t5={BeakerIcon:W.BeakerIcon,BookIcon:W.BookIcon,BroadcastIcon:W.BroadcastIcon,CloudIcon:W.CloudIcon,CodeIcon:W.CodeIcon,DatabaseIcon:W.DatabaseIcon,DependabotIcon:W.DependabotIcon,HubotIcon:W.HubotIcon,OrganizationIcon:W.OrganizationIcon,ProjectRoadmapIcon:W.ProjectRoadmapIcon,TelescopeIcon:W.TelescopeIcon,TerminalIcon:W.TerminalIcon},t3=Object.keys(t5),t4=["auburn","blue","brown","coral","cyan","gray","green","indigo","lemon","lime","olive","orange","pine","pink","plum","purple","red","teal","yellow"],t6=e=>t4.find(t=>t===e)??t2;var t7=n(11499),t8=n(51856);let t9={container:"SpacesAvatar-module__container--zJJUl",auburn:"SpacesAvatar-module__auburn--CIKFA",blue:"SpacesAvatar-module__blue--csQQ0",brown:"SpacesAvatar-module__brown--n04yP",coral:"SpacesAvatar-module__coral--_ML4p",cyan:"SpacesAvatar-module__cyan--o0MwN",gray:"SpacesAvatar-module__gray--vvb1W",green:"SpacesAvatar-module__green--Ro4IV",indigo:"SpacesAvatar-module__indigo--_0T4q",lemon:"SpacesAvatar-module__lemon--gsHE8",lime:"SpacesAvatar-module__lime--vRdDX",olive:"SpacesAvatar-module__olive--G1neu",orange:"SpacesAvatar-module__orange--FmpCu",pine:"SpacesAvatar-module__pine--jFhFP",pink:"SpacesAvatar-module__pink--vHHwu",plum:"SpacesAvatar-module__plum--M6SF6",purple:"SpacesAvatar-module__purple--_4Sak",red:"SpacesAvatar-module__red--IUpfe",teal:"SpacesAvatar-module__teal--q0AMo",yellow:"SpacesAvatar-module__yellow--DdvtA"},ne={auburn:t9.auburn,blue:t9.blue,brown:t9.brown,coral:t9.coral,cyan:t9.cyan,gray:t9.gray,green:t9.green,indigo:t9.indigo,lemon:t9.lemon,lime:t9.lime,olive:t9.olive,orange:t9.orange,pine:t9.pine,pink:t9.pink,plum:t9.plum,purple:t9.purple,red:t9.red,teal:t9.teal,yellow:t9.yellow};function nt({icon:e,color:t}){let{SpaceIcon:n,spaceColor:a}=(0,v.useMemo)(()=>({SpaceIcon:e&&e in t5!=!1?t5[e]:t5[t1],spaceColor:t6(t)}),[e,t]);return(0,s.jsx)("div",{className:(0,T.$)(t9.container,ne[a]),children:(0,s.jsx)(n,{})})}try{nt.displayName||(nt.displayName="SpacesAvatar")}catch{}let nn={avatarContainer:"SpacesFormDialog-module__avatarContainer--mWqaR",avatarContainerButton:"SpacesFormDialog-module__avatarContainerButton--SKRWC"};function na(){return{icon:t3[Math.floor(Math.random()*t3.length)],color:t4[Math.floor(Math.random()*t4.length)]}}function ni({onClose:e,copilotSpace:t}){let[n,a]=(0,v.useState)(!1),i=(0,E.b)(),[r,o]=(0,v.useState)(t?.name??""),[l,c]=(0,v.useState)(t?.description??""),[d,u]=(0,v.useState)({}),[m,p]=(0,v.useState)(()=>t?{icon:t.iconType??t1,color:t.iconColor??t2}:na()),h=async()=>{if(n)return;a(!0);let o={custom_copilot:{name:r,description:l,icon_type:m.icon,icon_color:m.color}};try{let n;if(t?n=await (0,e3.lS)(`/custom_copilots/${t.id}`,{method:"PUT",body:o}):(n=await (0,e3.lS)("/custom_copilots",{method:"POST",body:o}),await i.fetchCustomCopilots()),n.ok){let t=await n.json();i.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t}),e()}else{let e=await n.json();u(e.errorMessages)}}catch{u({base:"An error occurred while creating your space"})}finally{a(!1)}},f=e=>{e?.preventDefault(),h()},g=!!t;return(0,s.jsx)(tM.l,{title:g?"Edit space":"Create new space",onClose:e,width:"large",footerButtons:[{buttonType:"default",content:"Cancel",onClick:e},{buttonType:"primary",content:g?"Save":"Create",onClick:()=>void h(),loading:n,loadingAnnouncement:g?"Saving space":"Creating space"}],children:(0,s.jsx)(t7.tL,{commands:{"github:submit-form":()=>f()},children:(0,s.jsx)("form",{onSubmit:f,children:(0,s.jsxs)(tT.B,{children:[(0,s.jsxs)(tT.B,{direction:"horizontal",align:"end",children:[(0,s.jsxs)(tB.A,{className:"flex-auto",children:[(0,s.jsx)(tB.A.Label,{required:!0,children:"Name"}),(0,s.jsx)(tD.A,{block:!0,name:"space name",value:r,placeholder:"Enter name",onChange:e=>{o(e.target.value),u(e=>({...e,name:void 0}))}}),d.name&&(0,s.jsx)(tB.A.Validation,{variant:"error",children:(0,s.jsx)("span",{children:d.name})})]}),(0,s.jsxs)("div",{className:nn.avatarContainer,children:[(0,s.jsx)(nt,{...m}),(0,s.jsx)(H.K,{icon:W.ArrowSwitchIcon,size:"medium",variant:"default",onClick:()=>p(na()),"aria-labelledby":"Change avatar",className:nn.avatarContainerButton})]})]}),(0,s.jsxs)(tB.A,{children:[(0,s.jsx)(tB.A.Label,{children:"Description"}),(0,s.jsx)(t8.Ay,{block:!0,rows:3,name:"description","aria-label":"Description",value:l,placeholder:"Define preferences, behaviors, and output formats",onChange:e=>{c(e.target.value),u(e=>({...e,description:void 0}))}}),d.description&&(0,s.jsx)(tB.A.Validation,{variant:"error",children:(0,s.jsx)("span",{children:d.description})})]})]})})})})}try{ni.displayName||(ni.displayName="SpacesFormDialog")}catch{}function nr({onDelete:e,copilot:t}){let[n,a]=(0,v.useState)(null),[i,r]=(0,v.useState)(!1),o=(0,v.useRef)(null),[l,c]=(0,v.useState)(!1),d=()=>{(0,t0.flushSync)(()=>a(null)),o.current?.focus()},u=async e=>{d(),r(!0),await e(),r(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(z.W,{anchorRef:o,children:[(0,s.jsx)(z.W.Anchor,{children:(0,s.jsx)(H.K,{loading:i,icon:W.KebabHorizontalIcon,"aria-label":"Manage Copilot Space",variant:"invisible",onClick:()=>(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU",mode:"immersive"})})}),(0,s.jsx)(z.W.Overlay,{children:(0,s.jsxs)(G.l,{children:[(0,s.jsxs)(G.l.Item,{onSelect:()=>{(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),c(!0)},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.PencilIcon,{})}),"Edit"]}),(0,s.jsxs)(G.l.Item,{onSelect:()=>{(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),a("share")},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.ShareIcon,{})}),"Share"]}),(0,s.jsxs)(G.l.Item,{variant:"danger",onSelect:()=>{(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),a("delete")},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.TrashIcon,{})}),"Delete"]})]})})]}),"delete"===n?(0,s.jsx)(no,{onCancel:d,onConfirm:()=>{(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_LIST_ACTION_DELETE",mode:"immersive"}),u(e)}}):null,"share"===n?(0,s.jsx)(tZ,{closeDialog:()=>{(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),d()},customCopilotId:t.id}):null,l&&(0,s.jsx)(ni,{copilotSpace:t,onClose:()=>{c(!1)}})]})}let no=({onConfirm:e,onCancel:t})=>(0,s.jsx)(tR.K,{title:"Delete space",onClose:n=>{"confirm"===n?((0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CONFIRM",mode:"immersive"}),e()):((0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CANCEL",mode:"immersive"}),t())},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this space? This action cannot be undone."});try{nr.displayName||(nr.displayName="CopilotSpacesMenu")}catch{}try{no.displayName||(no.displayName="DeleteDialog")}catch{}let ns={dialog:"SystemPromptDialog-module__dialog--DZtq2",content:"SystemPromptDialog-module__content--OeMCM",description:"SystemPromptDialog-module__description--eb7_P",textareaContainer:"SystemPromptDialog-module__textareaContainer--MN8c4",textarea:"SystemPromptDialog-module__textarea--MK1JE"},nl=(0,v.forwardRef)(function(e,t){let n=(0,E.b)(),[a,i]=(0,v.useState)(!1),[r,o]=(0,v.useState)(void 0);return(0,v.useImperativeHandle)(t,()=>({openDialog:()=>i(!0)})),(0,v.useEffect)(()=>{(async()=>{o(await n.getSystemPrompt())})()},[n]),(0,s.jsx)(s.Fragment,{children:a&&(0,s.jsx)(tM.l,{onClose:()=>{i(!1),(0,y.BI)("dotcom_chat.activate",{target:"SYSTEM_PROMPT_DIALOG_CLOSE",mode:"immersive"})},title:"System prompt",renderBody:()=>(0,s.jsxs)("div",{className:ns.content,children:[(0,s.jsxs)("p",{className:ns.description,children:["The system prompt for"," ",(0,s.jsx)(em.A,{muted:!0,inline:!0,href:"https://github.com/copilot",children:"GitHub Copilot"})," ","is a set of instructions that guides the LLM to provide enhanced functionality and output quality based on user input."]}),(0,s.jsx)("div",{className:ns.textareaContainer,children:(0,s.jsx)("textarea",{className:ns.textarea,readOnly:!0,children:r})})]}),className:ns.dialog})})});try{nl.displayName||(nl.displayName="SystemPromptDialog")}catch{}function nc({showModelPicker:e=!0,showPreviewPaneButton:t=!0,conversationSpecificItems:n}){let a=(0,E.b)(),{currentTopic:i,repoCustomInstructionsEnabled:r,selectedThreadID:o,customCopilots:l,customCopilotId:c,messagesLoading:p}=(0,m.Pk)(),h=(0,m.pn)(e=>(0,d.CB)(a.getSelectedThread(e)));(0,tw.D)(`${h} \xb7 GitHub Copilot`);let g=(0,v.useRef)(null),_=(0,v.useRef)(null),C=(0,d.Z6)(i)?i:void 0,j=tO(),N=(0,v.useMemo)(()=>(0,tE.X)(),[]),b=(0,eK.G7)("copilot_staff_prompt_dialog")&&N,I=(0,eD.u)("copilot_immersive_view_system_prompt"),[k,P]=(0,v.useState)(!1),[O,R]=(0,v.useState)(!1),B=(0,v.useRef)(null),D=!!w.J.settings?.instructionPrompt,{isLicensedLimited:M}=(0,S.x)(),U=u.W.repoCustomInstructions||u.W.repoCustomInstructionsPreview,{previewPaneOpen:$,openPreviewPane:V}=(0,x.xx)(),F=(0,v.useRef)(null),[K,q]=(0,v.useState)(null),X=U&&C?.customInstructions,[Q,J,Y]=(0,tL.B)(!1),Z=A(),{canShareThread:ee}=(0,f.X)(),et="loaded"===p.state,en=(0,tk.Z)(),ea=L.fV?.pathname?.startsWith(d.VR),ei=l?.find(e=>e.id===c),[er,eo]=(0,v.useState)(!1),[es,el]=(0,v.useState)(!1),[ec,ed]=(0,v.useState)(!1),eu=async()=>{ei&&(en(d.VR),await a.deleteCopilotSpace(ei))},em=ei&&L.fV?.pathname!==d.VR;return(0,s.jsxs)("div",{className:tq.header,children:[(0,s.jsx)("div",{className:tq.centerControls,children:e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tb.Y,{onNewThreadSelected:j,limited:M}),(0,s.jsx)(tQ,{})]})}),(0,s.jsxs)("div",{className:tq.rightControls,children:[ee&&!Z&&o&&et&&(0,s.jsx)(tY,{}),(0,s.jsxs)(tT.B,{direction:"horizontal",gap:"condensed",children:[(0,s.jsxs)(z.W,{children:[(0,s.jsx)(z.W.Anchor,{children:(0,s.jsx)(H.K,{icon:W.KebabHorizontalIcon,"aria-label":"Menu",onClick:()=>(0,y.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"}),className:(0,T.$)(D&&tq.editedPromptIndicator),ref:F,loading:Q})}),(0,s.jsx)(z.W.Overlay,{width:"small",children:(0,s.jsxs)(G.l,{children:[o&&(n||(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(G.l.Group,{children:[(0,s.jsx)(G.l.GroupHeading,{children:"Conversation"}),(0,s.jsx)(tz,{onOpenDialog:q,showShare:!1})]}),(0,s.jsx)(G.l.Divider,{})]})),em&&!o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(G.l.Group,{children:[(0,s.jsx)(G.l.GroupHeading,{children:"Space"}),(0,s.jsxs)(G.l.Item,{onSelect:()=>{(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),ed(!0)},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.PencilIcon,{})}),"Edit"]}),(0,s.jsxs)(G.l.Item,{onSelect:()=>{(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),el(!0)},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.ShareIcon,{})}),"Share"]}),ea&&(0,s.jsxs)(G.l.Item,{variant:"danger",onSelect:()=>{(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),eo(!0)},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.TrashIcon,{})}),"Delete"]})]}),(0,s.jsx)(G.l.Divider,{})]}):null,(0,s.jsxs)(G.l.Group,{children:[(0,s.jsx)(G.l.GroupHeading,{children:"Prompt"}),X&&(0,s.jsxs)(G.l.Item,{onSelect:()=>{a.toggleRepoCustomInstructions(!r)},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.RepoIcon,{})}),r?"Disable custom instructions":"Enable custom instructions"]}),(0,s.jsxs)(G.l.Item,{onSelect:()=>{R(!0),(0,y.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.NoteIcon,{})}),"Personal instructions"]}),I&&(0,s.jsxs)(G.l.Item,{onSelect:()=>{_.current?.openDialog(),(0,y.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SYSTEM_PROMPT",mode:"immersive"})},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.CpuIcon,{})}),"System prompt"]}),b&&(0,s.jsxs)(G.l.Item,{onSelect:()=>P(!0),children:[(0,s.jsx)(G.l.LeadingVisual,{children:D?(0,s.jsx)("span",{className:(0,T.$)(tq.editedPromptIndicator,tq.leadingVisual),children:(0,s.jsx)(W.BeakerIcon,{})}):(0,s.jsx)(W.BeakerIcon,{})}),"Edit prompt",(0,s.jsx)(G.l.TrailingVisual,{children:(0,s.jsx)(tP.A,{variant:"attention",children:"Staff"})})]})]}),(0,s.jsx)(G.l.Divider,{}),(0,s.jsxs)(G.l.Group,{children:[(0,s.jsxs)(G.l.Item,{onSelect:()=>{g.current?.openDialog(),(0,y.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:["Give feedback",(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.CommentIcon,{})})]}),(0,s.jsxs)(G.l.LinkItem,{href:"/settings/copilot",onClick:()=>(0,y.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"}),children:["Settings",(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.GearIcon,{})})]})]})]})})]}),t&&!$&&!em&&(0,s.jsx)(H.K,{icon:W.SidebarExpandIcon,"aria-label":"Open workbench",onClick:()=>{(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),V()}}),(0,s.jsx)(nl,{ref:_}),(0,s.jsx)(tN.l,{ref:g,mode:"immersive"}),o&&(0,s.jsx)(tH,{visibleDialog:K,onClose:()=>{(0,tA.flushSync)(()=>q(null)),F.current?.focus()},threadName:h,threadId:o,selectedThreadId:o,onStartLoading:J,onFinishLoading:Y})]})]}),k&&(0,s.jsx)(tS.X,{promptDialogRef:B,onDismiss:()=>P(!1)}),O&&(0,s.jsx)(tI.Y,{onDismiss:()=>R(!1)}),er&&ei?(0,s.jsx)(no,{onCancel:()=>{(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DELETE_DIALOG_CLOSE",mode:"immersive"}),eo(!1)},onConfirm:eu}):null,es&&ei?(0,s.jsx)(tZ,{closeDialog:()=>{(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),el(!1)},customCopilotId:ei.id}):null,ec&&ei?(0,s.jsx)(ni,{copilotSpace:ei,onClose:()=>{ed(!1),F.current?.focus()}}):null]})}try{nc.displayName||(nc.displayName="Header")}catch{}var nd=n(56056),nu=n(26871),nm=n(89401),np=n(2120),nh=n(93589),nf=n(38568),ng=n(72659),nv=n(66349),nx=n(72160),n_=n(67264),ny=n(61982),nC=n(47920),nj=n(32132);let nN=({functionCall:e,manager:t,panelWidth:n,messageInterrupted:a})=>{let{functionMetadata:i,functionRenderer:r,parsedArgs:o}=(0,nj.BO)(e),l=(0,v.useMemo)(()=>a&&"started"===e.status?{...e,status:"error"}:e,[e,a]);return(0,s.jsx)(s.Fragment,{children:i&&r&&o&&r(l,i,t,n,o,!1)})};try{nN.displayName||(nN.displayName="FunctionCallBadge")}catch{}var nb=n(79887),nI=n(82005),nS=n(73786),nw=n(4181),nE=n(50260),nk=n(89151),nT=n(53914),nP=n(27297),nA=n(15294),nL=n(34407),nO=n(53949),nR=n(1088);let nB={imageAttachment:"ChatImageAttachment-module__imageAttachment--YlPWs"},nD=({messageId:e,src:t,alt:n,name:a})=>{let{openPreviewPane:i,openItem:r,updateItem:o}=(0,x.xx)(),l=`image:${e}`,c=(0,v.useCallback)(e=>{e.metaKey||e.ctrlKey||((0,y.BI)("dotcom_chat.activate",{target:"BROWSER_IMAGE_OPENED",mode:"immersive"}),r(l),i(),e.preventDefault())},[l,i,r]);return(0,v.useEffect)(()=>{o({altText:n,id:l,messageId:e,name:a,type:"image",url:t})},[l,n,e,a,t,o]),(0,s.jsx)("div",{className:nB.imageAttachment,children:(0,s.jsx)(nR.o,{src:t,alt:n,onClick:c,useOverlay:!0})})},nM=(0,v.memo)(nD);try{nD.displayName||(nD.displayName="ChatImageAttachmentUnmemoized")}catch{}try{nM.displayName||(nM.displayName="ChatImageAttachment")}catch{}let nU={chatMessage:"ChatMessage-module__chatMessage--rtt38",user:"ChatMessage-module__user--UoWHh",editing:"ChatMessage-module__editing--BMp49",content:"ChatMessage-module__content--MYneF",references:"ChatMessage-module__references--Kunt2",messageArea:"ChatMessage-module__messageArea--CoOmf",userMessage:"ChatMessage-module__userMessage--xvIFp",messageSubthreadIndicator:"ChatMessage-module__messageSubthreadIndicator--DJyyk",actions:"ChatMessage-module__actions--Jllb6",ai:"ChatMessage-module__ai--WrCO3",latest:"ChatMessage-module__latest--IZwZP",actionsPlaceholder:"ChatMessage-module__actionsPlaceholder--MCwTL",avatar:"ChatMessage-module__avatar--KYI8V",sharedThreadActions:"ChatMessage-module__sharedThreadActions--Z9ffu ChatMessage-module__actions--Jllb6",sharedMessageCheckpoint:"ChatMessage-module__sharedMessageCheckpoint--eublt",icon:"ChatMessage-module__icon--UUMMx",skillExecutionText:"ChatMessage-module__skillExecutionText--pIBPI"};function n$({className:e,messageID:t,messageTimestamp:n,references:a,size:i}){let{openPreviewPane:r,openItem:o,updateItem:l}=(0,x.xx)(),c=(0,v.useCallback)((e,a)=>{let i;"file"===a.type&&(i=(0,er.by)(a,t,n),e.preventDefault(),l(i),o(i.id),r())},[t,n,r,o,l]);return(0,s.jsx)(nv.t2,{references:a,onClickReference:c,size:i,className:e,align:"right"})}try{n$.displayName||(n$.displayName="ChatMessageReferences")}catch{}let nV={container:"ChatPagingComponent-module__container--nH9hp",disabledButton:"ChatPagingComponent-module__disabledButton--hCGPC",pageIndicator:"ChatPagingComponent-module__pageIndicator--HoVKG"};function nW({currentPage:e,totalPages:t,onPrev:n,onNext:a,isUserMessage:i,disabled:r=!1}){if(e<1)throw Error("currentPage must be greater than or equal to 1");if(t<1)throw Error("totalPages must be greater than or equal to 1");if(e>t)throw Error("currentPage must be less than or equal to totalPages");let o=1===e,l=e===t,c=o?nV.disabledButton:"",d=l?nV.disabledButton:"";return(0,s.jsxs)("div",{className:nV.container,"data-testid":"chat-paging-component",children:[(0,s.jsx)(H.K,{variant:"invisible","aria-label":"Previous Response",onClick:()=>{(0,y.BI)("dotcom_chat.activate",{target:i?"USER_MESSAGE_ACTION_PREVIOUS_RESPONSE":"RESPONSE_ACTION_PREVIOUS_RESPONSE",mode:"immersive"}),n(e-1)},icon:W.ChevronLeftIcon,disabled:o||r,className:c}),(0,s.jsxs)("span",{className:nV.pageIndicator,children:[e,"/",t]}),(0,s.jsx)(H.K,{variant:"invisible","aria-label":"Next Response",onClick:()=>{(0,y.BI)("dotcom_chat.activate",{target:i?"USER_MESSAGE_ACTION_NEXT_RESPONSE":"RESPONSE_ACTION_NEXT_RESPONSE",mode:"immersive"}),a(e+1)},icon:W.ChevronRightIcon,disabled:l||r,className:d})]})}try{nW.displayName||(nW.displayName="ChatPagingComponent")}catch{}var nF=n(84217);let nz={container:"CreateIssueConfirmation-module__container--ii5bh"},nH=(0,v.createContext)(null),nG=()=>{let e=(0,v.useContext)(nH);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{nH.displayName||(nH.displayName="ContentPreviewBlockContext")}catch{}var nK=n(19919),nq=n(47970);function nX(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"none",viewBox:"0 0 14 14",role:"presentation",children:(0,s.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.672 5.342a.8.8 0 0 0 .05-.295V.805a.75.75 0 0 0-.75-.75H8.73a.75.75 0 0 0 0 1.5h2.433L8.138 4.577A.75.75 0 0 0 9.2 5.638l3.024-3.023v2.432a.75.75 0 0 0 1.45.295M.328 8.657a.8.8 0 0 0-.05.295v4.243a.75.75 0 0 0 .75.75h4.243a.75.75 0 0 0 0-1.5H2.838l3.024-3.023A.75.75 0 1 0 4.8 8.362l-3.024 3.023V8.952a.75.75 0 0 0-1.45-.295",clipRule:"evenodd"})})}try{nX.displayName||(nX.displayName="ExpandIcon")}catch{}let nQ={container:"FileBlock-module__container--zWu5c",header:"FileBlock-module__header--X7DLN",language:"FileBlock-module__language--fbEB2",name:"FileBlock-module__name--rkkGx",previewCode:"FileBlock-module__previewCode--EieE9",isClipped:"FileBlock-module__isClipped--Z6AMg"};function nJ({language:e,name:t,code:n,line:a,children:i,isClipped:r,isStreaming:o,index:l}){let{updateItem:c,openItem:d,openPreviewPane:u,versionedItems:m,openItems:p}=(0,x.xx)(),{messageIndex:h,messageId:f,messageTimestamp:g,autoOpenPreviewPane:_,markdown:C,hasAutoOpenedPreviewPaneRef:j}=nG(),{name:N}=(0,e$.v)(e),b=`file:${t}`,I=`${b}#${h}.${a}`,S=!!n,w=m.get(b)??[],E=w.indexOf(I),k=w.length>1&&-1!==E?E+1:null,P=(0,v.useCallback)((e,t=!0)=>{(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive"}),d(I,t||p.length<1||0===l),e&&u()},[d,I,p.length,l,u]);return(0,v.useEffect)(()=>{let a=n?.replace(RegExp(` ${nA.IJ}?$`),"");S&&f!==M.Wp&&-1!==C.indexOf(a)&&c({messageId:f,id:I,language:e,name:t,value:n,type:"file",timestamp:new Date(g),isStreaming:o,isUserEdited:!1})},[n,e,f,t,c,I,S,g,o,C]),(0,v.useEffect)(()=>{o&&S&&f!==M.Wp&&(P(_&&!j.current,!1),j.current=!0)},[o,S,P,_,f,j]),(0,s.jsxs)("button",{className:nQ.container,onClick:()=>P(!0),"aria-label":`View file: ${t}`,"data-testid":`chat-message-view-file-${t}`,children:[(0,s.jsxs)("div",{className:nQ.header,children:[(0,s.jsxs)("div",{className:nQ.language,children:[o?(0,s.jsx)(e4.A,{size:"small",className:nA.sX}):e$.Y.has(N)?(0,s.jsx)(W.MarkdownIcon,{className:nA.sX}):(0,s.jsx)(W.CodeIcon,{className:nA.sX}),(0,s.jsx)("span",{className:nQ.name,children:t}),null!==k&&(0,s.jsx)(eP,{version:k})]}),(0,s.jsx)(nX,{})]}),(0,s.jsx)("pre",{className:(0,T.$)(nQ.previewCode,r&&nQ.isClipped),"aria-hidden":!0,children:(0,s.jsx)("code",{children:i})})]})}try{nJ.displayName||(nJ.displayName="FileBlock")}catch{}let nY="data-fileblock-props",nZ=(0,nK.F)(nY),n0=RegExp("^name=(?<name>[^\\s]+)"),n1=RegExp("^name=(?<name>[^\\s]+)\\n?"),n2={code:(e,t)=>{let n=(0,nK.k)(e,nY);return n?(0,s.jsx)(nJ,{...n,children:e.children}):t}},n5=(RegExp("^(?<lang>[^\\s]+)\\s+type=(?<type>[^\\s]+)"),RegExp("^(?:`{3,}|~{3,})+(?<lang>[^\\s]+)\\ntype=(?<type>[^\\s]+)"),RegExp("^type=(?<type>[^\\s]+)\\n?")),n3=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e;var n4=n(57210);let n6="data-create-issue-block",n7={fromUnknown:e=>{if("object"!=typeof e||null===e)return{};let t={};return"title"in e&&"string"==typeof e.title&&(t.title=e.title),"body"in e&&"string"==typeof e.body&&(t.body=e.body),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"assignees"in e&&Array.isArray(e.assignees)&&(t.assignees=e.assignees.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"type"in e&&"string"==typeof e.type&&(t.type=e.type),"projects"in e&&Array.isArray(e.projects)&&(t.projects=e.projects.filter(e=>"string"==typeof e)),t}},n8=e=>{try{let t=(0,n4.load)(e);if("object"==typeof t&&null!==t)return n7.fromUnknown(t);return null}catch{return null}};function n9({children:e}){let[t,n]=(0,v.useState)(()=>n8(e)??{});(0,v.useEffect)(()=>n(t=>n8(e)??t),[e]);let{updateItem:a,openItem:i,openPreviewPane:r}=(0,x.xx)(),{messageId:o}=nG();(0,v.useEffect)(()=>(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_CREATE_BLOCK_RENDERED",mode:"immersive"}),[]);let l=`issue:${t.repository??""}`,[c,d]=t.repository?.split("/")??[];return(0,v.useEffect)(()=>{c&&d&&a({messageId:o,name:t.title||"",body:t.body,owner:c,repo:d,id:l,type:"new-issue"})},[l,t.body,t.repository,t.title,o,c,d,a]),(0,s.jsx)(em.A,{href:"#",onClick:e=>{e.metaKey||e.ctrlKey||(i(l),r(),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_CREATE_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},target:"_blank",rel:"noreferrer",children:t.title})}try{n9.displayName||(n9.displayName="CreateIssueBlock")}catch{}let ae=(0,nK.F)(n6),at={div:(e,t)=>n6 in e&&"string"==typeof e[n6]?(0,v.createElement)(n9,{},e[n6]):t};var an=n(72534);function aa({owner:e,repo:t,issueNumber:n,href:a,children:i}){let{updateItem:r,openItem:o,openPreviewPane:l}=(0,x.xx)(),{messageId:c}=nG(),d=Number(n),u=function(e,t,n,a,i){let r=`Issue #${i}`;if(!n||!a||!i||isNaN(i))return r;let o=e.find(e=>e.id===t),s=o?.references,l=s?.find(e=>"issue"===e.type&&e.number===i&&e.repository.name===a&&e.repository.owner===n),c=l?.title;if(c)return c;let d=s?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${n}/${a}`&&e.data.number===i),u=d?.data;return u?.title??r}((0,m.A3)("messages"),c,e,t,d),p=`issue:${e}/${t}/${d}`;return(0,v.useEffect)(()=>{e&&t&&r({messageId:c,name:u,number:d,owner:e,repo:t,id:p,type:"issue"})},[p,c,d,e,t,u,r]),(0,s.jsx)(em.A,{href:a,onClick:e=>{e.metaKey||e.ctrlKey||(o(p),l(),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},target:"_blank",rel:"noreferrer",children:i})}try{aa.displayName||(aa.displayName="IssueLinkBlock")}catch{}let ai="data-issuelink-props",ar=(0,nK.F)(ai),ao=RegExp("\\/(?<owner>[^/]+)\\/(?<repo>[^/]+)\\/issues\\/(?<number>\\d+)"),as={span:(e,t)=>{let n=(0,nK.k)(e,ai);return n?(0,s.jsx)(aa,{...n}):t}};var al=n(62456),ac=n(89169),ad=n(46008);let au={list:"IssueListBlock-module__list--GM7vt",streaming:"IssueListBlock-module__streaming--HSaKx",item:"IssueListBlock-module__item--Z3Nv7",link:"IssueListBlock-module__link--xHV6N",content:"IssueListBlock-module__content--kXyl1",metadata:"IssueListBlock-module__metadata--fIv1v",header:"IssueListBlock-module__header--tb2Am",title:"IssueListBlock-module__title--KvqP1",unknownTitle:"IssueListBlock-module__unknownTitle--tj7iM",number:"IssueListBlock-module__number--FIbRR",labels:"IssueListBlock-module__labels--ergn3",labelIcon:"IssueListBlock-module__labelIcon--AdciQ",description:"IssueListBlock-module__description--FVdIE",icon:"IssueListBlock-module__icon--KVpem",open:"IssueListBlock-module__open--yTQ0j",draft:"IssueListBlock-module__draft--FrF8w",done:"IssueListBlock-module__done--SRM4P",closed:"IssueListBlock-module__closed--jfPZH",unassignedAvatar:"IssueListBlock-module__unassignedAvatar--SawNd"},am={fromUnknown:e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),t}};function ap({item:e,isStreaming:t}){let n,a;let i=e.author;e.merged_at?(n=e.merged_at,a="Merged"):e.closed_at?(n=e.closed_at,a="Closed"):e.created_at&&(n=e.created_at,a="Opened");let r=n?new Date(n):null;return r&&isNaN(r.getTime())&&(r=null),i&&r||!t?(0,s.jsxs)("span",{className:au.description,children:[i," ",i?a?.toLowerCase():a," ",r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ac.A,{date:r,format:"micro"})," ago"]})]}):null}let ah=e=>{try{let t=(0,n4.load)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(am.fromUnknown);return null}catch{return null}};function af({data:e,type:t,isStreaming:n}){let[a,i]=(0,v.useState)(()=>ah(e)??[]),{updateItem:r,openItem:o,openPreviewPane:l}=(0,x.xx)(),{messageId:c}=nG();return(0,v.useEffect)(()=>i(t=>ah(e)??t),[e]),(0,v.useEffect)(()=>{"issue"===t?(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):(0,y.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"})},[t]),(0,s.jsx)("ul",{className:(0,T.$)(au.list,n&&au.streaming),children:a.map((e,i)=>{let d={...e,type:t},u=n&&i===a.length-1,{icon:m,colorClass:p}=function(e){let t,n=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(n=(0,s.jsx)(W.IssueDraftIcon,{"aria-label":"Draft issue"}),t=au.draft):"closed"===e.state&&e.draft&&(n=(0,s.jsx)(W.SkipIcon,{"aria-label":"Closed draft issue"}),t=au.draft):(n=(0,s.jsx)(W.IssueClosedIcon,{"aria-label":"Closed issue"}),t=au.done):(n=(0,s.jsx)(W.IssueOpenedIcon,{"aria-label":"Open issue"}),t=au.open);else if("pr"===e.type){let a="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!a&&e.draft?(n=(0,s.jsx)(W.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),t=au.draft):"open"!==e.state||a||e.draft?"closed"!==e.state||a?"closed"===e.state&&a&&(n=(0,s.jsx)(W.GitMergeIcon,{"aria-label":"Merged pull request"}),t=au.done):(n=(0,s.jsx)(W.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),t=au.closed):(n=(0,s.jsx)(W.GitPullRequestIcon,{"aria-label":"Pull request"}),t=au.open)}return{icon:n,colorClass:t}}(d);return(0,s.jsx)("li",{className:au.item,children:(0,s.jsxs)("div",{className:au.content,children:[(0,s.jsx)("div",{className:(0,T.$)(p,au.icon),children:m}),(0,s.jsxs)("div",{className:au.header,children:[u&&!d.title?null:(0,s.jsx)("a",{href:d.url??"#",className:au.link,onClick:e=>{if(!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),d.url)){if("issue"===d.type){(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:e,repo:t,number:n}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let n=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:n}}(d.url);if(e&&t&&n){let a=`issue:${e}/${t}/${n}`;r({messageId:c,name:d.title??`Issue #${n}`,number:n,owner:e,repo:t,id:a,type:"issue"}),o(a),l()}}else(0,y.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(d.url,"_self")}},target:"_blank",rel:"noreferrer",children:d.title||void 0===d.number?(0,s.jsxs)(s.Fragment,{children:[d.title?(0,s.jsx)("span",{className:au.title,children:d.title}):(0,s.jsx)("span",{className:(0,T.$)(au.title,au.unknownTitle),children:"Unknown issue"}),void 0!==d.number&&(0,s.jsxs)("span",{className:au.number,children:["#",d.number]})]}):(0,s.jsxs)("span",{className:au.title,children:["#",d.number]})}),(0,s.jsxs)("div",{className:au.labels,children:[d.labels?.length?d.labels.map(e=>(0,s.jsx)(tP.A,{size:"small",variant:"secondary",children:e},e)):null,0!==d.comments&&void 0!==d.comments&&(0,s.jsxs)(tP.A,{size:"small",variant:"secondary",children:[(0,s.jsx)(W.CommentIcon,{className:au.labelIcon,size:12}),d.comments]})]})]}),(0,s.jsx)(ap,{item:d,isStreaming:u}),(0,s.jsx)("div",{className:au.metadata,children:void 0===d.assignees_avatar_urls?null:0===d.assignees_avatar_urls.length?(0,s.jsx)("div",{className:au.unassignedAvatar,role:"img","aria-label":"Unassigned",children:(0,s.jsx)(W.PersonIcon,{size:12})}):(0,s.jsx)("div",{role:"img","aria-label":`${d.assignees_avatar_urls.length} ${1===d.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,s.jsx)(ad.A,{disableExpand:!0,children:d.assignees_avatar_urls.map(e=>(0,s.jsx)(al.r,{src:e,alt:"Assignee avatar"},e))})})})]})},i)})})}try{ap.displayName||(ap.displayName="Description")}catch{}try{af.displayName||(af.displayName="ListBlock")}catch{}let ag="data-issues-list-block",av=(0,nK.F)(ag),ax={div:(e,t)=>{let n=(0,nK.k)(e,ag);return n?(0,s.jsx)(af,{...n}):t}},a_=({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:a,markdown:i,...r})=>{let o=(0,v.useRef)(!1),l=(0,eD.u)("copilot_immersive_create_issue"),c=(0,v.useMemo)(()=>{let e=[...r.extensions??[],function(e){return{transformMarkdown:t=>(0,nq.YR)(t,"code",t=>{let n=t.lang??"",{name:a,code:i}=function(e,t){let n=e&&n0.exec(e);if(n)return{name:n.groups?.name,code:t};let a=n1.exec(t);return a?{name:a.groups?.name,code:t.replace(n1,"")}:{code:t}}(t.meta??void 0,t.value);if(!a)return;e.includes(a)||e.push(a);let r=i.split("\n").slice(0,5).join("\n"),o=t.position?.start.line??0;t.value=r,t.data={...t.data,hName:"code",hProperties:{[nZ]:JSON.stringify({language:n,name:a,code:i,line:o,isStreaming:t.isStreaming||i.includes(nA.IJ),isClipped:r.length<i.length,index:e.indexOf(a)})}}}),transformHtml:e=>(0,nq.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&"code"===a.tagName&&nZ in a.properties&&n.children.splice(t,1,a)}),reactComponents:n2}}([])];return u.W.immersiveIssuePreview&&(e=[...e,{transformMarkdown:e=>(0,nq.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=ao.exec(e.url);if(!t?.groups)return;let{owner:n="",repo:a="",number:i=""}=t.groups;e.data={hName:"span",hProperties:{[ar]:JSON.stringify({owner:n,repo:a,issueNumber:i,href:e.url,children:(0,an.d)(e)})}}}),reactComponents:as},{transformMarkdown:e=>(0,nq.YR)(e,"code",e=>{if("list"!==e.lang)return;let t=n3(n5.exec(e.meta??"")?.groups?.type??"");("issue"===t||"pr"===t)&&(e.data={hName:"div",hProperties:{[av]:JSON.stringify({data:e.value,type:t,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,nq.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&av in a.properties&&n.children.splice(t,1,a)}),reactComponents:ax}]),l&&(e=[...e,{transformMarkdown:e=>(0,nq.YR)(e,"code",e=>{"yaml"===e.lang&&"issue"===n3(n5.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[ae]:e.value},hChildren:[]})}),transformHtml:e=>(0,nq.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&ae in a.properties&&n.children.splice(t,1,a)}),reactComponents:at}]),e},[l,r.extensions]);return(0,s.jsx)(nH.Provider,{value:(0,v.useMemo)(()=>({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:a,markdown:i,hasAutoOpenedPreviewPaneRef:o}),[e,t,n,a,i,o]),children:(0,s.jsx)(nA.To,{...r,markdown:i,extensions:c,chatMode:"immersive"})})};try{a_.displayName||(a_.displayName="MarkdownViewer")}catch{}function ay({confirmation:e,handleConfirmation:t,message:n,messageIndex:a,isLatestMessage:i}){let r=(0,m.Pk)(),{updateItem:o,openItem:l,openPreviewPane:c,versionedItems:d}=(0,x.xx)(),u=JSON.stringify(Object.values(e.confirmation).sort()),p=r.allClientConfirmations?.includes(u),[h,f]=(0,v.useState)(p&&!i),g=n=>{f(!0),t({state:n,confirmation:e.confirmation},e.title,e.onSubmit)},_=(0,v.useMemo)(()=>JSON.parse(e.confirmation.arguments),[e.confirmation]),C=(0,v.useMemo)(()=>{let e=_.description,t=_.title;return`\`\`\`\`markdown name=confirmation.md
Title: ${t}

${e}
\`\`\`\``},[_.description,_.title]),j=`issue:${_.owner}/${_.repository}`,N=`${j}#${a}`,b=d.get(j)??[],I=b.indexOf(N),S=b.length>1&&-1!==I?I+1:null;(0,v.useEffect)(()=>{o({messageId:n.id,name:_.title||"",body:_.description,owner:_.owner,repo:_.repository,id:N,type:"new-issue"}),!h&&i&&(l(N),c())},[h,_,N,i,n.id,l,c,o,S]);let w=(0,v.useCallback)(e=>{e.metaKey||e.ctrlKey||(l(N),c(),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_CREATE_ISSUE_OPENED",mode:"immersive"}),e.preventDefault(),e.stopPropagation())},[N,c,l]),E=(0,v.useMemo)(()=>{let e=(0,s.jsx)(a_,{autoOpenPreviewPane:!0,markdown:C??"",messageId:n.id,messageIndex:a,messageTimestamp:n.createdAt});return!h&&i&&(e=(0,s.jsx)("button",{className:nz.container,onClickCapture:w,children:e})),e},[C,n.id,a,n.createdAt,h,i,w]);return(0,s.jsxs)(eS.A,{className:"border rounded-2",sx:{display:"flex",flexDirection:"column",p:3,marginTop:3},children:[(0,s.jsx)(nF.A,{as:"h3",sx:{mb:1,fontSize:1,lineHeight:"condensed"},children:e.title}),E,!h&&i&&(0,s.jsxs)(eS.A,{sx:{display:"flex",justifyContent:"flex-start",gap:2,mt:3},children:[(0,s.jsx)(eU.Q,{variant:"primary",onClick:()=>g("accepted"),children:"Allow"}),(0,s.jsx)(eU.Q,{variant:"default",onClick:w,children:"Edit"})]})]})}try{ay.displayName||(ay.displayName="CreateIssueConfirmation")}catch{}let aC={container:"TimelineEditEntry-module__container--ou7_E",fileButton:"TimelineEditEntry-module__fileButton--acSoC",undoButton:"TimelineEditEntry-module__undoButton--WqnPI"};function aj({item:e,onUndo:t}){let{openPreviewPane:n,openItem:a,versionedItems:i}=(0,x.xx)(),r=(0,er.LU)(e.id,i),o=null===r?e.name:`${e.name} - (v${r})`;return(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{children:"You\u2019ve edited "}),(0,s.jsx)(eU.Q,{className:aC.fileButton,onClick:()=>{a(e.id),n()},variant:"link",children:o}),t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:" - "}),(0,s.jsx)(eU.Q,{className:aC.undoButton,onClick:t,variant:"link",children:"Undo"})]})]})}function aN({message:e,messageIndex:t}){let{updateItem:n}=(0,x.xx)(),a=(0,v.useMemo)(()=>(e.references?.filter(e=>"thread-scoped-file"===e.type)??[]).map(n=>(0,er.fQ)(n,e.id,t,e.createdAt)),[e.createdAt,e.id,e.references,t]);return(0,v.useEffect)(()=>{for(let e of a)n(e)},[a,n]),(0,s.jsx)("div",{className:aC.container,children:a.map(e=>(0,s.jsx)(aj,{item:e},e.name))})}function ab(){let{items:e,removeItems:t}=(0,x.xx)(),n=(0,er.$Z)(e);return(0,s.jsx)("div",{className:aC.container,children:n.map(e=>(0,s.jsx)(aj,{item:e,onUndo:()=>t([e.id])},e.name))})}try{aj.displayName||(aj.displayName="TimelineEditEntry")}catch{}try{aN.displayName||(aN.displayName="TimelineEditEntriesForMessage")}catch{}try{ab.displayName||(ab.displayName="TimelineEditEntriesForCurrentEdits")}catch{}let aI={container:"UserMessageEdit-module__container--rqkMG",input:"UserMessageEdit-module__input--LbiZ1",inputContainer:"UserMessageEdit-module__inputContainer--tewB2",actions:"UserMessageEdit-module__actions--_YMp2"},aS=({messageContent:e,handleEditUserMessage:t,setEditing:n,disableSubmit:a=!1})=>{let[i,r]=(0,v.useState)(e),o=(0,v.useRef)(null);return(0,v.useEffect)(()=>{o.current&&(o.current.style.height="auto",o.current.style.height=`${o.current.scrollHeight}px`)},[i]),(0,s.jsxs)("div",{className:aI.container,...(0,nO.G)("user-message-edit-box"),children:[(0,s.jsx)("div",{className:aI.inputContainer,children:(0,s.jsx)("textarea",{ref:o,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",rows:1,value:i,onChange:e=>{r(e.target.value)},className:aI.input,autoFocus:!0,onInput:()=>{o.current&&(o.current.style.height="auto",o.current.style.height=`${o.current.scrollHeight}px`)}})}),(0,s.jsxs)("div",{className:aI.actions,children:[(0,s.jsx)(eU.Q,{onClick:()=>{n(!1),r(e),(0,y.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_CANCEL",mode:"immersive"})},children:"Cancel"}),(0,s.jsx)(eU.Q,{variant:"primary",...(0,nO.G)("user-message-edit-submit"),onClick:async()=>{n(!1),await t(i),(0,y.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_SUBMIT",mode:"immersive"})},disabled:a,children:"Send"})]})]})};try{aS.displayName||(aS.displayName="UserMessageEdit")}catch{}let aw=({excludeFeedback:e,inputRef:t,isLatestMessage:n,isFirstReply:a,isLoading:i,isStreaming:r,panelWidth:o,messageIndex:l,autoOpenPreviewPane:c})=>{let{message:p}=(0,ng.V)(),h=(0,E.b)(),f=(0,m.Pk)(),{items:g,versionedItems:_,openItem:C,removeItems:j,updateItem:N,openItems:b,openItemsBeforeSubthreadChange:I,setOpenItemsBeforeSubthreadChange:S,messagesBeforeSubthreadChange:w,setMessagesBeforeSubthreadChange:k,enableLoadingState:P,disableLoadingState:L,openPreviewPane:O,closePreviewPane:R,previewPaneOpen:B}=(0,x.xx)();(0,v.useEffect)(()=>{let e=f.currentReferences.find(e=>"figma"===e.type);if(u.W.immersiveFigmaIntegration&&e){let t={altText:e.title,type:"image",url:e.fullImageUrl,id:`image:${e.fullImageUrl}`,messageId:p.id,name:e.title};g.has(`image:${e.fullImageUrl}`)||N(t)}},[g,p.id,p.references,B,f.currentReferences,N]),(0,v.useEffect)(()=>{u.W.immersiveFigmaIntegration&&(g.size>0?O():R())},[R,g,O]);let D=(0,v.useCallback)(()=>{let e=[],t=p;for(;null!=t;)e.push(t.id),t=void 0!==t.selectedChildIndex?f.messages[t.selectedChildIndex]:void 0;let n=new Map;for(let[e,t]of g){let a=n.get(t.messageId)||[];a.push(e),n.set(t.messageId,a)}let a=[];for(let t of e){let e=n.get(t);if(e)for(let t of e)a.push(t)}for(let[e,t]of g)t.messageId===M.Wp&&a.push(e);for(let e of(S([...b]),k(f.messages.map(e=>e.id)),a))if(b.indexOf(e)>-1){P();let t=(0,er.oy)(e),n=_.get(t)??[];for(let e=n.length-1;e>=0;e--){let t=n[e];if(t&&-1===a.indexOf(t)){C(t);break}}}j(a)},[g,_,P,p,b,j,C,k,S,f.messages]),{handleConfirmationAction:U,handleRetryErrorMessage:$,handleRetryCopilotResponse:V,handleEditUserMessage:F,hasClientConfirmations:z,isAgentError:G,isAI:K,isCopilot:q,isError:X,isInterrupted:Q,isLoading:J,isUser:Y,myRef:Z,onFeedbackSubmitted:ee,renderContentArea:et,rendererConfig:en,renderFeedback:ea,shouldShowMessageActions:ei,skillExecutionToUseForRespondingText:eo,showRetryButton:es}=(0,nk.p)({excludeFeedback:e,inputRef:t,isLatestMessage:n,isLoading:i,isStreaming:r,removeOutdatedContentPreviewItems:D}),el=A(),[ec,ed]=(0,v.useState)(!1),eu=r&&!X&&!p.confirmations&&!ei&&n&&(!e||K),em=(0,nh.CX)(f.messages,p),ep=(em?.childMessageIndexes?.findIndex(e=>e===l)||0)+1||1,eh=em?.childMessageIndexes?.length||1,ef=eh>=nT.L9,eg=h.maxMessagesReached(),ev=p.mediaContent?.find(e=>e.mediaType.startsWith("image/")),ex=u.W.attachImagesImmersive&&void 0!==ev||!1;(0,v.useEffect)(()=>{if(void 0===p.selectedChildIndex){if(w.includes(p.id))for(let e of I){let t=_.get((0,er.oy)(e));if(t){let e=t.at(-1);e&&C(e,!1)}}L()}},[_,L,p.id,p.selectedChildIndex,b,C,w,I]);let e_=(0,v.useCallback)(()=>{let e=ep-1;h.setSelectedMessage(f.messages[em.childMessageIndexes[e-1]]),D()},[ep,h,em,D,f.messages]),ey=(0,v.useCallback)(()=>{let e=ep-1;h.setSelectedMessage(f.messages[em.childMessageIndexes[e+1]]),D()},[ep,h,em,D,f.messages]),eC=tO(),{model:ej,availableModels:eN}=(0,m.bP)("model","availableModels"),eb=ej??nP.UB;if(u.W.retryModelPicker){let e=eN??[nP.UB];p.model&&(eb=e.find(e=>e.id===p.model)||eb)}return(0,s.jsxs)("div",{className:(0,T.$)("message-container",nU.chatMessage,Y&&nU.user,K&&nU.ai,ec?nU.editing:"",n&&nU.latest),ref:Z,...(0,nO.G)(`message-${X?"error":r?"streaming":p.id}`),children:[K?(0,s.jsx)(n_.W,{isLoading:J&&n,isLoadingSkills:(p.skillExecutions??[]).length>0&&J&&""===p.content&&n,isError:X&&p.error?.type!=="agentUnauthorized",className:nU.avatar,mode:f.mode,isFirstMessage:a,message:p.content||"",createdAt:p.createdAt}):null,Y&&ex&&(0,s.jsx)(nM,{name:ev?.name||"Uploaded image",messageId:p.id,src:ev?.url||"",alt:`Uploaded image${ev?.name?`: ${ev.name}`:""}`}),Y&&p.references&&(0,s.jsx)(n$,{className:nU.references,messageID:p.id,messageTimestamp:p.createdAt,references:p.references,size:"medium"}),!ec&&(0,s.jsxs)("div",{className:nU.content,children:[q&&n&&!et?(0,s.jsx)(nA.To,{markdown:"",isStreaming:!0}):null,et&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:(0,T.$)("js-snippet-clipboard-copy-unpositioned",nU.messageArea),children:[Y?(0,s.jsx)(nw.R,{className:nU.userMessage,children:p.content??""}):(0,s.jsxs)(s.Fragment,{children:[!u.W.newImmersiveReferencesUI&&q&&p.skillExecutions?.map((e,t)=>s.jsx(nN,{functionCall:e,manager:h,panelWidth:o,messageInterrupted:p.interrupted},t)),u.W.newImmersiveReferencesUI&&(0,s.jsxs)(s.Fragment,{children:[q&&J&&n&&(0,s.jsx)(nE.b,{className:(0,T.$)(nU.skillExecutionText,"mb-2 mt-1"),children:`${(0,nj.WA)(eo)}...`}),p.references&&p.references.length>0&&(0,s.jsx)(nv.sV,{className:"mb-3",references:p.references,isImmersive:!0})]}),q&&i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nL.O,{variant:"rounded",height:"12px",width:"random"}),(0,s.jsx)(nL.O,{variant:"rounded",height:"12px",width:"random"}),(0,s.jsx)(nL.O,{variant:"rounded",height:"12px",width:"random"})]}):!z&&(0,s.jsx)(a_,{autoOpenPreviewPane:c,markdown:p.content??"",messageId:p.id,messageIndex:l,messageTimestamp:p.createdAt,...en}),X?(0,s.jsx)(ny.K,{manager:h}):null,G&&p.agentErrors&&(0,s.jsx)(ny.h,{errors:p.agentErrors}),Q?(0,s.jsx)(nb.h,{messageHasContent:!!p.content||!!p.skillExecutions?.length}):null,K&&(0,d.Ye)(p.confirmations).map((e,t)=>{switch(e.confirmation.name){case"indexrepo":return null;case"create-issue":return(0,s.jsx)(ay,{confirmation:e,handleConfirmation:U,message:p,messageIndex:l,isLatestMessage:n},t);default:return(0,s.jsx)(nx.m,{confirmation:e,handleConfirmation:U,isLatestMessage:n},t)}})]}),u.W.immersiveSubthreading&&eh>1&&!n&&(0,s.jsxs)("div",{className:nU.messageSubthreadIndicator,"data-testid":"chat-paging-indicator",children:[ep,"/",eh]})]}),eu&&(0,s.jsx)("div",{className:nU.actionsPlaceholder}),!ei&&es&&(0,s.jsx)(nI.$,{handleRetryMessage:$,disabled:ef||eg}),ei&&!el&&(0,s.jsxs)(nS.M,{"aria-label":"Message tools",className:nU.actions,children:[u.W.immersiveSubthreading&&Y&&(0,s.jsx)(H.K,{variant:"invisible","aria-label":"Edit message",onClick:()=>{ed(!0),(0,y.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_ACTION_EDIT",mode:"immersive"})},icon:W.PencilIcon,disabled:ef||eg,...(0,nO.G)("edit-message-button")}),q&&(0,s.jsxs)(s.Fragment,{children:[ea&&(0,s.jsx)(nC.G,{iconSize:"medium",returnFocusRef:Z,onFeedbackSubmitted:ee}),!!p.content&&!r&&(0,s.jsx)(eB.T,{textToCopy:p.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center",onCopy:()=>(0,y.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})]}),es&&X?(0,s.jsx)(nI.$,{handleRetryMessage:$,disabled:ef||eg}):u.W.immersiveSubthreading&&K&&!X&&!p.clientSide&&(0,s.jsx)(nI.$,{handleRetryMessage:V,disabled:ef||eg,showModelPicker:u.W.retryModelPicker&&!!eN&&eN.length>1,model:eb,navigateToNewThread:eC}),u.W.immersiveSubthreading&&eh>1&&(0,s.jsx)(nW,{currentPage:ep,totalPages:eh,onPrev:e_,onNext:ey,isUserMessage:Y,disabled:f.isWaitingOnCopilot})]}),q&&ei&&el&&(0,s.jsx)(nS.M,{"aria-label":"Message tools",className:nU.sharedThreadActions,children:(0,s.jsx)(s.Fragment,{children:!!p.content&&!r&&(0,s.jsx)(eB.T,{textToCopy:p.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center actions",onCopy:()=>(0,y.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})})})]})]}),ec&&u.W.immersiveSubthreading&&(0,s.jsx)(aS,{messageContent:p.content||"",handleEditUserMessage:F,setEditing:ed,disableSubmit:f.isWaitingOnCopilot})]})},aE=({message:e,...t})=>{let n=A();return(0,s.jsxs)(ng.$,{message:e,children:[(0,s.jsx)(aN,{message:e,messageIndex:t.messageIndex}),(0,s.jsx)(aw,{...t,isViewingSharedThread:n}),t.isSharedMessage&&!n&&(0,s.jsxs)("div",{className:nU.sharedMessageCheckpoint,children:[(0,s.jsx)(W.LinkIcon,{className:nU.icon})," Messages up to this point are included in shared link"]}),t.isLatestMessage&&u.W.copilotDuplicateThread&&n&&(0,s.jsxs)("div",{className:nU.sharedMessageCheckpoint,children:[(0,s.jsx)(W.RepoForkedIcon,{className:nU.icon})," Messages beyond this point will start a new private conversation."]})]})},ak=(0,v.memo)(aE);try{aw.displayName||(aw.displayName="InnerChatMessage")}catch{}try{aE.displayName||(aE.displayName="ChatMessageUnmemoized")}catch{}try{ak.displayName||(ak.displayName="ChatMessage")}catch{}let aT={ConversationLoader:"ConversationLoader-module__ConversationLoader--iaHbr",ConversationLoader__assistantGroup:"ConversationLoader-module__ConversationLoader__assistantGroup--PYCmE",ConversationLoader__userGroup:"ConversationLoader-module__ConversationLoader__userGroup--rnmbz",ConversationLoader__assistantAvatar:"ConversationLoader-module__ConversationLoader__assistantAvatar--jPmNg"};function aP(){return(0,s.jsxs)("div",{className:aT.ConversationLoader,children:[(0,s.jsx)("div",{className:aT.ConversationLoader__userGroup,children:(0,s.jsx)(nL.O,{variant:"rounded",height:"20px",width:"random"})}),(0,s.jsxs)("div",{className:aT.ConversationLoader__assistantGroup,children:[(0,s.jsx)(nL.O,{className:aT.ConversationLoader__assistantAvatar,variant:"elliptical",sx:{position:"absolute",height:24}}),Array.from({length:Math.floor(4*Math.random())+2}).map((e,t)=>(0,s.jsx)(nL.O,{variant:"rounded",height:"20px",width:"random"},t))]})]})}try{aP.displayName||(aP.displayName="ConversationLoader")}catch{}var aA=n(97891);let aL={container:"EmptyState-module__container--sRHBh",suggestions:"EmptyState-module__suggestions--fdxbq",suggestionButton:"EmptyState-module__suggestionButton--q8BQV",legalText:"EmptyState-module__legalText--cyh3t"},aO={suggestionButton:"SuggestionCard-module__suggestionButton--WLQeS",icon:"SuggestionCard-module__icon--NSxpP"},aR=e=>e in W;function aB({titleHtml:e,icon:t,color:n,onClick:a}){let i=function(e){let t=`${e.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`;return aR(t)?W[t]:void 0}(t);return(0,s.jsxs)("button",{className:aO.suggestionButton,onClick:a,children:[i&&(0,s.jsx)("div",{className:aO.icon,style:{color:n},children:(0,s.jsx)(i,{})}),(0,s.jsx)(e5.mo,{html:e})]})}try{aB.displayName||(aB.displayName="SuggestionCard")}catch{}try{(a=Icon).displayName||(a.displayName="Icon")}catch{}function aD({showSuggestions:e}){let t=(0,E.b)(),n=(0,m.Pk)(),a=t.getSelectedThread(n),i=(0,f.X)(),[r,o]=(0,v.useState)([]);return(0,v.useEffect)(()=>{var e;if(Array.isArray(e=i.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=i.icebreakers.find(e=>"functional"===e.type);e&&e.data.length>0&&o(e.data.sort(()=>.5-Math.random()).slice(0,6))}},[i.icebreakers]),(0,s.jsxs)("div",{className:aL.container,children:[(0,s.jsx)(_.A,{hidden:!0}),e&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),(0,s.jsx)("h2",{className:"sr-only",children:"Sample prompts to try"}),(0,s.jsx)("ul",{className:`${aL.suggestions} list-style-none`,children:r.map(e=>(0,s.jsx)("li",{className:aL.suggestionButton,children:(0,s.jsx)(aB,{titleHtml:e.titleHtml,icon:e.icon,color:e.color,onClick:()=>{let i=0===n.messages.length?a:t.getSelectedThread(n),r=n.currentUserLogin,o=e.message;t.sendChatMessage({thread:i,content:o.replaceAll("$$USERNAME$$",r),references:n.currentReferences,topic:n.currentTopic,context:n.context,customInstructions:n.customInstructions,model:n.model}),(0,y.BI)("dotcom_chat.activate",{target:"EMPTY_STATE_SUGGESTION_CARD",topic:n.currentTopic?.name,mode:"immersive",suggestionId:e.id})}},e.id)},e.id))})]}),(0,s.jsx)("div",{className:aL.legalText,children:(0,s.jsx)(aA.h,{})})]})}try{aD.displayName||(aD.displayName="EmptyState")}catch{}var aM=n(70642);let aU={container:"ErrorState-module__container--DKNLc",icon:"ErrorState-module__icon--Grz_W",description:"ErrorState-module__description--uIC8b"};function a$({title:e,description:t,ssoOrgs:n}){let a=n&&n.length>0;return(0,s.jsxs)("div",{className:aU.container,children:[(0,s.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),(0,s.jsxs)(ep.A,{border:!1,children:[(0,s.jsx)(ep.A.Visual,{children:(0,s.jsx)(W.AlertIcon,{size:"medium",className:aU.icon})}),(0,s.jsx)(ep.A.Heading,{as:"h2",children:e}),(void 0!==t||a)&&(0,s.jsx)(ep.A.Description,{children:(0,s.jsxs)("div",{className:aU.description,children:[(0,s.jsx)("span",{children:t}),a&&(0,s.jsx)(aM.x,{sx:{textAlign:"left"},protectedOrgs:n})]})})]})]})}try{a$.displayName||(a$.displayName="ErrorState")}catch{}let aV={container:"ImmersiveChat-module__container--Q4j2R",emptyContent:"ImmersiveChat-module__emptyContent--IQfnX",messageContent:"ImmersiveChat-module__messageContent--fpzTL",scrollToBottomButton:"ImmersiveChat-module__scrollToBottomButton--MQEF2",hidden:"ImmersiveChat-module__hidden--K3ci9"};var aW=n(8601);let aF=(0,n(80688).A)("sessionStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5}),az="THREAD_TIME_PATCH";function aH(){let e=aF.getItem(az);return e?JSON.parse(e):null}function aG(){aF.removeItem(az)}var aK=n(89621),aq=n(94747);let aX=e=>{let t=(0,E.b)(),{mutateAsync:n,...a}=(0,aq.n)({mutationFn:async n=>{let a=e?`/custom_copilots/${e}`:"/custom_copilots",i=await (0,e3.lS)(a,{method:e?"PUT":"POST",body:{custom_copilot:{name:n.name,description:n.description,general_instructions:n.generalInstructions,resources_attributes:n.resources?.map(e=>({id:e.databaseId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:function(e){switch(e.type){case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath};case"free_text":return{text:e.text,name:e.name};default:throw Error("Unsupported resource")}}(e)}))}}}),r=await i.json();if(!i.ok)throw r.errorMessages;return t.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:r}),r}});return{upsertCopilotSpace:n,...a}};function aQ({onClose:e,copilotSpaceId:t,resource:n}){let[a,i]=(0,v.useState)(n?.name??""),[r,o]=(0,v.useState)(n?.text??""),[l,c]=(0,v.useState)({}),{upsertCopilotSpace:d,isPending:u}=aX(t),m=async t=>{if(t?.preventDefault(),!u)try{await d({resources:[{id:Date.now().toString(),type:"free_text",name:a,text:r,markedForDestroy:!1,...n&&{id:n.id,databaseId:n.databaseId}}]}),e()}catch(e){c(e)}},p=!!n;return(0,s.jsx)(tM.l,{width:"large",title:p?"Edit a text file":"Add a text file",onClose:e,footerButtons:[{buttonType:"default",content:"Cancel",onClick:e},{buttonType:"primary",content:p?"Save":"Add",onClick:()=>void m(),loading:u,loadingAnnouncement:"Saving resource"}],children:(0,s.jsx)(t7.tL,{commands:{"github:submit-form":void 0},children:(0,s.jsx)("form",{onSubmit:m,children:(0,s.jsxs)(tT.B,{children:[(0,s.jsxs)(tB.A,{required:!0,children:[(0,s.jsx)(tB.A.Label,{children:"Name"}),(0,s.jsx)(tD.A,{block:!0,placeholder:"Give the file a title",value:a,onChange:e=>{i(e.target.value),c(e=>({...e,"resources.name":""}))},maxLength:1e3,validationStatus:l["resources.name"]?"error":void 0}),l["resources.name"]&&(0,s.jsx)(tB.A.Validation,{variant:"error",children:l["resources.name"]})]}),(0,s.jsxs)(tB.A,{required:!0,children:[(0,s.jsx)(tB.A.Label,{children:"Content"}),(0,s.jsx)(t8.Ay,{block:!0,rows:7,name:"content",value:r,placeholder:"Enter content here",maxLength:2e4,validationStatus:l["resources.text"]||r.length>2e4?"error":void 0,onChange:e=>{o(e.target.value),c(e=>({...e,"resources.text":""}))}}),l["resources.text"]?(0,s.jsx)(tB.A.Validation,{variant:"error",children:l["resources.text"]}):(0,s.jsx)(aJ,{text:r,promptCharLimit:2e4})]})]})})})})}function aJ({text:e,promptCharLimit:t}){let n=e.length>t,a=(0,s.jsxs)(s.Fragment,{children:[e.length.toLocaleString()," / ",t.toLocaleString()," characters"]});return n?(0,s.jsx)(tB.A.Validation,{variant:"error",children:a}):(0,s.jsx)(tB.A.Caption,{children:a})}try{aQ.displayName||(aQ.displayName="TextFileDialog")}catch{}try{aJ.displayName||(aJ.displayName="CharacterCount")}catch{}let aY=({children:e,copilotSpace:t,findFileWorkerPath:n})=>{let[a,i]=(0,v.useState)(!1),[r,o]=(0,v.useState)(!1),{upsertCopilotSpace:l}=aX(t.id),c=async e=>{await l({resources:e.map(e=>({...e,markedForDestroy:!1}))}),o(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(z.W,{children:[(0,s.jsx)(z.W.Anchor,{children:e}),(0,s.jsx)(z.W.Overlay,{width:"small",children:(0,s.jsxs)(G.l,{children:[(0,s.jsxs)(G.l.Item,{onSelect:()=>{o(!0)},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.FileCodeIcon,{})}),"Add files, folders..."]}),(0,s.jsx)(G.l.Divider,{}),(0,s.jsxs)(G.l.Item,{onSelect:()=>{i(!0)},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.PlusIcon,{})}),"Add a text file"]})]})})]}),a&&(0,s.jsx)(aQ,{copilotSpaceId:t.id,onClose:()=>i(!1)}),r&&(0,s.jsx)(aK.Q,{formData:[],onCancel:()=>{o(!1)},onSave:c,findFileWorkerPath:n})]})};try{aY.displayName||(aY.displayName="AddReferenceMenu")}catch{}function aZ({onClose:e,copilotSpace:t}){let[n,a]=(0,v.useState)(t.generalInstructions??""),[i,r]=(0,v.useState)(void 0),{upsertCopilotSpace:o,isPending:l}=aX(t.id),c=async t=>{if(t?.preventDefault(),!(n.length>2e3)&&!l)try{await o({generalInstructions:n}),e()}catch(t){let e="An error occurred while saving the instructions.";t&&"object"==typeof t&&"general_instructions"in t&&(e=t.general_instructions),r(e)}};return(0,s.jsx)(tM.l,{width:"large",title:"Edit instructions",subtitle:"Describe the main responsibilities, limitations, and expertise areas of the Copilot. Include what tasks it should handle and which ones to avoid.",onClose:e,footerButtons:[{buttonType:"default",content:"Cancel",onClick:e},{buttonType:"primary",content:"Save",onClick:()=>void c(),loading:l,loadingAnnouncement:"Saving instructions"}],children:(0,s.jsx)(t7.tL,{commands:{"github:submit-form":void 0},children:(0,s.jsx)("form",{onSubmit:c,children:(0,s.jsxs)(tB.A,{children:[(0,s.jsx)(tB.A.Label,{visuallyHidden:!0,children:"General Instructions"}),(0,s.jsx)(t8.Ay,{block:!0,rows:7,name:"generalInstructions",value:n,placeholder:"General instructions",validationStatus:i||n.length>2e3?"error":void 0,...(0,nO.G)("instructions-input"),onChange:e=>{a(e.target.value),r(void 0)}}),i?(0,s.jsx)(tB.A.Validation,{variant:"error",children:(0,s.jsx)("span",{...(0,nO.G)("error-message"),children:i})}):(0,s.jsx)(a0,{text:n,promptCharLimit:2e3})]})})})})}function a0({text:e,promptCharLimit:t}){let n=e.length>t,a=(0,s.jsxs)(s.Fragment,{children:[e.length.toLocaleString()," / ",t.toLocaleString()," characters"]});return n?(0,s.jsx)(tB.A.Validation,{variant:"error",children:a}):(0,s.jsx)(tB.A.Caption,{children:a})}try{aZ.displayName||(aZ.displayName="EditInstructionsDialog")}catch{}try{a0.displayName||(a0.displayName="CharacterCount")}catch{}var a1=n(30631),a2=n(6020),a5=n(72507),a3=n(56221);function a4({copilotSpace:e}){let{upsertCopilotSpace:t}=aX(e.id);async function n(e){await t({resources:[{...e,markedForDestroy:!0}]})}return(0,s.jsx)(a5.X.Container,{children:(0,s.jsx)(a3.b,{"aria-labelledby":"references-title",cellPadding:"normal",data:e.resources,columns:[{id:"id",header:"Name",rowHeader:!0,renderCell:e=>{switch(e.type){case"github_file":{let t=e.filePath.split("/"),n=t.pop(),a=[e.nwo,...t].join("/");return(0,s.jsxs)(tT.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,s.jsx)(W.FileCodeIcon,{size:16}),(0,s.jsxs)(tT.B,{gap:"none",children:[(0,s.jsx)("span",{className:"text-normal f5",children:n}),(0,s.jsx)("div",{children:(0,s.jsx)(a1.A,{title:a,maxWidth:300,className:"text-normal fgColor-muted",children:a})})]})]})}case"free_text":return(0,s.jsxs)(tT.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,s.jsx)(W.FileIcon,{size:16}),(0,s.jsx)("div",{children:(0,s.jsx)(a1.A,{title:e.name,maxWidth:300,className:"text-normal f5",children:e.name})})]});default:return null}}},{id:"size",header:"Size",align:"end",maxWidth:"auto",width:"growCollapse",renderCell:e=>(0,s.jsx)("span",{className:"fgColor-muted",children:e.sizePercentage&&e.sizePercentage<1?"<1%":`${Math.round(e.sizePercentage||0)}%`})},{id:"actions",header:()=>(0,s.jsx)(a2.s,{children:"Actions"}),maxWidth:"auto",align:"end",renderCell:t=>(0,s.jsx)(a6,{copilotSpaceId:e.id,row:t,onEdit:()=>{},onDelete:n})}]})})}let a6=({copilotSpaceId:e,row:t,onDelete:n})=>{let[a,i]=(0,v.useState)(null);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(z.W,{children:[(0,s.jsx)(z.W.Anchor,{children:(0,s.jsx)(H.K,{"aria-label":"Resource actions",title:"Resource actions",icon:W.KebabHorizontalIcon,variant:"invisible"})}),(0,s.jsx)(z.W.Overlay,{children:(0,s.jsxs)(G.l,{children:["free_text"===t.type&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(G.l.Item,{onSelect:()=>i(t),children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.PencilIcon,{})}),"Edit"]})}),(0,s.jsxs)(G.l.Item,{variant:"danger",onSelect:()=>{n(t)},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.TrashIcon,{})}),"Delete"]})]})})]}),a&&(0,s.jsx)(aQ,{copilotSpaceId:e,resource:a,onClose:()=>{i(null)}})]})};try{a4.displayName||(a4.displayName="ReferencesTable")}catch{}try{a6.displayName||(a6.displayName="RowActions")}catch{}let a7={container:"SpacesHomePageState-module__container--ewWUS",banner:"SpacesHomePageState-module__banner--ZL5KT",description:"SpacesHomePageState-module__description--bea8u",details:"SpacesHomePageState-module__details--eNWBc",left:"SpacesHomePageState-module__left--SmVXa",instructions:"SpacesHomePageState-module__instructions--oo_0j",instructionsTitle:"SpacesHomePageState-module__instructionsTitle--cLSP3",instructionsText:"SpacesHomePageState-module__instructionsText--Y6yxK",emptyText:"SpacesHomePageState-module__emptyText--SdXtD",references:"SpacesHomePageState-module__references--zeaPo",referencesTitle:"SpacesHomePageState-module__referencesTitle--e34gh",referencesTitleText:"SpacesHomePageState-module__referencesTitleText--Mk_z_",referencesText:"SpacesHomePageState-module__referencesText--EPoy7",referencesSizeProgressBar:"SpacesHomePageState-module__referencesSizeProgressBar--yA2uX",referencesSizeText:"SpacesHomePageState-module__referencesSizeText--DhJ9Q",right:"SpacesHomePageState-module__right--EC8uD",conversations:"SpacesHomePageState-module__conversations--_fVEh",conversationsTitle:"SpacesHomePageState-module__conversationsTitle--hownd",conversationsText:"SpacesHomePageState-module__conversationsText--X0b4F"},a8=e=>{let{selectedThreadID:t,textAreaRef:n,onSubmit:a}=e,i=(0,tk.Z)(),r=(0,E.b)(),o=(0,m.Pk)(),{customCopilotId:l,threads:c,findFileWorkerPath:u}=o,[p,h]=(0,v.useState)(!0),f=p?null:o.customCopilots?.find(e=>e.id===l),{protectedOrganizations:g}=f||{},[x,_]=(0,v.useState)(!1);(0,v.useEffect)(()=>{!async function(){if("number"==typeof l){let e=await r.fetchCustomCopilot(l);r.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e}),h(!1)}}()},[l,r]);let y=(0,v.useMemo)(()=>{!function(e){let t=aH();if(t){let n=e.get(t.threadID);n&&(Date.parse(n.updatedAt)<=t.updatedAt?n.updatedAt=new Date(t.updatedAt).toJSON():aG())}}(c);let e=new Map(Array.from(c.entries()).filter(e=>e[1].customCopilotID===l));return r.sortThreads(e).map(e=>({id:e.id,text:(0,d.CB)(e),href:`${d.Jz}/c/${e.id}`,date:new Date(e.updatedAt)}))},[c,l,r]);return f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:a7.container,children:[(0,s.jsx)("div",{className:a7.banner,children:g&&(0,s.jsx)(aM.x,{protectedOrgs:g,redirectURI:()=>`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(location.href)}`})}),(0,s.jsx)(nt,{icon:f.iconType,color:f.iconColor}),(0,s.jsx)("h2",{children:f.name}),f.description&&(0,s.jsx)("p",{className:a7.description,children:f.description}),(0,s.jsx)("div",{className:"width-full",children:(0,s.jsx)(I.V,{textAreaRef:n,onSubmit:a,isStreaming:!!o.streamingMessage,size:"small",hideAttachmentButton:!0},t)}),(0,s.jsxs)("div",{className:a7.details,children:[(0,s.jsxs)("div",{className:a7.left,children:[(0,s.jsxs)("div",{className:a7.instructions,children:[(0,s.jsxs)("p",{className:a7.instructionsTitle,children:["Instructions",(0,s.jsx)(eU.Q,{size:"small",onClick:()=>_(!0),children:"Edit"})]}),f.generalInstructions?(0,s.jsx)("p",{className:a7.instructionsText,children:f.generalInstructions}):(0,s.jsx)("p",{className:a7.emptyText,children:"No instructions added"})]}),(0,s.jsxs)("div",{className:a7.references,children:[(0,s.jsxs)("p",{className:a7.referencesTitle,id:"references-title",children:[(0,s.jsx)("span",{className:a7.referencesTitleText,children:"References"}),f.sizePercentage>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(aW.z,{inline:!0,barSize:"small",progress:f.sizePercentage,className:a7.referencesSizeProgressBar}),(0,s.jsxs)("span",{className:a7.referencesSizeText,children:[f.sizePercentage<1?"<1":Math.round(f.sizePercentage),"%"]})]}),(0,s.jsx)(aY,{copilotSpace:f,findFileWorkerPath:u,children:(0,s.jsx)(eU.Q,{leadingVisual:W.PlusIcon,size:"small",children:"Add"})})]}),f.resources.length>0?(0,s.jsx)(a4,{copilotSpace:f}):(0,s.jsx)("p",{className:a7.referencesText,children:"No references added"})]})]}),(0,s.jsx)("div",{className:a7.right,children:(0,s.jsxs)("div",{className:a7.conversations,children:[(0,s.jsx)("p",{className:a7.conversationsTitle,children:"Conversations"}),y.length>0?(0,s.jsx)(G.l,{variant:"full",children:y.map(e=>(0,s.jsxs)(G.l.LinkItem,{href:e.href,onClick:t=>{t.preventDefault(),i(e.href)},children:[(0,s.jsx)(G.l.LeadingVisual,{children:(0,s.jsx)(W.CommentIcon,{})}),e.text]},e.id))}):(0,s.jsx)("p",{className:a7.conversationsText,children:"No conversations yet"})]})})]})]}),x&&(0,s.jsx)(aZ,{copilotSpace:f,onClose:()=>_(!1)})]}):(0,s.jsx)(aP,{})};try{a8.displayName||(a8.displayName="SpacesHomePageState")}catch{}let a9=({inputRef:e,panelWidth:t,isMobile:n})=>{let{scrollToBottom:a}=(0,nu.b)(),i=(0,m.Pk)(),{streamingMessage:r,isWaitingOnCopilot:o,messages:l,selectedThreadID:c}=i,p=(0,E.b)().getSelectedThread(i),h=(0,d.CB)(p),f=p?.sharedMessageID,g=(0,v.useMemo)(()=>{let e={id:M.Wp,role:"assistant",content:"",createdAt:"",threadID:c||"",references:[],clientSide:!0,messageIndex:-1},t=l;return(u.W.immersiveSubthreading&&(t=(0,nh.B)(l)),o)?[...t,r??e]:t},[l,r,o,c]);(0,nf.N)(()=>a("instant"),[a]);let x=(0,nd.A)(g),_=g.find(e=>"assistant"===e.role)?.id;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"sr-only",children:[(0,s.jsx)("h1",{children:"Copilot Chat"}),(0,s.jsx)("h2",{children:h})]}),x.map((a,i)=>(0,s.jsxs)(nd.i,{isLastGroup:i===x.length-1,children:[a.map((o,c)=>{let d;return d=u.W.immersiveSubthreading&&(-1===o.messageIndex?l.length:o.messageIndex)||c,(0,s.jsx)(ak,{isLatestMessage:i===x.length-1&&c===a.length-1,isSharedMessage:o.id===f,isFirstReply:o.id===_,message:o,messageIndex:d,inputRef:e,panelWidth:t,isStreaming:o.id===r?.id,autoOpenPreviewPane:!n},d)}),i===x.length-1&&(0,s.jsx)(ab,{})]},i))]})},ie=()=>(0,s.jsx)(a$,{title:"Conversation failed to load",description:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(em.A,{href:"",onClick:e=>{e.preventDefault(),window.location.reload()},inline:!0,children:"Reload the page"})," ","to try again."]})}),it=()=>{let{messagesLoading:e,ssoOrganizations:t}=(0,m.Pk)(),n=e.missingOrgIds?.map(e=>String(e)).map(e=>t?.find(t=>t.id===e)?.login).filter(e=>!!e),a=n&&n.length>0?"This URL may be incorrect, you're signed out of your organization or the conversation may have been deleted.":"This URL may be incorrect or the conversation may have been deleted.";return(0,s.jsx)(a$,{title:"Conversation not found",description:a,ssoOrgs:n})},ia=()=>(0,s.jsx)(a$,{title:"Shared conversation not found",description:"This URL may be incorrect or the conversation may have been deleted."}),ii=()=>(0,s.jsx)(a$,{title:"Space not found",description:"This URL may be incorrect or the space may have been deleted."}),ir=({inputRef:e,panelWidth:t,isMobile:n,onSubmit:a})=>{let i=(0,m.Pk)(),r=(0,E.b)(),{activePlugin:o,currentReferences:l,messagesLoading:d,threadsLoading:p,messages:h,showTopicPicker:f,selectedThreadID:g,customCopilotId:x,customCopilots:_}=i,y=r.getSelectedThread(i),{textAreaRef:C}=(0,np.Y)(e),j=A(),N=(0,c.nu)(o),b=(0,v.useMemo)(()=>!i.selectedThreadID&&w.J.getEntrypointMessage(),[i.selectedThreadID]),I=null,S=null,T=h;if(u.W.immersiveSubthreading&&(T=(0,nh.B)(h)),T.length&&"loaded"===d.state)I=(0,s.jsx)(a9,{inputRef:C,panelWidth:t,isMobile:n});else if(("loading"===d.state||"pending"===d.state)&&i.selectedThreadID&&!f)I=(0,s.jsx)(aP,{});else if("error"===d.state&&i.selectedThreadID&&(null===y||d.notFound))S=j?(0,s.jsx)(ia,{}):(0,s.jsx)(it,{});else if("error"===d.state||"error"===p.state)S=(0,s.jsx)(ie,{});else if("loading"!==d.state&&!b){if(x||(0,k.k1)())S=(0,k.qY)(_,x)?(0,s.jsx)(es.t,{fallback:(0,s.jsx)(ii,{}),children:(0,s.jsx)(a8,{selectedThreadID:g,textAreaRef:C,onSubmit:a})}):(0,s.jsx)(ii,{});else if(N?.EmptyStateComponent){let e=N.EmptyStateComponent;S=(0,s.jsx)(e,{chatState:i})}else S=(0,s.jsx)(aD,{showSuggestions:0===l.length&&!i.currentTopic})}return(0,s.jsxs)(nu.$,{className:aV.container,children:[S&&(0,s.jsx)("div",{className:aV.emptyContent,children:S}),I&&(0,s.jsxs)("div",{className:aV.messageContent,children:[I,(0,s.jsx)(io,{}),(0,s.jsx)(nm.Cb,{})]}),(0,s.jsx)(nm.zc,{})]})},io=()=>{let{isScrolledUp:e,scrollToBottom:t}=(0,nu.b)();return(0,s.jsx)(H.K,{"aria-label":"Scroll to bottom",className:(0,T.$)(aV.scrollToBottomButton,!e&&aV.hidden),onClick:()=>t("smooth"),icon:W.ArrowDownIcon,tooltipDirection:"n",tabIndex:-1,"aria-hidden":!0})};try{a9.displayName||(a9.displayName="Messages")}catch{}try{ie.displayName||(ie.displayName="FailedToLoadThreadError")}catch{}try{it.displayName||(it.displayName="NotFoundError")}catch{}try{ia.displayName||(ia.displayName="SharedThreadNotFound")}catch{}try{ii.displayName||(ii.displayName="SpaceNotFound")}catch{}try{ir.displayName||(ir.displayName="ImmersiveChat")}catch{}try{io.displayName||(io.displayName="ScrollToBottomButton")}catch{}let is={container:"Layout-module__container--ON_wj",left:"Layout-module__left--LHTG3",main:"Layout-module__main--JKQM5",content:"Layout-module__content--s7QoY",footer:"Layout-module__footer--raJHn",chatInputContainer:"Layout-module__chatInputContainer--DXrKy",previewPane:"Layout-module__previewPane--vF1ZO",active:"Layout-module__active--nDCtU",wide:"Layout-module__wide--vTn04",viewer:"Layout-module__viewer--M_UyD",fullscreenPreviewPane:"Layout-module__fullscreenPreviewPane--i4oKD"},il={container:"QuotaExceededBanner-module__container--BbiER"};function ic(){let{resetDate:e}=(0,S.x)();return(0,s.jsx)("div",{className:il.container,children:(0,s.jsx)(j.l,{variant:"upsell",title:"Limit reached soon",description:`You have reached your free plan limit. It will reset on ${e}`,hideTitle:!0,primaryAction:(0,s.jsx)(C.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:()=>{(0,y.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_LINK_UPGRADE",mode:"immersive"})},children:"Upgrade"})})})}try{ic.displayName||(ic.displayName="QuotaExceededBanner")}catch{}let id={container:"QuotaExceededEmptyState-module__container--IH35J",main:"QuotaExceededEmptyState-module__main--UOew3",hero:"QuotaExceededEmptyState-module__hero--GYoHc",copy:"QuotaExceededEmptyState-module__copy--FI8o_",heading:"QuotaExceededEmptyState-module__heading--RHZjC",description:"QuotaExceededEmptyState-module__description--m4Qvb",footer:"QuotaExceededEmptyState-module__footer--xLpJU"};function iu(){let{resetDate:e}=(0,S.x)();return(0,s.jsxs)("div",{className:id.container,children:[(0,s.jsxs)("div",{className:id.main,children:[(0,s.jsx)("img",{className:id.hero,src:"/images/modules/copilot-immersive-v1/hero.png",alt:"Hero"}),(0,s.jsxs)("div",{className:id.copy,children:[(0,s.jsx)("h2",{className:id.heading,children:"You\u2019ve reached your free plan limit"}),(0,s.jsxs)("p",{className:id.description,children:["Your limits will reset on ",e,"."]}),(0,s.jsx)(C.z,{as:"a",variant:"primary",size:"large",href:"https://github.com/features/copilot#pricing",onClick:()=>{(0,y.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"immersive"})},children:"Upgrade to Pro"})]})]}),(0,s.jsxs)("div",{className:id.footer,children:[(0,s.jsx)("strong",{children:"Part of an organization?"}),(0,s.jsxs)("span",{children:["Upgrade to"," ",(0,s.jsx)(em.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]})]})}try{iu.displayName||(iu.displayName="QuotaExceededEmptyState")}catch{}var im=n(84976),ip=n(39519);let ih={ConversationList__container:"ConversationList-module__ConversationList__container--rX8fM",ConversationList__empty:"ConversationList-module__ConversationList__empty--sTf7Y",ConversationList:"ConversationList-module__ConversationList--LAVA0",ConversationList__section:"ConversationList-module__ConversationList__section--ihwdi",ConversationList__title:"ConversationList-module__ConversationList__title--IHb4U",ConversationList__item:"ConversationList-module__ConversationList__item--dD6z4",ConversationList__link:"ConversationList-module__ConversationList__link--Byc2c",ConversationList__text:"ConversationList-module__ConversationList__text--YbHpv",ConversationList__context:"ConversationList-module__ConversationList__context--SK6Jb"};function ig({selectedItemID:e,loadingState:t,onConversationSelect:n}){let a=(0,E.b)(),{threads:i}=(0,m.Pk)(),r=(0,v.useMemo)(()=>((function(e){let t=aH();if(t){let n=e.get(t.threadID);n&&(Date.parse(n.updatedAt)<=t.updatedAt?n.updatedAt=new Date(t.updatedAt).toJSON():aG())}})(i),a.sortThreads(i).map(e=>({id:e.id,text:(0,d.CB)(e),href:`${d.Jz}/c/${e.id}`,date:new Date(e.updatedAt)}))),[i,a]),o=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let a=new Date(t);a.setDate(t.getDate()-7);let i=new Date(t);i.setDate(t.getDate()-30);let r=[],o=[],s=[],l=[];for(let c of e)c.date.toDateString()===t.toDateString()?r.push(c):c.date.toDateString()===n.toDateString()?o.push(c):c.date>a?s.push(c):c.date>i&&l.push(c);return{Today:r,Yesterday:o,"Last 7 days":s,"Last 30 days":l}}(r),l=0===r.length,c=(0,v.useId)();return(0,s.jsx)("aside",{"aria-labelledby":`${c}-conversations`,id:`${c}-conversation-list`,tabIndex:-1,className:ih.ConversationList__container,children:l&&("loading"===t||"pending"===t)?(0,s.jsx)(ip.r,{lines:5}):l?(0,s.jsx)(ix,{}):(0,s.jsxs)("div",{className:ih.ConversationList__section,children:[(0,s.jsx)("h3",{id:`${c}-conversations`,className:"sr-only",children:"Conversations"}),Object.entries(o).map(([t,a])=>a.length>0&&(0,s.jsxs)("nav",{"aria-labelledby":`${c}_${t}`,children:[(0,s.jsx)("h4",{id:`${c}_${t}`,className:ih.ConversationList__title,children:t}),(0,s.jsx)("ul",{className:ih.ConversationList,children:a.map(t=>(0,s.jsx)(iv,{item:t,selectedItemId:e??void 0,onSelect:n},t.id))})]},t))]})})}function iv({item:e,selectedItemId:t,onSelect:n}){let a=e.id===t,[i,r]=(0,v.useState)(null),[o,l,c]=(0,tL.B)(!1),d=(0,v.useRef)(null),u=A(),m=(0,v.useCallback)(()=>{(0,tA.flushSync)(()=>r(null)),d.current?.focus()},[]);return e.href&&(0,s.jsxs)("li",{className:ih.ConversationList__item,children:[(0,s.jsx)(im.N_,{className:ih.ConversationList__link,to:e.href,"aria-current":a?"page":void 0,onClick:()=>{n(),(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})},children:(0,s.jsx)("span",{className:ih.ConversationList__text,children:e.text})}),(0,s.jsx)("span",{className:ih.ConversationList__context,children:(0,s.jsxs)(z.W,{anchorRef:d,children:[(0,s.jsx)(z.W.Anchor,{children:(0,s.jsx)(H.K,{loading:o,icon:W.KebabHorizontalIcon,"aria-label":"Manage conversation",variant:"invisible",onClick:()=>(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,s.jsx)(z.W.Overlay,{children:(0,s.jsx)(G.l,{children:(0,s.jsx)(tz,{onOpenDialog:r,showShare:a&&!u})})})]})}),(0,s.jsx)(tH,{visibleDialog:i,onClose:m,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:l,onFinishLoading:c})]},e.id)}function ix(){return(0,s.jsxs)("div",{className:ih.ConversationList__empty,children:[(0,s.jsx)(nF.A,{as:"h3",sx:{fontSize:1,mb:2},children:"No conversations yet"}),(0,s.jsx)(tV.A,{sx:{color:"fg.muted"},children:"Ask Copilot anything on the right to start your first conversation."})]})}try{ig.displayName||(ig.displayName="ConversationList")}catch{}try{iv.displayName||(iv.displayName="ConversationListEntry")}catch{}try{ix.displayName||(ix.displayName="EmptyState")}catch{}function i_(){return(0,s.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.515.456a1.555 1.555 0 00-2.2 0L6.58 6.19a1.556 1.556 0 00-.396.673l-.825 2.89a.667.667 0 00.824.824l2.89-.826c.254-.072.485-.209.672-.396l5.735-5.734a1.556 1.556 0 000-2.2l-.965-.965zm-1.257.942a.222.222 0 01.314 0l.965.966a.222.222 0 010 .314L13.415 3.8l-1.28-1.28 1.123-1.122zm-2.065 2.066l1.279 1.279-3.67 3.67a.221.221 0 01-.096.056l-1.736.496.496-1.736c.01-.036.03-.07.057-.096l3.67-3.67zM1.639 4.778a2.25 2.25 0 012.25-2.25h3.154a.75.75 0 000-1.5H3.889a3.75 3.75 0 00-3.75 3.75v7.333a3.75 3.75 0 003.75 3.75h7.333a3.75 3.75 0 003.75-3.75V8.445a.75.75 0 00-1.5 0v3.666a2.25 2.25 0 01-2.25 2.25H3.889a2.25 2.25 0 01-2.25-2.25V4.778z",clipRule:"evenodd"})})}try{i_.displayName||(i_.displayName="ComposeIcon")}catch{}var iy=n(2497);let iC=({className:e})=>(0,s.jsx)("svg",{className:e,width:"16",height:"16","aria-hidden":"true",fill:"none",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9853 4.76795c.2467 1.23107.1819 2.55631-.3218 3.71134 1.0897-1.00527 1.7464-2.46826 1.7464-3.86921 0-.41421.3357-.75.75-.75.4142 0 .75.33579.75.75 0 2.80515-2.0553 5.92172-5.26314 6.53282.12999.0339.26315.0635.39904.0885 1.3486.2485 2.7916.0174 3.7282-.5446.3552-.2131.8159-.0979 1.029.2573.2131.3552.0979.8159-.2573 1.029-1.3033.782-3.1303 1.0359-4.77168.7335-1.47895-.2726-2.95185-1.0297-3.73462-2.4328.03609.3407.0998.6912.19117 1.0445.39625 1.5319 1.23152 2.7976 2.12066 3.2689.36598.194.5054.6479.31141 1.0139-.19399.366-.64793.5054-1.01391.3114-1.41889-.7521-2.42362-2.4914-2.87037-4.2186-.37219-1.439-.41354-3.09054.18406-4.40236-.18676.13263-.36743.27694-.54001.43237-1.03593.93306-1.73142 2.22122-1.73142 3.69879 0 .4142-.33579.75-.75.75-.41422 0-.75-.3358-.75-.75 0-1.97509.934-3.64826 2.22755-4.81334.88055-.7931 1.9505-1.37217 3.05387-1.65822-.11043-.0376-.22261-.07252-.33631-.10464-1.50098-.42402-2.98649-.28172-3.84609.36302-.33136.24853-.80147.18139-1.05-.14998-.24854-.33136-.1814-.80146.14997-1.05 1.38041-1.03537 3.4149-1.0978 5.1539-.60654 1.67421.47295 3.33259 1.53108 4.06402 3.11319l.0038.00674c.035-.47081.0022-.96424-.0972-1.46029-.2603-1.29954-.95701-2.50156-1.90466-3.21238-.33135-.24854-.39848-.71865-.14994-1.050006.24855-.331356.71865-.398487 1.05001-.14994C10.8023 1.6197 11.6657 3.17263 11.9853 4.76795ZM7.99998 6.0001c-1.10457 0-2 .89543-2 2s.89543 2 2 2 2-.89543 2-2-.89543-2-2-2Z",fill:"currentColor"})}),ij=({className:e})=>(0,s.jsx)("svg",{className:e,width:"24",height:"24","aria-hidden":"true",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.978 7.15193C18.348 8.99854 18.2508 10.9864 17.4952 12.719C19.1299 11.2111 20.1148 9.01657 20.1148 6.91513C20.1148 6.29381 20.6185 5.79013 21.2398 5.79013C21.8611 5.79013 22.3648 6.29381 22.3648 6.91513C22.3648 11.1229 19.2819 15.7977 14.4701 16.7144C14.6651 16.7653 14.8648 16.8095 15.0687 16.8471C17.0916 17.2199 19.256 16.8732 20.6609 16.0303C21.1937 15.7106 21.8848 15.8833 22.2044 16.4161C22.5241 16.9489 22.3513 17.6399 21.8186 17.9596C19.8635 19.1326 17.123 19.5135 14.661 19.0599C12.4426 18.6511 10.2332 17.5154 9.05906 15.4107C9.11319 15.9218 9.20876 16.4475 9.34581 16.9774C9.94019 19.2753 11.1931 21.1739 12.5268 21.8808C13.0758 22.1718 13.2849 22.8527 12.9939 23.4017C12.7029 23.9507 12.022 24.1598 11.473 23.8688C9.34472 22.7407 7.83763 20.1317 7.1675 17.5408C6.60921 15.3824 6.54719 12.9051 7.44357 10.9374C7.16344 11.1363 6.89245 11.3527 6.6336 11.5859C5.0797 12.9855 4.03646 14.9177 4.03646 17.1341C4.03646 17.7554 3.53278 18.2591 2.91146 18.2591C2.29014 18.2591 1.78646 17.7554 1.78646 17.1341C1.78646 14.1714 3.18748 11.6617 5.12779 9.91404C6.44863 8.72438 8.05359 7.85577 9.70867 7.4267C9.54302 7.3703 9.37474 7.31792 9.20417 7.26973C6.9527 6.6337 4.72443 6.84715 3.43504 7.81425C2.93799 8.18706 2.23284 8.08634 1.86003 7.58929C1.48723 7.09225 1.58794 6.38709 2.08499 6.01429C4.15561 4.46123 7.20734 4.36758 9.81585 5.10447C12.3271 5.8139 14.8147 7.40107 15.9118 9.77418L15.9176 9.78431C15.9701 9.07813 15.9209 8.33801 15.7718 7.59397C15.3812 5.64465 14.3362 3.84162 12.9148 2.77539C12.4177 2.40257 12.317 1.69742 12.6898 1.20038C13.0627 0.703346 13.7678 0.60265 14.2649 0.97547C16.2034 2.42956 17.4985 4.75894 17.978 7.15193ZM12 9.00014C10.3431 9.00014 9 10.3433 9 12.0001C9 13.657 10.3431 15.0001 12 15.0001C13.6569 15.0001 15 13.657 15 12.0001C15 10.3433 13.6569 9.00014 12 9.00014Z",fill:"currentColor"})});function iN({className:e,size:t}){return 24===t?(0,s.jsx)(ij,{className:e}):(0,s.jsx)(iC,{className:e})}try{iC.displayName||(iC.displayName="SpaceIcon16")}catch{}try{ij.displayName||(ij.displayName="SpaceIcon24")}catch{}try{iN.displayName||(iN.displayName="SpacesIcon")}catch{}let ib={list:"ServiceList-module__list--YDLyn",icon:"ServiceList-module__icon--iUANO"};function iI(){let e=(0,m.Pk)(),{activePlugin:t,customCopilotId:n,selectedThreadID:a}=e,i=(0,c.qw)(),r=(0,E.b)(),o=tO(),l=(0,k.VR)(),p=async e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),await o({clearTopic:!0,includeThreads:!1}),(0,y.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},h=(e,t)=>{e.metaKey||e.ctrlKey||(r.dispatch({type:"SET_CUSTOM_COPILOT_ID",customCopilotId:null}),r.selectPlugin(t))};return(0,s.jsxs)("ul",{className:ib.list,children:[(0,s.jsx)(iy.Vx,{"aria-current":a||t||n||l?void 0:"page",displayName:"Dashboard",href:d.Jz,icon:W.HomeIcon,id:"home",onLinkClick:p}),u.W.customCopilots&&(0,s.jsx)(iy.Vx,{"aria-current":l?"page":void 0,displayName:"Spaces",expandOnClick:!1,hasItems:!1,href:d.VR,iconOverride:(0,s.jsx)(iN,{className:ib.icon,size:16}),id:"spaces",onLinkClick:()=>{r.selectPlugin(null)}}),i.map(t=>void 0!==t.NavigationComponent?(0,s.jsx)(t.NavigationComponent,{chatState:e,onLinkClick:h},t.id):null)]})}try{iI.displayName||(iI.displayName="ServiceList")}catch{}let iS={container:"Sidebar-module__container--s585U",header:"Sidebar-module__header--uOLk8",sidebar:"Sidebar-module__sidebar--sn0TN",conversations:"Sidebar-module__conversations--NEO0w",blankslateContainer:"Sidebar-module__blankslateContainer--Gvuc8",pinned:"Sidebar-module__pinned--e3Nsi",visible:"Sidebar-module__visible--d8dRm"};function iw({isVisible:e,isPinned:t,isFloating:n,onNewThread:a,onToggle:i}){let r=(0,m.Pk)(),{threads:o,selectedThreadID:l,customCopilotId:c}=r,p=n?e:t,h=(0,E.b)(),f=(0,v.useRef)(!1),g=tO(),x=A(),_=u.W.immersiveServiceNavigation;(0,v.useEffect)(()=>{0!==o.size||f.current||(f.current=!0,h.fetchThreads())},[o,h,r]);let C=()=>{n&&e&&i()},j=(0,v.useRef)(null);return(0,v.useEffect)(()=>{if(e&&n){let e=e=>{j.current&&!j.current.contains(e.target)&&i()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},[e,n,i]),(0,s.jsxs)("div",{ref:j,className:(0,T.$)(iS.container,e&&iS.visible,t&&iS.pinned),children:[(0,s.jsxs)("div",{className:iS.header,children:[(0,s.jsx)("h2",{className:"sr-only",children:"Copilot navigation"}),(0,s.jsx)(H.K,{icon:p?W.SidebarExpandIcon:W.SidebarCollapseIcon,"aria-label":p?"Close conversations":"Open conversations",onClick:()=>{i(),p?(0,y.BI)("dotcom_chat.activate",{target:"SIDEBAR_EXPAND",mode:"immersive"}):(0,y.BI)("dotcom_chat.activate",{target:"SIDEBAR_COLLAPSE",mode:"immersive"})},variant:"default"}),(0,s.jsx)(H.K,{as:im.N_,to:d.Jz,icon:i_,"aria-label":"New conversation",onClick:async e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),C(),await g({clearTopic:!0,includeThreads:!1}),a(),(0,y.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},variant:"default"})]}),(0,s.jsx)("div",{className:iS.sidebar,children:(0,s.jsx)(es.t,{fallback:(0,s.jsx)(iE,{}),children:(0,s.jsxs)("div",{className:iS.conversations,children:[(0,s.jsx)("h3",{className:"sr-only",children:"Quick links"}),_&&(0,s.jsx)(iI,{}),(0,s.jsx)(ig,{selectedItemID:x?null:l||String(c),loadingState:r.threadsLoading.state,onConversationSelect:C})]})})})]})}function iE(){return(0,s.jsx)("div",{className:iS.blankslateContainer,children:(0,s.jsx)(ef,{regionName:"The conversations menu"})})}try{iw.displayName||(iw.displayName="Sidebar")}catch{}try{iE.displayName||(iE.displayName="SidebarContentsFallback")}catch{}function ik(){return(0,s.jsx)(nc,{showModelPicker:!1,showPreviewPaneButton:!1})}try{ik.displayName||(ik.displayName="SpacesHeader")}catch{}let iT={scrollContainer:"ServiceView-module__scrollContainer--veN6s",container:"ServiceView-module__container--aWxFy",header:"ServiceView-module__header--a0QWQ",pageTitle:"ServiceView-module__pageTitle--uqL4l",search:"ServiceView-module__search--d_tBr",searchIcon:"ServiceView-module__searchIcon--riK25",searchInput:"ServiceView-module__searchInput--uMixA",grid:"ServiceView-module__grid--jkblT",emptyGrid:"ServiceView-module__emptyGrid--pQAz6",cardContainer:"ServiceView-module__cardContainer--s8sJT",card:"ServiceView-module__card--VdDaM",menu:"ServiceView-module__menu--Mop23",emptyStateContainer:"ServiceView-module__emptyStateContainer--pPYei",description:"ServiceView-module__description--H7Hre",entityIcon:"ServiceView-module__entityIcon--StPLn"};function iP({name:e,entity:t,entityIcon:n,description:a,onCreate:i,children:r}){let[o,l]=(0,v.useState)(""),c=r?Array.isArray(r)?r:[r]:[],d=c.length,u=c.map(e=>(0,v.isValidElement)(e)&&"string"==typeof e.props.title&&e.props.title.toLowerCase().includes(o.toLowerCase())?e:null).filter(Boolean),m=u.length;return(0,s.jsx)("div",{className:iT.scrollContainer,children:0===d?(0,s.jsxs)("div",{className:iT.emptyStateContainer,children:[(0,s.jsxs)(tT.B,{gap:"none",children:[n?(0,s.jsx)("div",{className:iT.entityIcon,children:n}):null,(0,s.jsx)("h2",{className:iT.pageTitle,children:e})]}),(0,s.jsx)("p",{className:iT.description,children:a}),(0,s.jsxs)(eU.Q,{variant:"primary",onClick:i,children:["New ",t.toLowerCase()]})]}):(0,s.jsxs)("div",{className:iT.container,children:[(0,s.jsxs)("div",{className:iT.header,children:[(0,s.jsx)("h2",{className:iT.pageTitle,children:e}),(0,s.jsxs)(eU.Q,{variant:"primary",onClick:i,children:["New ",t.toLowerCase()]})]}),(0,s.jsxs)("div",{className:iT.search,children:[(0,s.jsx)(W.SearchIcon,{className:iT.searchIcon}),(0,s.jsx)("input",{className:iT.searchInput,"aria-label":`Search ${e.toLowerCase()}`,placeholder:`Search ${e.toLowerCase()}`,value:o,onChange:e=>l(e.target.value)})]}),0===m?(0,s.jsxs)("p",{className:iT.emptyGrid,children:["No ",e.toLowerCase()," found matching your search."]}):(0,s.jsx)("div",{className:iT.grid,children:u})]})})}function iA({title:e,href:t,menu:n,children:a,...i}){return(0,s.jsxs)("div",{className:iT.cardContainer,"data-title":e,children:[(0,s.jsx)(im.N_,{...i,to:t,className:iT.card,children:a}),!!n&&(0,s.jsx)("div",{className:iT.menu,children:n})]})}try{iP.displayName||(iP.displayName="ServiceView")}catch{}try{iA.displayName||(iA.displayName="ServiceItem")}catch{}let iL={container:"SpacesCard-module__container--cugaj",content:"SpacesCard-module__content--ilNdn",title:"SpacesCard-module__title--SdBeC",description:"SpacesCard-module__description--g1HaX",metadata:"SpacesCard-module__metadata--sQAQe",metadataItem:"SpacesCard-module__metadataItem--wvRpg",metadataIcon:"SpacesCard-module__metadataIcon--FHVuh"};function iO({copilotSpace:e}){let{name:t,description:n,updatedAt:a=new Date,iconType:i,iconColor:r}=e;return(0,s.jsxs)("div",{className:iL.container,children:[(0,s.jsx)(nt,{icon:i,color:r}),(0,s.jsxs)("div",{className:iL.content,children:[(0,s.jsx)("h3",{className:iL.title,children:t}),(0,s.jsx)("p",{className:iL.description,children:n}),(0,s.jsx)("div",{className:iL.metadata,children:(0,s.jsxs)("div",{className:iL.metadataItem,children:[(0,s.jsx)(W.ClockIcon,{className:iL.metadataIcon}),(0,s.jsx)(ac.A,{format:"micro",date:new Date(a)})]})})]})]})}try{iO.displayName||(iO.displayName="SpacesCard")}catch{}function iR({copilotSpaces:e}){let t=(0,E.b)(),[n,a]=(0,v.useState)(!1),i=e=>async()=>{await t.deleteCopilotSpace(e)},r=e=>()=>{t.dispatch({type:"SET_CUSTOM_COPILOT_ID",customCopilotId:e}),(0,y.BI)("dotcom_chat.activate",{target:"SIDEBAR_CUSTOM_COPILOT_SELECTED",mode:"immersive"})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ik,{}),(0,s.jsx)(iP,{name:"Spaces",entity:"space",entityIcon:(0,s.jsx)(iN,{size:24}),description:"Spaces let\u2019s you create shared research environments where you or your team can collaborate, explore topics, and exchange insights\u2014all powered by AI-driven search and summarization.",onCreate:()=>{a(!0)},children:e?.map?.(e=>s.jsx(iA,{title:e.name,onClick:r(e.id),href:k.Cb(e.id),menu:s.jsx(nr,{copilot:e,onDelete:i(e)}),children:s.jsx(iO,{copilotSpace:e})},e.id))}),n&&(0,s.jsx)(ni,{onClose:()=>a(!1)})]})}try{iR.displayName||(iR.displayName="SpacesView")}catch{}function iB(){let e=(0,m.Pk)(),{currentReferences:t,context:n,selectedThreadID:a,customCopilots:i,customCopilotId:r}=e,o=(0,E.b)(),{chatQuotaExceeded:l,reloadQuota:d}=(0,S.x)(),p=o.getSelectedThread(e),h=(0,v.useRef)(null),f=(0,v.useRef)(e.currentTopic),{items:g,previewPaneOpen:_,removeItems:y,openItem:C,updateItem:j,openPreviewPane:N}=(0,x.xx)(),b=(0,c.nu)((0,m.A3)("activePlugin")),P=A(),L=B(),O=u.W.customCopilots,R=O&&(0,k.VR)();(0,k.rj)(),(0,v.useEffect)(()=>{f.current=e.currentTopic},[e.currentTopic]);let D=(0,v.useCallback)((e,t)=>{let n;"issue"===t.type?n=(0,er.SI)(t):"file"===t.type&&(n=(0,er.by)(t)),n&&(j(n),C(n.id),N(),e.preventDefault())},[C,N,j]),M=(0,v.useCallback)(async a=>{if(d(),""===a.trim())return;let i=(0,er.$Z)(g),r=[...t,...i.map(er.QA)];y(i.map(e=>e.id));let s={thread:p,content:a,references:r,topic:f.current,context:n,customInstructions:e.customInstructions,model:e.model,customCopilotId:e.customCopilotId};if(P){let e=await o.continueSharedThread(L);if(e){let{thread:t,messages:n}=e,a=n.at(-1)?.id;await o.sendChatMessage({...s,thread:t,parentMessageId:a})}}else await o.sendChatMessage(s)},[d,P,g,o,p,t,n,e.customInstructions,e.model,e.customCopilotId,y,L]);(0,v.useEffect)(()=>{let e=w.J.getEntrypointMessage();e&&!l&&(w.J.setEntrypointMessage(null),setTimeout(()=>{M(e)},100))},[M,l]);let U=(0,v.useCallback)(()=>{window.setTimeout(()=>{h.current?.focus()},1),d()},[d,h]),$=(0,v.useRef)(null),[V,W]=(0,v.useState)(()=>!!$.current&&$.current.clientWidth<=1024),[F,z]=(0,v.useState)(()=>$.current?$.current.clientWidth>1024&&(w.J.getImmersiveSidebarCollapsedState()??!0):w.J.getImmersiveSidebarCollapsedState()??!0),[H,G]=(0,v.useState)(!1);(0,v.useEffect)(()=>{if(!$.current)return;let e=()=>{let e=$.current?.clientWidth;void 0!==e&&(e<=1024?(W(!0),z(!1)):(W(!1),G(!1),z(w.J.getImmersiveSidebarCollapsedState()??!0)))},t=new ResizeObserver(()=>{e()});return t.observe($.current),e(),()=>{t.disconnect()}},[H]);let K=!!V&&H,q=O&&e.customCopilotId&&!e.selectedThreadID,X=(0,v.useRef)(null),[Q,J]=(0,v.useState)(()=>!!X.current&&X.current.clientWidth<=1280);return(0,v.useEffect)(()=>{if(!X.current)return;let e=()=>{let e=X.current?.clientWidth;void 0!==e&&J(e<=1280)},t=new ResizeObserver(e);return t.observe(X.current),e(),()=>t.disconnect()},[]),(0,s.jsxs)("div",{className:(0,T.$)(is.container,Q&&is.fullscreenPreviewPane),"data-testid":"chat-layout","data-hpc":!0,ref:X,children:[(0,s.jsx)("span",{"data-favicon-override":"/favicons/favicon-copilot.svg"}),(0,s.jsxs)("div",{className:is.left,ref:$,children:[(0,s.jsx)(iw,{isVisible:K,isPinned:!V&&F,isFloating:V,onNewThread:U,onToggle:()=>{if(V)G(!H);else{let e=!F;z(e),w.J.setImmersiveSidebarCollapsedState(e)}}}),(0,s.jsx)("div",{className:is.main,children:R?(0,s.jsx)(iR,{copilotSpaces:i}):(0,s.jsxs)(s.Fragment,{children:[q?(0,s.jsx)(ik,{}):(0,s.jsx)(nc,{}),!e.selectedThreadID&&l?(0,s.jsx)(iu,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:is.content,children:(0,s.jsx)(ir,{isMobile:Q,onSubmit:M},e.selectedThreadID)}),(!P||u.W.copilotDuplicateThread)&&(0,s.jsx)("div",{className:is.footer,children:(0,s.jsx)("div",{className:is.chatInputContainer,children:l?(0,s.jsx)(ic,{}):q?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ei,{}),(0,s.jsx)(I.V,{textAreaRef:h,onSubmit:M,isStreaming:!!e.streamingMessage,size:"large",onClickReference:D,hideAttachmentButton:!!r},a)]})})})]})]})})]}),(0,s.jsx)("div",{className:(0,T.$)(is.previewPane,_&&is.active,b?.widePreviewArea&&is.wide),children:(0,s.jsx)("div",{className:(0,T.$)(is.viewer,b?.widePreviewArea&&is.wide),children:(0,s.jsx)(tj,{returnFocusRef:h})})})]})}try{iB.displayName||(iB.displayName="Layout")}catch{}let iD=/\/copilot\/([^/]+)/;function iM(){let e=L.fV.pathname,t=(0,c.qw)();return(0,v.useMemo)(()=>{let n=e.match(iD);if(!n)return null;let[,a]=n;return a&&t.find(e=>e.id===a)?a:null},[e,t])}let iU=/\/copilot\/spaces\/([^/]+)/;var i$=n(44492);function iV(){(0,v.useEffect)(()=>{(()=>{let e=document.getElementById("serverstats");e&&(e.style.display="none")})()},[]);let e=(0,f.X)();return e?.copilotChatSettingEnabled?(0,s.jsx)(iW,{children:(0,s.jsx)(iF,{})}):(0,s.jsx)(b,{})}function iW({children:e}){let t=(0,f.X)(),n=B(),a=function(){let e=L.fV.pathname;return(0,v.useMemo)(()=>{let t=e.match(iU);if(!t)return null;let[,n]=t;return n??null},[e])}(),i=iM(),{refs:r,topic:o}=(0,v.useMemo)(()=>{let e=t.requestedTopic;return(0,d.P)(e)?{refs:[(0,d.UU)(e)],topic:void 0}:{refs:[],topic:e}},[t.requestedTopic]),l=(0,v.useMemo)(()=>{let e=[];return u.W.pipesPlugin&&e.push(new p.N(t.apiURL,t.graphqlApiUrl,t.ssoOrganizations.map(e=>e.id),t.realIp)),u.W.workbenchPlugin&&e.push(new h.V),e},[t.apiURL,t.graphqlApiUrl,t.realIp,t.ssoOrganizations]);return(0,s.jsx)(g.LB,{children:(0,s.jsx)(c.Hb,{plugins:l,children:(0,s.jsx)(m.Mj,{workerPath:t.searchWorkerFilePath,threadId:n,copilotSpaceId:a,pluginId:i,refs:r,mode:"immersive",topic:o,ssoOrganizations:t.ssoOrganizations,copilotUpsellBannerDismissed:t.copilotUpsellBannerDismissed,copilotChatPayload:t,children:(0,s.jsx)(x.BH,{children:e})})})})}function iF(){return!function(){let e=B(),t=(0,v.useRef)(!0),n=(0,v.useRef)(null),a=(0,E.b)(),{threads:i,selectedThreadID:r}=(0,m.Pk)(),o=A();(0,v.useEffect)(()=>{o?a.fetchSharedThreadMessages(r):a.fetchMessages(r)},[]),(0,v.useEffect)(()=>{if(t.current){t.current=!1,n.current=e;return}if(n.current!==e){if(n.current=e,e===r)return;let t=e&&i?.get(e);a.selectThread(t||null,{includeThreads:!1,clearTopic:!0})}},[a,e,i,r])}(),function(){let{selectedThreadID:e}=(0,m.Pk)(),t=(0,i$.M)((0,P.Zp)());(0,v.useEffect)(()=>{if(!e)return;let n=`${d.Jz}/c/${e}`,a=`${d.Jz}/share/${e}`,i=window.location.pathname;i.startsWith(n)||i.startsWith(a)||t.current(n)},[t,e])}(),function(){let e=(0,E.b)();(0,v.useEffect)(()=>{let t=()=>{window.location.href.includes("/r/")?(e.showTopicPicker(!1),e.selectThread(null)):window.location.href.includes("/c/")||(e.showTopicPicker(!0),e.selectThread(null))};return window.addEventListener("popstate",t),()=>{window.removeEventListener("popstate",t)}},[e])}(),!function(){let e=iM(),{activePlugin:t,selectedThreadID:n}=(0,m.bP)("activePlugin","selectedThreadID"),a=(0,E.b)();(0,v.useEffect)(()=>{n||(t??null)===e||a.selectPlugin(e)},[t,a,e,n])}(),(0,s.jsx)(iB,{})}try{iV.displayName||(iV.displayName="CopilotImmersive")}catch{}try{iW.displayName||(iW.displayName="CopilotImmersiveProviders")}catch{}try{iF.displayName||(iF.displayName="Immersive")}catch{}(0,o.o)("copilot-immersive-v1",()=>({App:l,routes:[(0,r.a)({path:"/copilot",Component:iV,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,r.a)({path:"/copilot/c/:threadID",Component:iV,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,r.a)({path:"/copilot/d/:docsetName",Component:iV}),(0,r.a)({path:"/copilot/r/:owner/:repository",Component:iV}),(0,r.a)({path:"/copilot/share/:threadID",Component:iV}),(0,r.a)({path:"/copilot/pipes",Component:iV,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,r.a)({path:"/copilot/workbench",Component:iV,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,r.a)({path:"/copilot/spaces",Component:iV}),(0,r.a)({path:"/copilot/spaces/:spaceID",Component:iV})]}))},32837:(e,t,n)=>{n.d(t,{B:()=>i});var a=n(96540);function i(e){let[t,n]=(0,a.useState)(e);return[t,(0,a.useCallback)(()=>n(!0),[]),(0,a.useCallback)(()=>n(!1),[])]}},45373:(e,t,n)=>{n.d(t,{N:()=>PipesPlugin});var a,i=n(74848),r=n(21728),o=n(97891),s=n(8932);let l={container:"PipesEmptyState-module__container--fKQnM",description:"PipesEmptyState-module__description--rE6XX"};function c(){let e;let t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("div",{className:l.container,children:[(0,i.jsx)(s.A,{hidden:!0}),(0,i.jsx)("h2",{children:"Welcome to Pipes"}),(0,i.jsx)("p",{className:l.description,children:"Describe a pipe to create."}),(0,i.jsx)(o.h,{})]}),t[0]=e):e=t[0],e}try{c.displayName||(c.displayName="PipesEmptyState")}catch{}var d=n(96540),u=n(37304);let m={value:null,running:!1,pending:!1,progress:0},p={executionState:{nodes:{},iteration:0},uiState:{focusedNodeId:null,hoveredNodeId:null},pipelineState:{pipelines:{},validationErrors:[],selectedPipelineId:null,isUpdating:!1,isLoading:!1}},h=e=>{let t={nodes:new Map,edges:[],layers:[]};if(!e.nodes)return t;for(let n of e.nodes){if(!n?.id)continue;let e=n.id.split("|")[0]??n.id;t.nodes.set(e,n)}for(let n of e.nodes)for(let e of f(n)){let a=g(e);n?.id&&a&&t.edges.push({from:a,to:n.id})}let n=function(e){let t={},n=new Set,a=(i,r=0)=>{try{if(n.has(i))throw Error(`Potential cycle detected at node ${i}`);if(n.add(i),r>100)return!function(...e){}(`Maximum recursion depth reached for node ${i}`),0;if(void 0!==t[i])return t[i];let o=e.nodes.get(i);if(!o)return t[i]=0,0;let s=f(o);if(s&&0!==s.size){let e=[...s].map(e=>{let t=e.split("|")[0]??e;return a(t,r+1)});t[i]=Math.max(...e)+1}else{let n=e.edges.filter(e=>e.from===i).map(e=>e.to);0===n.length?t[i]=-1:t[i]=1}return t[i]}finally{n.delete(i)}};for(let[n]of e.nodes)if(!t[n])try{a(n)}catch(e){t[n]=0}let i=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=i);let r=[];for(let[n,a]of Object.entries(t)){let t=e.nodes.get(n);t&&(r[a]||(r[a]=[]),r[a].push(t))}return r.filter(Boolean)}(t);return t.layers=n,t};function f(e){return new Set((e.content.match(/{{([\w-]+)(?:\|([\w-]+))?}}/g)||[]).map(e=>e.replace(/[{}]/g,"")))}function g(e){return e.split("|")[0]}function v(e,t,n){let a=function e(t,n){let a=new Set(t.edges.filter(e=>e.from===n).map(e=>e.to));for(let n of a)for(let i of e(t,n))a.add(i);return a.add(n),a}(h(e),t);n({type:"CLEAR_NODE_RESULTS",pipelineId:e.id,nodeIds:[...a]})}let x=(e,t)=>{if(!e||"object"!=typeof e||e?.doRemove||!e.title&&!e.description&&!e.content)return null;let n={...e,title:e.title||"",description:e.description||"",type:(e.type||"prompt").trim(),inputType:e.inputType||void 0,content:e.content||"",id:(e.id||"").trim(),doRemove:e.doRemove??!1};if("string"!=typeof n.content&&(n.content=""),"pipeline"===n.type){let e=t.find(e=>e.id===n.pipelineId);if(e){let t=n.pipelineInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};n.pipelineInputValues=e.nodes?.filter(e=>"text"===e.type).map(e=>{let n=t[e.id];if(!n)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:n.nodeId,doMapInput:!!n.doMapInput}})}}return n},_=(e,t)=>({...e,nodes:(e.nodes||[]).map(e=>x(e,t)).filter(e=>null!==e)});function y(e){let t=h(e);return e.nodes.filter(e=>!t.edges.some(t=>t.from===e.id)&&t.edges.some(t=>t.to===e.id))}function C(e){let t=function(e){let t=[];for(let n of("string"!=typeof e.title&&t.push({error:"Pipeline is missing a title",involvedNodes:[]}),Array.isArray(e.nodes)&&0!==e.nodes.length||t.push({error:"Pipeline has no nodes",involvedNodes:[]}),e.nodes))t=t.concat(function(e){let t=[];return("string"!=typeof e.title||0===e.title.length)&&t.push({error:"Node is missing a title",involvedNodes:[e.id]}),"text"===e.type&&(t=t.concat(function(e){let t=[],n=e.inputType;switch("object"==typeof n&&n||t.push({error:"inputType is required for text nodes",involvedNodes:[e.id]}),n.type){case"boolean":["true","false"].includes(e.content)||t.push({error:'A boolean input must have a value of either "true" or "false"',involvedNodes:[e.id]});break;case"range":"number"!=typeof n.min&&t.push({error:"A range input must have a min",involvedNodes:[e.id]}),"number"!=typeof n.max&&t.push({error:"A range input must have a max",involvedNodes:[e.id]});break;case"select":Array.isArray(n.options)&&0!==n.options.length?n.options.includes(e.content)||t.push({error:"A select node must have content equal to one of its options",involvedNodes:[e.id]}):t.push({error:"A select input must have options",involvedNodes:[e.id]});break;case"file":["pdf","video","image","audio","document","code","other"].includes(n.fileType)||t.push({error:`Invalid file type ${n.fileType}`,involvedNodes:[e.id]})}return t}(e))),t}(n));return t}(e),n=h(e);for(let a of n.edges){let n=e.nodes.find(e=>e.id===a.from),i=e.nodes.find(e=>e.id===a.to);n&&i||t.push({error:`Node ${a.to} references a nonexistent node {{${a.from}}}`,involvedNodes:[a.to]})}let a=function(e){let t=new Set,n=new Set,a=[],i=r=>{if(n.has(r)){let e=a.indexOf(r);return a.slice(e)}if(t.has(r))return null;for(let o of(t.add(r),n.add(r),a.push(r),e.edges))if(o.from===r){let e=i(o.to);if(e)return e}return n.delete(r),a.pop(),null};for(let n of e.nodes.values())if(!t.has(n.id)){let e=i(n.id);if(e)return e}return null}(n);if(a&&a.length>0){let e=[...a,a[0]];t.push({error:`Pipeline contains a cycle: ${e.join(" \u2192 ")}`,involvedNodes:a})}let i=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let n=new Set,a=t=>{for(let i of(n.add(t),e.edges))i.from!==t||n.has(i.to)||a(i.to),i.to!==t||n.has(i.from)||a(i.from)};return a(t[0].id),t.filter(e=>!n.has(e.id)).map(e=>e.id)}(n);return i.length>0&&t.push({error:`Pipeline contains unreachable nodes: ${i.join(", ")}`,involvedNodes:i}),t}function j(e,t){return{...e,executionState:function(e,t){switch(t.type){case"RESTORE_EXECUTION_STATE":return{...t.executionState,nodes:Object.fromEntries(Object.entries(t.executionState.nodes).map(([e,t])=>[e,{...m,value:t.value,error:t.error}]))};case"CLEAR_NODE_RESULTS":{let n={...e.nodes};for(let e of t.nodeIds)delete n[e];return{...e,nodes:n}}case"SET_RUNNING":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??m,running:t.running}}};case"SET_PENDING":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??m,pending:t.pending}}};case"UPDATE_PROGRESS":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??m,progress:t.progress}}};case"UPDATE_NODE_VALUE":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??m,value:t.value}}};case"UPDATE_NODE_ERROR":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??m,error:t.error,value:null,running:!1}}};case"CLEAR_PENDING_NODES":if(t.iteration!==e.iteration)return e;return{...e,nodes:Object.fromEntries(Object.entries(e.nodes).map(([e,t])=>[e,{...t,pending:!1}]))};case"CANCEL_EXECUTION":if(t.iteration!==e.iteration)return e;return{...e,nodes:{}};case"INCREMENT_ITERATION":return{...e,iteration:e.iteration+1};default:return e}}(e.executionState,t),uiState:function(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};default:return e}}(e.uiState,t),pipelineState:function(e,t){switch(t.type){case"INITIALIZE_PIPELINES":{let n=t.pipelines.find(t=>t.id===e.selectedPipelineId),a=n?C(n):[];return{...e,validationErrors:a,pipelines:t.pipelines.reduce((e,t)=>({...e,[t.id]:t}),{}),isLoading:!1}}case"SELECT_PIPELINE":{if(null===t.pipelineId)return{...e,selectedPipelineId:null};let n=e.pipelines[t.pipelineId];if(!n)return e;return{...e,selectedPipelineId:t.pipelineId,validationErrors:C(n)}}case"SET_IS_UPDATING":return{...e,isUpdating:t.updating};case"ADD_PIPELINE":return{...e,pipelines:{...e.pipelines,[t.pipeline.id]:t.pipeline},selectedPipelineId:t.pipeline.id,validationErrors:C(t.pipeline)};case"REMOVE_PIPELINE":{let n={...e.pipelines};delete n[t.pipelineId];let a=e.selectedPipelineId===t.pipelineId?e.pipelines[0]?.id??null:e.selectedPipelineId,i=a?e.pipelines[a]:null,r=i?C(i):[];return{...e,pipelines:n,validationErrors:r,selectedPipelineId:a}}case"UPDATE_PIPELINE":case"ADD_NODE_TO_PIPELINE":case"UPDATE_PIPELINE_NODE":case"UPDATE_NODE":case"UPDATE_NODE_CONTENT":case"REMOVE_NODE":{let n=e.pipelines[t.pipelineId];if(!n)return e;let a=function(e,t){switch(t.type){case"ADD_NODE_TO_PIPELINE":return{...e,nodes:[...e.nodes??[],t.node]};case"REMOVE_NODE":return{...e,nodes:e.nodes.filter(e=>e.id!==t.nodeId)};case"UPDATE_NODE":{let n=e.nodes.findIndex(e=>e.id===t.nodeId);if(-1===n)return{...e,nodes:[...e.nodes,{id:t.nodeId,type:"text",title:"",description:"",content:"",...t.updates}]};if(t.updates.doRemove)return{...e,nodes:[...e.nodes.slice(0,n),...e.nodes.slice(n+1)]};{let a=e.nodes[n];return{...e,nodes:[...e.nodes.slice(0,n),{...a,...t.updates},...e.nodes.slice(n+1)]}}}case"UPDATE_PIPELINE_NODE":{let n=e.nodes.findIndex(e=>e.id===t.nodeId);if(-1===n)return e;let a=x({...e.nodes[n],...t.updates},[]);if(!a)return e;return{...e,nodes:[...e.nodes.slice(0,n),a,...e.nodes.slice(n+1)]}}case"UPDATE_NODE_CONTENT":{let n=e.nodes.findIndex(e=>e.id===t.nodeId);if(-1===n)return e;let a=e.nodes[n];return{...e,nodes:[...e.nodes.slice(0,n),{...a,content:t.content},...e.nodes.slice(n+1)]}}case"UPDATE_PIPELINE":return _({...e,...t.updates},[]);default:return e}}(n,t),i=C(a);return{...e,validationErrors:i,pipelines:{...e.pipelines,[n.id]:a}}}default:return e}}(e.pipelineState,t)}}var N=n(10124),b=n(38568);let I=(0,d.createContext)(new u.Lj(p)),S=(0,d.createContext)(()=>{});function w({children:e}){let[t,n]=(0,d.useReducer)(j,p),a=(0,N.AI)(t);(0,b.N)(()=>{a.value=t},[t,a]);let r=(0,d.useCallback)(e=>{n(e)},[n]);return(0,i.jsx)(I.Provider,{value:a,children:(0,i.jsx)(S.Provider,{value:r,children:e})})}function E(e){let t=(0,d.useContext)(I);if(!t)throw Error("usePipesStateLens can only be used inside a PipesProvider");let n=(0,N.Sk)(t,e);return(0,N.HN)(n)}function k(){let e;let t=(0,r.c)(2),n=(0,d.useContext)(I);if(!n)throw Error("useGetPipesState can only be used inside a PipesProvider");return t[0]!==n.value?(e=()=>n.value,t[0]=n.value,t[1]=e):e=t[1],e}function T(){return(0,d.useContext)(S)}try{I.displayName||(I.displayName="PipesStateContext")}catch{}try{S.displayName||(S.displayName="PipesDispatchContext")}catch{}try{w.displayName||(w.displayName="PipesStateProvider")}catch{}function P(e){let t;if(e.pipelineState.selectedPipelineId&&(t=e.pipelineState.pipelines[e.pipelineState.selectedPipelineId]))return t;let[n]=Object.values(e.pipelineState.pipelines);return n}let A=e=>t=>{let n=P(t);return n?.nodes.find(t=>t.id===e)};function L(e){return E(t=>A(e)(t)?.type??"text")}function O(e){return E(t=>!!t.pipelineState.validationErrors.find(t=>!e||t.involvedNodes.includes(e)))}let R=e=>t=>t.executionState.nodes[e];function B(){let e=E(P);if(!e)throw Error("useCurrentPipeline should only be used in a context where we are guaranteed to have a pipeline");return e}function D(e){return E(t=>R(e)(t)?.value??null)}function M(e){return E(t=>R(e)(t)?.error)}function U(e){return E(t=>R(e)(t)?.running??!1)}let $={container:"PillBoxNode-module__container--U_nbs",textNode:"PillBoxNode-module__textNode--ttDcG",node:"PillBoxNode-module__node--xYGr1",mainContent:"PillBoxNode-module__mainContent--HNIsg",nodeIdBox:"PillBoxNode-module__nodeIdBox--kFePg",headerContainer:"PillBoxNode-module__headerContainer--eplc6",nodeMarker:"PillBoxNode-module__nodeMarker--C4_ch",nodeConnection:"PillBoxNode-module__nodeConnection--tCwm1"};var V=n(20053);let W={container:"PillBoxNodeHeader-module__container--rcEoG",mainContent:"PillBoxNodeHeader-module__mainContent--KlYdi",isLoading:"PillBoxNodeHeader-module__isLoading--Hf_n4",titleAndDescriptionContainer:"PillBoxNodeHeader-module__titleAndDescriptionContainer--pWbUU",collapsed:"PillBoxNodeHeader-module__collapsed--IqkQg",titleContainer:"PillBoxNodeHeader-module__titleContainer--ddXxm",title:"PillBoxNodeHeader-module__title--BgQFs",descriptionContainer:"PillBoxNodeHeader-module__descriptionContainer--BxTJE",description:"PillBoxNodeHeader-module__description--cq21N",executeButton:"PillBoxNodeHeader-module__executeButton--BfvMr"};var F=n(38621);let z={executeButton:"ExecuteButton-module__executeButton--DJRZd",loading:"ExecuteButton-module__loading--vDJK8"};var H=n(87330);function G(e){let t,n,a,o;let s=(0,r.c)(17),{type:l,value:c,className:d,isLoading:u,onClick:m,onStop:p,variant:h}=e,f=void 0===h?"invisible":h;s[0]!==u||s[1]!==l||s[2]!==c?(t=()=>u?"Loading...":"code"===l?"Evaluate":c?"Re-generate output":"Generate output",s[0]=u,s[1]=l,s[2]=c,s[3]=t):t=s[3];let g=t(),v=u?z.loading:"";s[4]!==d||s[5]!==v?(n=(0,V.$)(d,z.executeButton,v),s[4]=d,s[5]=v,s[6]=n):n=s[6];let x=u?F.SquareFillIcon:F.IssueReopenedIcon;return s[7]!==u||s[8]!==m||s[9]!==p?(a=e=>{u?p?.(e):m(e)},s[7]=u,s[8]=m,s[9]=p,s[10]=a):a=s[10],s[11]!==g||s[12]!==n||s[13]!==x||s[14]!==a||s[15]!==f?(o=(0,i.jsx)(H.K,{"aria-label":g,className:n,icon:x,onClick:a,variant:f}),s[11]=g,s[12]=n,s[13]=x,s[14]=a,s[15]=f,s[16]=o):o=s[16],o}try{G.displayName||(G.displayName="ExecuteButton")}catch{}let K={view:"EditableText-module__view--dZPEk",input:"EditableText-module__input--namFN"};var q=n(67138);function X(e){let t,n,a;let o=(0,r.c)(14),{value:s,className:l,isEditable:c,onChange:d,onClick:u}=e;o[0]!==d?(t=e=>{d(e.target.value)},o[0]=d,o[1]=t):t=o[1];let m=t;if(!(void 0===c||c)){let e,t;return o[2]!==l?(e=(0,V.$)(K.view,l),o[2]=l,o[3]=e):e=o[3],o[4]!==e||o[5]!==s?(t=(0,i.jsx)("div",{className:e,children:s}),o[4]=e,o[5]=s,o[6]=t):t=o[6],t}return o[7]!==l?(n=(0,V.$)(K.input,l),o[7]=l,o[8]=n):n=o[8],o[9]!==m||o[10]!==u||o[11]!==n||o[12]!==s?(a=(0,i.jsx)(q.A,{type:"text",value:s,onChange:m,onClick:u,className:n}),o[9]=m,o[10]=u,o[11]=n,o[12]=s,o[13]=a):a=o[13],a}try{X.displayName||(X.displayName="EditableText")}catch{}let Q={code:{icon:F.CodeIcon,label:"Code",color:"fgColor-accent",contentFields:["content"]},text:{icon:F.TypographyIcon,label:"Text",color:"fgColor-success",contentFields:["content"]},prompt:{icon:F.LogIcon,label:"Prompt",color:"fgColor-attention",contentFields:["content"]},visualize:{icon:F.GitBranchIcon,label:"Visualize",color:"fgColor-done",contentFields:["content"]},"github-graphql":{icon:F.MarkGithubIcon,label:"GitHub GraphQL",color:"fgColor-severe",contentFields:["content"]},pipeline:{icon:F.GitPullRequestIcon,label:"Pipeline",color:"fgColor-default",contentFields:["content"]}},J={typePicker:"NodeType-module__typePicker--o6QKw"};function Y(e){let t,n,a,o;let s=(0,r.c)(12),{type:l,className:c,size:d}=e,u=void 0===d?"medium":d,m=Q[l],p=m?.color,h=m?.icon,f="small"===u?10:"large"===u?24:16;return s[0]!==c?(t=(0,V.$)(J.typePicker,c),s[0]=c,s[1]=t):t=s[1],s[2]!==f?(n={height:f,width:f},s[2]=f,s[3]=n):n=s[3],s[4]!==h||s[5]!==p||s[6]!==f?(a=(0,i.jsx)(h,{size:f,className:p}),s[4]=h,s[5]=p,s[6]=f,s[7]=a):a=s[7],s[8]!==t||s[9]!==n||s[10]!==a?(o=(0,i.jsx)("div",{className:t,style:n,children:a}),s[8]=t,s[9]=n,s[10]=a,s[11]=o):o=s[11],o}try{Y.displayName||(Y.displayName="NodeType")}catch{}function Z(e){let t,n,a,o,s,l,c,d,u,m,p,h;let f=(0,r.c)(39),{isCollapsed:g,nodeId:v,onNodeUpdate:x,onStop:_,onToggleExpand:y,onUpdate:C}=e,j=D(v),N=U(v),b=E(A(v));if(!b)return null;f[0]!==g||f[1]!==y?(t=()=>y(!g),f[0]=g,f[1]=y,f[2]=t):t=f[2];let I=N&&W.isLoading;f[3]!==I?(n=(0,V.$)(W.mainContent,I),f[3]=I,f[4]=n):n=f[4],f[5]!==b.type?(a=(0,i.jsx)(Y,{type:b.type}),f[5]=b.type,f[6]=a):a=f[6];let S=g&&W.collapsed;f[7]!==S?(o=(0,V.$)(W.titleAndDescriptionContainer,S),f[7]=S,f[8]=o):o=f[8],f[9]!==C?(s=e=>{C({title:e})},f[9]=C,f[10]=s):s=f[10];let w=!g;f[11]!==b.title||f[12]!==s||f[13]!==w?(l=(0,i.jsx)("div",{className:W.titleContainer,children:(0,i.jsx)(X,{className:W.title,value:b.title,onChange:s,onClick:et,isEditable:w})}),f[11]=b.title,f[12]=s,f[13]=w,f[14]=l):l=f[14],f[15]!==C?(c=e=>{C({description:e})},f[15]=C,f[16]=c):c=f[16];let k=!g;return f[17]!==b.description||f[18]!==c||f[19]!==k?(d=(0,i.jsx)("div",{className:W.descriptionContainer,children:(0,i.jsx)(X,{className:W.description,value:b.description,onChange:c,onClick:ee,isEditable:k})}),f[17]=b.description,f[18]=c,f[19]=k,f[20]=d):d=f[20],f[21]!==d||f[22]!==o||f[23]!==l?(u=(0,i.jsxs)("div",{className:o,children:[l,d]}),f[21]=d,f[22]=o,f[23]=l,f[24]=u):u=f[24],f[25]!==N||f[26]!==b.type||f[27]!==x||f[28]!==_||f[29]!==j?(m=["prompt","code","pdf","pipeline","github-graphql"].includes(b.type)&&(0,i.jsx)(G,{onClick:e=>{e.stopPropagation(),x()},onStop:e=>{e.stopPropagation(),_(e)},isLoading:N,type:b.type,value:j,className:W.executeButton}),f[25]=N,f[26]=b.type,f[27]=x,f[28]=_,f[29]=j,f[30]=m):m=f[30],f[31]!==u||f[32]!==m||f[33]!==n||f[34]!==a?(p=(0,i.jsxs)("div",{className:n,children:[a,u,m]}),f[31]=u,f[32]=m,f[33]=n,f[34]=a,f[35]=p):p=f[35],f[36]!==t||f[37]!==p?(h=(0,i.jsx)("div",{className:W.container,onClick:t,children:p}),f[36]=t,f[37]=p,f[38]=h):h=f[38],h}function ee(e){return e.stopPropagation()}function et(e){return e.stopPropagation()}try{Z.displayName||(Z.displayName="PillBoxNodeHeader")}catch{}var en=n(15294),ea=n(39519);let ei={container:"ExpandedPillBoxContent-module__container--tVc8Y",innerContainer:"ExpandedPillBoxContent-module__innerContainer--dqR4u",nodeContent:"ExpandedPillBoxContent-module__nodeContent--eod9o",divider:"ExpandedPillBoxContent-module__divider--SW_Vg",outputContainer:"ExpandedPillBoxContent-module__outputContainer--xs5q6",loading:"ExpandedPillBoxContent-module__loading--wPt8F",errorContainer:"ExpandedPillBoxContent-module__errorContainer--sPDDe",errorNotice:"ExpandedPillBoxContent-module__errorNotice--RM3rl",errorIcon:"ExpandedPillBoxContent-module__errorIcon--utMqB",errorText:"ExpandedPillBoxContent-module__errorText--_kZYq",nodeValue:"ExpandedPillBoxContent-module__nodeValue--DHojA",output:"ExpandedPillBoxContent-module__output--g9TNs",executeButton:"ExpandedPillBoxContent-module__executeButton--sLTeI"};var er=n(65607),eo=n(24743);let es={rangeValue:"NodeInput-module__rangeValue--jF9D8",rangeContainer:"NodeInput-module__rangeContainer--XWWkV",rangeLabels:"NodeInput-module__rangeLabels--Ql0V8",rangeLabel:"NodeInput-module__rangeLabel--h0PRb",booleanContainer:"NodeInput-module__booleanContainer--nl89V",fileContainer:"NodeInput-module__fileContainer--HDbuc"};var el=n(58748);let ec={container:"ContentEditor-module__container--iTuJD",input:"ContentEditor-module__input--YWgBZ"};var ed=n(70255),eu=n(8338);function em(e){let t,n,a,o;let s=(0,r.c)(9);return s[0]!==e?({node:t,...n}=e,s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),s[3]!==t.description?(a=(0,i.jsx)(eu.l.Description,{children:t.description}),s[3]=t.description,s[4]=a):a=s[4],s[5]!==t.id||s[6]!==n||s[7]!==a?(o=(0,d.createElement)(eu.l.Item,{...n,key:t.id,children:[t.id,a]}),s[5]=t.id,s[6]=n,s[7]=a,s[8]=o):o=s[8],o}function ep(e){let t,n,a,o;let s=(0,r.c)(8),{children:l}=e,c=E(ef),[u,m]=(0,d.useState)(null);s[0]!==c?(t=async e=>{let{query:t}=e;m(c.filter(e=>e.id.startsWith(t)).map(eh))},s[0]=c,s[1]=t):t=s[1];let p=t;s[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{m(null)},s[2]=n):n=s[2];let h=n;return s[3]===Symbol.for("react.memo_cache_sentinel")?(a=[{triggerChar:"@",keepTriggerCharOnCommit:!1,insertSpaceOnCommit:!1}],s[3]=a):a=s[3],s[4]!==l||s[5]!==p||s[6]!==u?(o=(0,i.jsx)(ed.a,{fullWidth:!0,suggestions:u,triggers:a,tabInsertsSuggestions:!1,onHideSuggestions:h,onShowSuggestions:p,children:l}),s[4]=l,s[5]=p,s[6]=u,s[7]=o):o=s[7],o}function eh(e){return{value:`{{${e.id}}}`,render:t=>(0,i.jsx)(em,{node:e,...t})}}function ef(e){return P(e)?.nodes??[]}try{em.displayName||(em.displayName="NodeSuggestion")}catch{}try{ep.displayName||(ep.displayName="Autocomplete")}catch{}var eg=n(55516);let ev=e=>{let t,n,a,o;let s=(0,r.c)(12),{className:l,content:c,onUpdate:u,placeholder:m}=e,p=void 0===m?"Enter a prompt":m,h=function(e){let t,n,a,i,o;let s=(0,r.c)(9),l=(0,d.useRef)(null);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=function(){if(!l.current)return;l.current.style.height="0";let e=Math.min(l.current.scrollHeight,200);l.current.style.height=`${e}px`},s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n={leading:!0},s[1]=n):n=s[1];let c=(0,eg.d)(t,50,n);return s[2]!==c?(a=()=>{c()},s[2]=c,s[3]=a):a=s[3],s[4]!==c||s[5]!==e?(i=[l,e,c],s[4]=c,s[5]=e,s[6]=i):i=s[6],(0,b.N)(a,i),s[7]!==c?(o=()=>c(),s[7]=c,s[8]=o):o=s[8],(0,el.w)(o),l}(c);return s[0]!==l?(t=(0,V.$)(ec.container,l),s[0]=l,s[1]=t):t=s[1],s[2]!==u?(n=e=>u?.(e.target.value),s[2]=u,s[3]=n):n=s[3],s[4]!==c||s[5]!==p||s[6]!==n||s[7]!==h?(a=(0,i.jsx)(ep,{children:(0,i.jsx)("textarea",{ref:h,className:ec.input,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",onChange:n,placeholder:p,value:c})}),s[4]=c,s[5]=p,s[6]=n,s[7]=h,s[8]=a):a=s[8],s[9]!==t||s[10]!==a?(o=(0,i.jsx)("form",{className:t,children:a}),s[9]=t,s[10]=a,s[11]=o):o=s[11],o};try{ev.displayName||(ev.displayName="ContentEditor")}catch{}let ex=e=>{let t=(0,r.c)(50),{nodeId:n,onChange:a,className:o}=e,s=E(A(n));if(!s||"text"!==s.type)return null;switch(s.inputType.type){case"range":{let e,n,r,l,c,d,u;t[0]!==s.content?(e=(0,i.jsx)("div",{className:es.rangeValue,children:s.content}),t[0]=s.content,t[1]=e):e=t[1];let m=s.content||"0";return t[2]!==a?(n=e=>a(e.target.value),t[2]=a,t[3]=n):n=t[3],t[4]!==o||t[5]!==s.inputType.max||t[6]!==s.inputType.min||t[7]!==m||t[8]!==n?(r=(0,i.jsx)("div",{className:es.rangeContainer,children:(0,i.jsx)("input",{type:"range",value:m,min:s.inputType.min,max:s.inputType.max,onChange:n,className:o})}),t[4]=o,t[5]=s.inputType.max,t[6]=s.inputType.min,t[7]=m,t[8]=n,t[9]=r):r=t[9],t[10]!==s.inputType.min?(l=(0,i.jsx)("div",{className:es.rangeLabel,children:s.inputType.min}),t[10]=s.inputType.min,t[11]=l):l=t[11],t[12]!==s.inputType.max?(c=(0,i.jsx)("div",{className:es.rangeLabel,children:s.inputType.max}),t[12]=s.inputType.max,t[13]=c):c=t[13],t[14]!==l||t[15]!==c?(d=(0,i.jsxs)("div",{className:es.rangeLabels,children:[l,c]}),t[14]=l,t[15]=c,t[16]=d):d=t[16],t[17]!==e||t[18]!==r||t[19]!==d?(u=(0,i.jsxs)("div",{children:[e,r,d]}),t[17]=e,t[18]=r,t[19]=d,t[20]=u):u=t[20],u}case"boolean":{let e,n;let r="true"===s.content;return t[21]!==a?(e=e=>a(e.target.checked.toString()),t[21]=a,t[22]=e):e=t[22],t[23]!==o||t[24]!==r||t[25]!==e?(n=(0,i.jsx)("div",{className:es.booleanContainer,children:(0,i.jsx)(er.A,{checked:r,onChange:e,className:o})}),t[23]=o,t[24]=r,t[25]=e,t[26]=n):n=t[26],n}case"select":{let e,n,r;return t[27]!==a?(e=e=>a(e.target.value),t[27]=a,t[28]=e):e=t[28],t[29]!==s.inputType.options?(n=s.inputType.options?.map(e_),t[29]=s.inputType.options,t[30]=n):n=t[30],t[31]!==o||t[32]!==s.content||t[33]!==e||t[34]!==n?(r=(0,i.jsx)("div",{children:(0,i.jsx)(eo.A,{value:s.content,onChange:e,className:o,children:n})}),t[31]=o,t[32]=s.content,t[33]=e,t[34]=n,t[35]=r):r=t[35],r}case"file":{let e,n,r,l;let c=s.content;return t[36]!==s.inputType.fileType?(e=function(e){switch(e){case"pdf":return".pdf";case"image":return"image/*";case"video":return"video/*";case"audio":return"audio/*";case"document":return".doc,.docx,.txt,.rtf";case"code":return".js,.jsx,.ts,.tsx,.py,.java,.cpp,.c,.h,.cs";default:return"*/*"}}(s.inputType.fileType),t[36]=s.inputType.fileType,t[37]=e):e=t[37],t[38]!==a?(n=e=>{let t=e.target.files?.[0];t&&a(t.name)},t[38]=a,t[39]=n):n=t[39],t[40]!==o?(r=(0,V.$)(o,es.fileContainer),t[40]=o,t[41]=r):r=t[41],t[42]!==s.content||t[43]!==e||t[44]!==n||t[45]!==r?(l=(0,i.jsx)("div",{children:(0,i.jsx)(q.A,{type:"file",value:c,accept:e,onChange:n,className:r})}),t[42]=s.content,t[43]=e,t[44]=n,t[45]=r,t[46]=l):l=t[46],l}default:{let e;return t[47]!==s.content||t[48]!==a?(e=(0,i.jsx)(ev,{content:s.content,onUpdate:a,placeholder:"Enter value"}),t[47]=s.content,t[48]=a,t[49]=e):e=t[49],e}}};try{ex.displayName||(ex.displayName="NodeInput")}catch{}function e_(e){return(0,i.jsx)(eo.A.Option,{value:e,children:e},e)}let ey={container:"NodeContent-module__container--xY0B3",previewContent:"NodeContent-module__previewContent--VUwKx",collapsed:"NodeContent-module__collapsed--vy3YY",expanded:"NodeContent-module__expanded--pfDqM",previewOverlay:"NodeContent-module__previewOverlay--OqAqo",visible:"NodeContent-module__visible--lahcO",nodeInput:"NodeContent-module__nodeInput--myPJN",nodeContent:"NodeContent-module__nodeContent--IANQk",actions:"NodeContent-module__actions--AS7T_"};var eC=n(55847);function ej(e){let t,n,a,o,s,l,c,u,m,p,h,f,g;let v=(0,r.c)(38),{additionalFields:x,nodeId:_,isContentVisible:y,onToggleContent:C,onUpdate:j}=e,N=E(e=>A(_)(e)?.content??""),[b,I]=(0,d.useState)(N);v[0]!==y||v[1]!==C?(t=()=>y&&C?.(),v[0]=y,v[1]=C,v[2]=t):t=v[2];let S=t;v[3]!==y||v[4]!==C?(n=()=>!y&&C?.(),v[3]=y,v[4]=C,v[5]=n):n=v[5];let w=n;v[6]!==S||v[7]!==w?(a={onBlur:S,onFocus:w},v[6]=S,v[7]=w,v[8]=a):a=v[8];let{ref:k}=function(e){let t,n,a,i,o;let s=(0,r.c)(10),{onBlur:l,onFocus:c}=e,[u,m]=(0,d.useState)(!1),p=(0,d.useRef)(null);s[0]!==c?(t=e=>{m(!0),c?.(e)},s[0]=c,s[1]=t):t=s[1];let h=t;s[2]!==l?(n=e=>{e.currentTarget instanceof HTMLElement&&e.relatedTarget instanceof HTMLElement&&e.currentTarget.contains(e.relatedTarget)||(m(!1),l?.(e))},s[2]=l,s[3]=n):n=s[3];let f=n;return s[4]!==h||s[5]!==f?(a=()=>{let e=p.current;if(e)return e.addEventListener("focusin",h),e.addEventListener("focusout",f),()=>{e.removeEventListener("focusin",h),e.removeEventListener("focusout",f)}},i=[h,f],s[4]=h,s[5]=f,s[6]=a,s[7]=i):(a=s[6],i=s[7]),(0,d.useEffect)(a,i),s[8]!==u?(o={ref:p,isFocused:u},s[8]=u,s[9]=o):o=s[9],o}(a),T=y?ey.expanded:ey.collapsed;v[9]!==T?(o=(0,V.$)(ey.previewContent,T),v[9]=T,v[10]=o):o=v[10];let P=y?void 0:C,L=!y&&ey.visible;return v[11]!==L?(s=(0,V.$)(ey.previewOverlay,L),v[11]=L,v[12]=s):s=v[12],v[13]!==s?(l=(0,i.jsx)("div",{className:s}),v[13]=s,v[14]=l):l=v[14],v[15]===Symbol.for("react.memo_cache_sentinel")?(c=e=>I(e),v[15]=c):c=v[15],v[16]!==b?(u=(0,i.jsx)(ev,{content:b,onUpdate:c}),v[16]=b,v[17]=u):u=v[17],v[18]!==N||v[19]!==C?(m=(0,i.jsx)(eC.Q,{onClick:()=>{C?.(),I(N)},children:"Cancel"}),v[18]=N,v[19]=C,v[20]=m):m=v[20],v[21]!==b||v[22]!==C||v[23]!==j?(p=(0,i.jsx)(eC.Q,{onClick:()=>{C?.(),j({content:b})},variant:"primary",children:"Save"}),v[21]=b,v[22]=C,v[23]=j,v[24]=p):p=v[24],v[25]!==m||v[26]!==p?(h=(0,i.jsxs)("span",{className:ey.actions,children:[m,p]}),v[25]=m,v[26]=p,v[27]=h):h=v[27],v[28]!==x||v[29]!==u||v[30]!==h||v[31]!==o||v[32]!==P||v[33]!==l?(f=(0,i.jsxs)("div",{className:o,onClick:P,children:[l,x,u,h]}),v[28]=x,v[29]=u,v[30]=h,v[31]=o,v[32]=P,v[33]=l,v[34]=f):f=v[34],v[35]!==k||v[36]!==f?(g=(0,i.jsx)("div",{ref:k,className:ey.container,children:f}),v[35]=k,v[36]=f,v[37]=g):g=v[37],g}try{ej.displayName||(ej.displayName="DefaultNodeContent")}catch{}var eN=n(91582),eb=n(65615);function eI(e){let t,n,a;let o=(0,r.c)(9),{onUpdateModel:s,selectedModelName:l}=e,c=(0,eb.A3)("availableModels");o[0]!==c||o[1]!==l?(t=c?.find(e=>e.id===l),o[0]=c,o[1]=l,o[2]=t):t=o[2];let d=t;o[3]!==s?(n=e=>{s(e.id)},o[3]=s,o[4]=n):n=o[4];let u=n;return c&&d?(o[5]!==c||o[6]!==u||o[7]!==d?(a=(0,i.jsx)(eN.k,{models:c,selectedModel:d,onModelPicked:u,disabled:!1,type:"global"}),o[5]=c,o[6]=u,o[7]=d,o[8]=a):a=o[8],a):null}try{eI.displayName||(eI.displayName="ModelPicker")}catch{}var eS=n(27297);function ew(e){let t,n,a,o,s,l;let c=(0,r.c)(15);c[0]!==e?({node:t,onUpdate:n,...a}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=a):(t=c[1],n=c[2],a=c[3]),c[4]!==t||c[5]!==n?(o=e=>{n({...t,model:e})},c[4]=t,c[5]=n,c[6]=o):o=c[6];let d=o,u=eS.UB.id,m=t.model??u;return c[7]!==d||c[8]!==m?(s=(0,i.jsx)("div",{children:(0,i.jsx)(eI,{selectedModelName:m,onUpdateModel:d})}),c[7]=d,c[8]=m,c[9]=s):s=c[9],c[10]!==t.id||c[11]!==n||c[12]!==a||c[13]!==s?(l=(0,i.jsx)(ej,{additionalFields:s,nodeId:t.id,onUpdate:n,...a}),c[10]=t.id,c[11]=n,c[12]=a,c[13]=s,c[14]=l):l=c[14],l}try{ew.displayName||(ew.displayName="PromptNodeContent")}catch{}let eE=e=>{let t,n;let a=(0,r.c)(12),{nodeId:o,onUpdate:s}=e,l=E(A(o));if(!l)return null;switch(l.type){case"text":{let e,n;a[0]!==s?(e=e=>{s({content:e})},a[0]=s,a[1]=e):e=a[1],a[2]!==o||a[3]!==e?(n=(0,i.jsx)(ex,{nodeId:o,onChange:e,className:ey.nodeInput}),a[2]=o,a[3]=e,a[4]=n):n=a[4],t=n;break}case"prompt":{let n;a[5]!==l||a[6]!==e?(n=(0,i.jsx)(ew,{...e,node:l}),a[5]=l,a[6]=e,a[7]=n):n=a[7],t=n;break}case"pipeline":t=null;break;default:{let n;a[8]!==e?(n=(0,i.jsx)(ej,{...e}),a[8]=e,a[9]=n):n=a[9],t=n}}return a[10]!==t?(n=(0,i.jsx)("div",{className:ey.nodeContent,children:t}),a[10]=t,a[11]=n):n=a[11],n};try{eE.displayName||(eE.displayName="NodeContent")}catch{}function ek(e){let t,n,a,o;let s=(0,r.c)(20),{isCollapsed:l,isContentVisible:c,isOutput:d,nodeId:u,onNodeUpdate:m,onStop:p,onToggleContent:h,onUpdate:f,pipelineId:g}=e,v=D(u),x=M(u),_=U(u),y=L(u);return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,V.$)(ei.container,"group/card"),s[0]=t):t=s[0],s[1]!==l||s[2]!==c||s[3]!==_||s[4]!==u||s[5]!==h||s[6]!==f||s[7]!==g?(n=(0,i.jsx)("div",{className:ei.nodeContent,children:(0,i.jsx)(eE,{nodeId:u,pipelineId:g,isContentVisible:c,isCollapsed:l,isLoading:_,onUpdate:f,onToggleContent:h})}),s[1]=l,s[2]=c,s[3]=_,s[4]=u,s[5]=h,s[6]=f,s[7]=g,s[8]=n):n=s[8],s[9]!==d||s[10]!==_||s[11]!==x||s[12]!==y||s[13]!==v||s[14]!==m||s[15]!==p?(a=["prompt","code","pdf","pipeline","github-graphql"].includes(y)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:ei.divider}),(0,i.jsxs)("div",{className:ei.outputContainer,children:[(0,i.jsx)(G,{onClick:e=>{e.stopPropagation(),m()},onStop:e=>{e.stopPropagation(),p(e)},isLoading:_,type:y,value:v,className:ei.executeButton}),_&&!v?(0,i.jsx)("div",{className:ei.loading,children:(0,i.jsx)(ea.r,{lines:3})}):x?(0,i.jsxs)("div",{className:ei.errorContainer,children:[(0,i.jsxs)("div",{className:ei.errorNotice,children:[(0,i.jsx)(F.AlertIcon,{className:ei.errorIcon}),"Oops, we hit an error"]}),(0,i.jsx)("p",{className:ei.errorText,children:x})]}):v?(0,i.jsx)("div",{className:(0,V.$)(ei.nodeValue,d&&ei.output),children:"github-graphql"===y?(0,i.jsx)("pre",{style:{maxHeight:300,overflow:"auto",paddingTop:16,paddingBottom:16,paddingLeft:32,paddingRight:32},children:v.toString()}):(0,i.jsx)("div",{style:{paddingTop:16,paddingBottom:16,paddingLeft:32,paddingRight:32},children:(0,i.jsx)(en.To,{markdown:v.toString()??""})})}):null]})]}),s[9]=d,s[10]=_,s[11]=x,s[12]=y,s[13]=v,s[14]=m,s[15]=p,s[16]=a):a=s[16],s[17]!==n||s[18]!==a?(o=(0,i.jsx)("div",{className:t,children:(0,i.jsxs)("div",{className:ei.innerContainer,children:[n,a]})}),s[17]=n,s[18]=a,s[19]=o):o=s[19],o}try{ek.displayName||(ek.displayName="ExpandedPillBoxContent")}catch{}let eT={container:"CollapsedPillBoxContent-module__container--XL58w",errorContainer:"CollapsedPillBoxContent-module__errorContainer--UV5bX",iconContainer:"CollapsedPillBoxContent-module__iconContainer--JVtkr",errorText:"CollapsedPillBoxContent-module__errorText--_o8T6"};function eP(e){let t,n;let a=(0,r.c)(6),{nodeId:o}=e,s=M(o),l=D(o),c=L(o);return a[0]!==s||a[1]!==c||a[2]!==l?(t=s?(0,i.jsxs)("div",{className:eT.errorContainer,children:[(0,i.jsx)("div",{className:eT.iconContainer,children:(0,i.jsx)(F.AlertIcon,{})}),(0,i.jsx)("p",{className:eT.errorText,children:s})]}):!!l&&"github-graphql"!==c&&(0,i.jsx)("div",{style:{paddingTop:16,paddingBottom:16,paddingLeft:32,paddingRight:32},children:(0,i.jsx)(en.To,{markdown:l.toString()??""})}),a[0]=s,a[1]=c,a[2]=l,a[3]=t):t=a[3],a[4]!==t?(n=(0,i.jsx)("div",{className:eT.container,children:t}),a[4]=t,a[5]=n):n=a[5],n}try{eP.displayName||(eP.displayName="CollapsedPillBoxContent")}catch{}let eA={svg:"NodeConnection-module__svg--N8jlP"};function eL(e){let t,n,a,o,s,l,c,u,m,p,h,f,g,v,x,_,y,C,j;let N=(0,r.c)(50),{containerRef:b,from:I,to:S,isSplit:w}=e,k=void 0!==w&&w,T=B(),P=E(eR),A=(0,d.useRef)(null),L=(0,d.useId)();N[0]===Symbol.for("react.memo_cache_sentinel")?(t={x1:0,y1:0,x2:0,y2:0,hingePointY:0,isHorizontal:!1},N[0]=t):t=N[0];let[O,R]=(0,d.useState)(t),D=`gradient-${L}`,M=`mask-${L}`,U=`path-${L}`;N[1]!==I||N[2]!==S?(n=()=>{let e=A.current?.getBoundingClientRect();if(!e)return;let t=document.querySelector(`.${I}`),n=document.querySelector(`.${S}`);if(!t||!n)return;let a=t.getBoundingClientRect(),i=n.getBoundingClientRect(),r={x:a.left+a.width/2-e.left,y:a.top+a.height/2-e.top},o={x:i.left+i.width/2-e.left,y:i.top+i.height/2-e.top},s=Math.abs(r.y-o.y)<eB,l=s?r.y:Math.max(a.top,i.top)-e.top-15;R({x1:r.x,y1:r.y,x2:o.x,y2:o.y,isHorizontal:s,hingePointY:l})},N[1]=I,N[2]=S,N[3]=n):n=N[3];let $=n;N[4]!==$?(a=()=>$(),N[4]=$,N[5]=a):a=N[5],(0,el.w)(a,b),N[6]!==$?(o=()=>{$()},N[6]=$,N[7]=o):o=N[7],N[8]!==I||N[9]!==P||N[10]!==T||N[11]!==S||N[12]!==$?(s=[I,S,T,P,$],N[8]=I,N[9]=P,N[10]=T,N[11]=S,N[12]=$,N[13]=s):s=N[13],(0,d.useEffect)(o,s);let V=Math.atan2(O.y2-O.y1,O.x2-O.x1)*(180/Math.PI);N[14]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)("stop",{offset:"30%",stopColor:"var(--borderColor-emphasis)",stopOpacity:0}),c=(0,i.jsx)("stop",{offset:"100%",stopColor:"currentColor",stopOpacity:1}),N[14]=l,N[15]=c):(l=N[14],c=N[15]),N[16]!==D?(u=(0,i.jsxs)("linearGradient",{id:D,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[l,c]}),N[16]=D,N[17]=u):u=N[17],N[18]!==O?(m=eD(O),N[18]=O,N[19]=m):m=N[19],N[20]!==m?(p=(0,i.jsx)("path",{d:m,stroke:"white",strokeWidth:2,fill:"none"}),N[20]=m,N[21]=p):p=N[21],N[22]!==M||N[23]!==p?(h=(0,i.jsx)("mask",{id:M,children:p}),N[22]=M,N[23]=p,N[24]=h):h=N[24],N[25]!==h||N[26]!==u?(f=(0,i.jsxs)("defs",{children:[u,h]}),N[25]=h,N[26]=u,N[27]=f):f=N[27],N[28]!==O?(g=eD(O),N[28]=O,N[29]=g):g=N[29],N[30]!==U||N[31]!==g?(v=(0,i.jsx)("path",{d:g,id:U,className:"stroke-borderColor-default",stroke:"currentColor",strokeWidth:1,fill:"none"}),N[30]=U,N[31]=g,N[32]=v):v=N[32];let W=`url(#${M})`,F=`url(#${D})`,z=`rotate(${V})`,H=`#${U}`;return N[33]!==H?(x=(0,i.jsx)("animateMotion",{dur:"5000ms",repeatCount:"indefinite",children:(0,i.jsx)("mpath",{href:H})}),N[33]=H,N[34]=x):x=N[34],N[35]!==F||N[36]!==z||N[37]!==x?(_=(0,i.jsx)("circle",{r:30,fill:F,transform:z,children:x}),N[35]=F,N[36]=z,N[37]=x,N[38]=_):_=N[38],N[39]!==W||N[40]!==_?(y=(0,i.jsx)("g",{mask:W,children:_}),N[39]=W,N[40]=_,N[41]=y):y=N[41],N[42]!==k||N[43]!==O?(C=k&&eM(O).map(eO),N[42]=k,N[43]=O,N[44]=C):C=N[44],N[45]!==f||N[46]!==v||N[47]!==y||N[48]!==C?(j=(0,i.jsxs)("svg",{"aria-hidden":!0,ref:A,className:eA.svg,children:[f,v,y,C]}),N[45]=f,N[46]=v,N[47]=y,N[48]=C,N[49]=j):j=N[49],j}function eO(e){return(0,i.jsx)("path",{d:e,stroke:"currentColor",strokeWidth:1,fill:"none"},e)}function eR(e){return e.executionState.iteration}let eB=10,eD=e=>[`M ${e.x1} ${e.y1}`,...Math.abs(e.x1-e.x2)>20?[`L ${e.x1} ${e.hingePointY-20}`,`Q ${e.x1}
            ${e.hingePointY}
            ${e.x1+20*(e.x1<e.x2?1:-1)}
            ${e.hingePointY}`,`L ${e.x2-20*(e.x1<e.x2?1:-1)} ${e.hingePointY}`,`Q ${e.x2} ${e.hingePointY} ${e.x2} ${e.hingePointY+20}`,`L ${e.x2} ${e.y2}`]:[`L ${e.x2} ${e.hingePointY},`,`L ${e.x2} ${e.y2}`]].join(" "),eM=e=>[eD({x1:e.x1-3,y1:e.y1+3,x2:e.x2-3,y2:e.y2+3,hingePointY:e.hingePointY-3,isHorizontal:e.isHorizontal}),eD({x1:e.x1+3,y1:e.y1-3,x2:e.x2+3,y2:e.y2-3,hingePointY:e.hingePointY+3,isHorizontal:e.isHorizontal})];try{eL.displayName||(eL.displayName="NodeConnection")}catch{}let eU=e=>{let t,n,a,o,s,l,c,u,m,p,h,v,x,_;let y=(0,r.c)(54),{nodeId:C,pipelineId:j,isCollapsed:N,isContentVisible:b,className:I,isOutput:S,onToggleExpand:w,onNodeUpdate:k,onUpdate:T,onStop:P,onToggleContent:O}=e,R=(0,d.useRef)(null),B=L(C),D=function(e){let t=E(t=>{let n=A(e)(t);return n?[...new Set([...f(n)].map(g))].sort().join("|"):""});return""===t?[]:t.split("|")}(C),M=`node-card-${j}-${C}`,U=N?"":"text"!==B?$.node:$.textNode;y[0]!==I||y[1]!==U?(t=(0,V.$)("node-component",$.container,I,U),y[0]=I,y[1]=U,y[2]=t):t=y[2],y[3]!==C?(n=(0,i.jsx)("span",{className:$.nodeIdBox,children:C}),y[3]=C,y[4]=n):n=y[4],y[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,V.$)("node-component",$.headerContainer),y[5]=a):a=y[5],y[6]!==N||y[7]!==C||y[8]!==k||y[9]!==P||y[10]!==w||y[11]!==T?(o=(0,i.jsx)(Z,{isCollapsed:N,nodeId:C,onNodeUpdate:k,onStop:P,onToggleExpand:w,onUpdate:T}),y[6]=N,y[7]=C,y[8]=k,y[9]=P,y[10]=w,y[11]=T,y[12]=o):o=y[12];let W=`node-component-${j}-${C}`;if(y[13]!==W?(s=(0,V.$)($.nodeMarker,W),y[13]=W,y[14]=s):s=y[14],y[15]!==s?(l=(0,i.jsx)("div",{className:s}),y[15]=s,y[16]=l):l=y[16],y[17]!==o||y[18]!==l?(c=(0,i.jsxs)("div",{className:a,children:[o,l]}),y[17]=o,y[18]=l,y[19]=c):c=y[19],y[20]!==N||y[21]!==b||y[22]!==S||y[23]!==C||y[24]!==k||y[25]!==P||y[26]!==O||y[27]!==T||y[28]!==j?(u=!N&&(0,i.jsx)(ek,{nodeId:C,pipelineId:j,isOutput:S,isCollapsed:N,isContentVisible:b,onNodeUpdate:k,onStop:P,onToggleContent:O,onUpdate:T}),y[20]=N,y[21]=b,y[22]=S,y[23]=C,y[24]=k,y[25]=P,y[26]=O,y[27]=T,y[28]=j,y[29]=u):u=y[29],y[30]!==c||y[31]!==u||y[32]!==n?(m=(0,i.jsxs)("div",{className:$.mainContent,children:[n,c,u]}),y[30]=c,y[31]=u,y[32]=n,y[33]=m):m=y[33],y[34]!==N||y[35]!==C?(p=N&&(0,i.jsx)(eP,{nodeId:C}),y[34]=N,y[35]=C,y[36]=p):p=y[36],y[37]!==M||y[38]!==m||y[39]!==p||y[40]!==t?(h=(0,i.jsxs)("div",{id:M,className:t,ref:R,children:[m,p]}),y[37]=M,y[38]=m,y[39]=p,y[40]=t,y[41]=h):h=y[41],y[42]!==D||y[43]!==C||y[44]!==j){let e;y[46]!==C||y[47]!==j?(e=e=>(0,i.jsx)(eL,{containerRef:R,from:`node-component-${j}-${e}`,to:`node-component-${j}-${C}`,isSplit:e.includes("|map")},e),y[46]=C,y[47]=j,y[48]=e):e=y[48],v=D.map(e),y[42]=D,y[43]=C,y[44]=j,y[45]=v}else v=y[45];return y[49]!==v?(x=(0,i.jsx)("div",{className:$.nodeConnection,children:v}),y[49]=v,y[50]=x):x=y[50],y[51]!==h||y[52]!==x?(_=(0,i.jsxs)(i.Fragment,{children:[h,x]}),y[51]=h,y[52]=x,y[53]=_):_=y[53],_};try{eU.displayName||(eU.displayName="PillBoxNode")}catch{}let e$={compactNode:"CompactStyle-module__compactNode--wrJos",active:"CompactStyle-module__active--r3FEl",validationError:"CompactStyle-module__validationError--Tagru"},eV=e=>{let t,n,a,o,s,l;let c=(0,r.c)(15),{nodeId:d,pipelineId:u,isSelected:m,className:p}=e;c[0]!==d?(t=e=>A(d)(e)?.title,c[0]=d,c[1]=t):t=c[1];let h=E(t),f=L(d),g=`node-card-${u}-${d}`,v=`${e$.compactNode} ${p} ${m?e$.active:""}`;return c[2]!==f?(n=(0,i.jsx)(Y,{type:f,size:"medium"}),c[2]=f,c[3]=n):n=c[3],c[4]===Symbol.for("react.memo_cache_sentinel")?(a={margin:"0",width:"max-content"},c[4]=a):a=c[4],c[5]!==h?(o=(0,i.jsx)("p",{style:a,children:h}),c[5]=h,c[6]=o):o=c[6],c[7]!==d?(s=(0,i.jsx)(eW,{nodeId:d}),c[7]=d,c[8]=s):s=c[8],c[9]!==g||c[10]!==v||c[11]!==n||c[12]!==o||c[13]!==s?(l=(0,i.jsxs)("div",{id:g,className:v,children:[n,o,s]}),c[9]=g,c[10]=v,c[11]=n,c[12]=o,c[13]=s,c[14]=l):l=c[14],l};function eW(e){let t;let n=(0,r.c)(1),{nodeId:a}=e;return O(a)?(n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(F.AlertIcon,{className:e$.validationError}),n[0]=t):t=n[0],t):null}try{eV.displayName||(eV.displayName="CompactStyle")}catch{}try{eW.displayName||(eW.displayName="ValidationErrorsIndicator")}catch{}let eF=(0,d.createContext)(null),ez=eF.Provider;function eH(){let e=(0,d.useContext)(eF);if(!e)throw Error("usePipesService must be used inside a PipesServiceProvider");return e}try{eF.displayName||(eF.displayName="PipesServiceContext")}catch{}function eG(e){let t,n,a,i,o,s;let l=(0,r.c)(32),{nodeId:c,pipelineId:d}=e,u=T(),m=eH(),p=k(),h=E(A(c)),f=B();if(l[0]!==c||l[1]!==f){let e;l[3]!==c?(e=e=>e.id===c,l[3]=c,l[4]=e):e=l[4],t=y(f).some(e),l[0]=c,l[1]=f,l[2]=t}else t=l[2];let g=t;l[5]!==u||l[6]!==p||l[7]!==f||l[8]!==m?(n=()=>{let e=p().executionState.iteration;m.runPipeline(f,e,u)},l[5]=u,l[6]=p,l[7]=f,l[8]=m,l[9]=n):n=l[9];let _=(0,eg.d)(n,1e3);l[10]!==u||l[11]!==p||l[12]!==h||l[13]!==f||l[14]!==_?(a=async()=>{if(!(p().pipelineState.validationErrors.length>0)&&h)try{u({type:"INCREMENT_ITERATION"}),v(f,h.id,u),_()}catch(e){}},l[10]=u,l[11]=p,l[12]=h,l[13]=f,l[14]=_,l[15]=a):a=l[15];let C=a;l[16]!==u||l[17]!==p||l[18]!==h||l[19]!==f||l[20]!==d||l[21]!==_?(i=e=>{if(!h)return;let t=p().pipelineState.pipelines,n=x({...h,...e},Object.values(t));n&&(u({type:"UPDATE_NODE",pipelineId:d,nodeId:h.id,updates:{...n}}),p().pipelineState.validationErrors.length>0||(u({type:"INCREMENT_ITERATION"}),v(f,h.id,u),_()))},l[16]=u,l[17]=p,l[18]=h,l[19]=f,l[20]=d,l[21]=_,l[22]=i):i=l[22];let j=i;l[23]!==u||l[24]!==p?(o=()=>{u({type:"CANCEL_EXECUTION",iteration:p().executionState.iteration})},l[23]=u,l[24]=p,l[25]=o):o=l[25];let N=o;return l[26]!==g||l[27]!==h||l[28]!==C||l[29]!==N||l[30]!==j?(s={isOutput:g,node:h,onNodeUpdate:C,onUpdate:j,onStop:N},l[26]=g,l[27]=h,l[28]=C,l[29]=N,l[30]=j,l[31]=s):s=l[31],s}let eK=e=>{let t;let n=(0,r.c)(7),{pipelineId:a,nodeId:o,className:s,style:l,isSelected:c,isContentVisibleDefault:d}=e,u=void 0===l?"pillbox":l,m=void 0!==d&&d;return n[0]!==s||n[1]!==m||n[2]!==c||n[3]!==o||n[4]!==a||n[5]!==u?(t=(0,i.jsx)(eq,{pipelineId:a,nodeId:o,className:s,style:u,isSelected:c,isContentVisibleDefault:m}),n[0]=s,n[1]=m,n[2]=c,n[3]=o,n[4]=a,n[5]=u,n[6]=t):t=n[6],t},eq=e=>{let t;let n=(0,r.c)(19),{pipelineId:a,nodeId:o,className:s,style:l,isSelected:c,isContentVisibleDefault:u}=e;n[0]!==o||n[1]!==a?(t={nodeId:o,pipelineId:a},n[0]=o,n[1]=a,n[2]=t):t=n[2];let{isOutput:m,node:p,onNodeUpdate:h,onStop:f,onUpdate:g}=eG(t),v=!!p.inputType||m,[x,_]=(0,d.useState)(!v),[y,C]=(0,d.useState)(void 0!==u&&u);if(!p)return null;switch(l){case"pillbox":{let e,t;return n[3]===Symbol.for("react.memo_cache_sentinel")?(e=()=>C(eX),n[3]=e):e=n[3],n[4]!==s||n[5]!==x||n[6]!==y||n[7]!==m||n[8]!==p.id||n[9]!==h||n[10]!==f||n[11]!==g||n[12]!==a?(t=(0,i.jsx)(eU,{nodeId:p.id,pipelineId:a,isCollapsed:x,isContentVisible:y,className:s,onToggleExpand:_,onNodeUpdate:h,onStop:f,onUpdate:g,onToggleContent:e,isOutput:m}),n[4]=s,n[5]=x,n[6]=y,n[7]=m,n[8]=p.id,n[9]=h,n[10]=f,n[11]=g,n[12]=a,n[13]=t):t=n[13],t}case"compact":{let e;let t=c??!1;return n[14]!==s||n[15]!==p.id||n[16]!==a||n[17]!==t?(e=(0,i.jsx)(eV,{nodeId:p.id,pipelineId:a,className:s,isSelected:t}),n[14]=s,n[15]=p.id,n[16]=a,n[17]=t,n[18]=e):e=n[18],e}default:return null}};try{eK.displayName||(eK.displayName="NodeComponent")}catch{}try{eq.displayName||(eq.displayName="NodeComponentInner")}catch{}function eX(e){return!e}let eQ={container:"BasicView-module__container--LcBFl"};function eJ(){let e,t,n;let a=(0,r.c)(8),o=B();if(a[0]!==o){let n;let r=h(o);e=eQ.container,a[3]!==o.id?(n=e=>e.map(e=>(0,i.jsx)(eK,{pipelineId:o.id,nodeId:e.id},e.id)),a[3]=o.id,a[4]=n):n=a[4],t=r.layers.map(n),a[0]=o,a[1]=e,a[2]=t}else e=a[1],t=a[2];return a[5]!==e||a[6]!==t?(n=(0,i.jsx)("div",{className:e,children:t}),a[5]=e,a[6]=t,a[7]=n):n=a[7],n}try{eJ.displayName||(eJ.displayName="BasicView")}catch{}var eY=n(25831),eZ=n(78075);let e0={container:"CompactView-module__container--QQLKE",innerContainer:"CompactView-module__innerContainer--e4rek",nodesContainer:"CompactView-module__nodesContainer--UV4y1",nodeWrapper:"CompactView-module__nodeWrapper--H1IqP",edgeContainer:"CompactView-module__edgeContainer--p6l0i",rightSidePanel:"CompactView-module__rightSidePanel--Ou6Ym"},e1=e=>{let t,n,a,o,s;let l=(0,r.c)(16),{path:c,isProcessing:u}=e,m=void 0!==u&&u,p=(0,d.useId)(),h=`mask-${p}`,f=`path-${p}`;return l[0]!==c?(t=(0,i.jsx)("path",{d:c,stroke:"white",strokeWidth:1,fill:"none"}),l[0]=c,l[1]=t):t=l[1],l[2]!==h||l[3]!==t?(n=(0,i.jsx)("defs",{children:(0,i.jsx)("mask",{id:h,children:t})}),l[2]=h,l[3]=t,l[4]=n):n=l[4],l[5]!==c||l[6]!==f?(a=(0,i.jsx)("path",{d:c,id:f,className:"stroke-borderColor-default",stroke:"url(#lineGradient)",strokeWidth:1.6,opacity:.6,fill:"none"}),l[5]=c,l[6]=f,l[7]=a):a=l[7],l[8]!==m||l[9]!==c||l[10]!==f?(o=m?(0,i.jsx)("path",{d:c,stroke:"url(#activeEdgeGradient)",strokeWidth:2,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:{strokeDasharray:"5% 100%",animation:"activeFlowAnimation 3.5s ease-out infinite"}}):(0,i.jsx)("path",{id:f,d:c,className:"stroke-borderColor-muted",stroke:"url(#dotGradient)",strokeWidth:3,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:{strokeDasharray:"0.5 100",animation:"flowAnimation 10s ease-in-out infinite"}}),l[8]=m,l[9]=c,l[10]=f,l[11]=o):o=l[11],l[12]!==n||l[13]!==a||l[14]!==o?(s=(0,i.jsxs)("g",{children:[n,a,o]}),l[12]=n,l[13]=a,l[14]=o,l[15]=s):s=l[15],s};try{e1.displayName||(e1.displayName="CompactStyleEdge")}catch{}let e2={container:"CompactNodePanel-module__container--dxgrY",header:"CompactNodePanel-module__header--uHlhs",title:"CompactNodePanel-module__title--BaP8p",titleText:"CompactNodePanel-module__titleText--IykfO",descriptionText:"CompactNodePanel-module__descriptionText--kle3j",content:"CompactNodePanel-module__content--XI9XP",divider:"CompactNodePanel-module__divider--KXtjF",outputContainer:"CompactNodePanel-module__outputContainer--FzE46",loading:"CompactNodePanel-module__loading--tCzVZ",errorContainer:"CompactNodePanel-module__errorContainer--EzKvw",errorNotice:"CompactNodePanel-module__errorNotice--hR56j",errorIcon:"CompactNodePanel-module__errorIcon--hruuo",errorText:"CompactNodePanel-module__errorText--MbfB0",nodeValue:"CompactNodePanel-module__nodeValue--O9aC3",output:"CompactNodePanel-module__output--JXdGT",markdownContainer:"CompactNodePanel-module__markdownContainer--UrOX9",markdownHeader:"CompactNodePanel-module__markdownHeader--YCwge",markdownContentWrapper:"CompactNodePanel-module__markdownContentWrapper--kQQ9s",outputHeader:"CompactNodePanel-module__outputHeader--pNml1"};var e5=n(26514);function e3(e){let t,n,a,o,s,l,c,d,u,m,p;let h=(0,r.c)(39),{nodeId:f,pipelineId:g}=e;h[0]!==f||h[1]!==g?(t={nodeId:f,pipelineId:g},h[0]=f,h[1]=g,h[2]=t):t=h[2];let{isOutput:v,node:x,onNodeUpdate:_,onStop:y,onUpdate:C}=eG(t),j=M(f),N=D(f),b=U(f),I=function(e){let t=E(t=>t.pipelineState.validationErrors.filter(t=>t.involvedNodes.includes(e)).map(e=>e.error).join("|"));return""===t?[]:t.split("|")}(f);return x?((h[3]!==x.title?(n=(0,i.jsx)("span",{className:e2.titleText,children:x.title}),h[3]=x.title,h[4]=n):n=h[4],h[5]!==x.description?(a=(0,i.jsx)("span",{className:e2.descriptionText,children:x.description}),h[5]=x.description,h[6]=a):a=h[6],h[7]!==n||h[8]!==a?(o=(0,i.jsxs)("div",{className:e2.title,children:[n,a]}),h[7]=n,h[8]=a,h[9]=o):o=h[9],h[10]!==b||h[11]!==x.type||h[12]!==N||h[13]!==_||h[14]!==y?(s=["prompt","code","pdf","pipeline","github-graphql"].includes(x.type)&&(0,i.jsx)(G,{onClick:e=>{e.stopPropagation(),_()},onStop:e=>{e.stopPropagation(),y()},isLoading:b,type:x.type,value:N,variant:"default"}),h[10]=b,h[11]=x.type,h[12]=N,h[13]=_,h[14]=y,h[15]=s):s=h[15],h[16]!==s?(l=(0,i.jsx)("div",{children:s}),h[16]=s,h[17]=l):l=h[17],h[18]!==o||h[19]!==l?(c=(0,i.jsxs)("div",{className:e2.header,children:[o,l]}),h[18]=o,h[19]=l,h[20]=c):c=h[20],h[21]!==b||h[22]!==f||h[23]!==C||h[24]!==g?(d=(0,i.jsx)(eE,{nodeId:f,pipelineId:g,isContentVisible:!0,isCollapsed:!1,isLoading:b,onUpdate:C}),h[21]=b,h[22]=f,h[23]=C,h[24]=g,h[25]=d):d=h[25],h[26]!==v||h[27]!==b||h[28]!==x||h[29]!==j||h[30]!==N||h[31]!==I)?(u=["prompt","code","pdf","pipeline","github-graphql"].includes(x.type)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:e2.divider}),(0,i.jsx)("div",{className:e2.outputContainer,children:b&&!N?(0,i.jsx)("div",{className:e2.loading,children:(0,i.jsx)(ea.r,{lines:3})}):I.length>0?(0,i.jsx)("div",{className:e2.errorContainer,children:I.map(e4)}):j?(0,i.jsxs)("div",{className:e2.errorContainer,children:[(0,i.jsx)("div",{className:e2.errorNotice,children:(0,i.jsx)(F.AlertIcon,{className:e2.errorIcon})}),(0,i.jsx)("p",{className:e2.errorText,children:j})]}):N?(0,i.jsx)("div",{className:(0,V.$)(e2.nodeValue,v&&e2.output),children:"github-graphql"===x.type?(0,i.jsx)("pre",{style:{maxHeight:300,overflow:"auto"},children:N.toString()}):(0,i.jsxs)("div",{className:e2.markdownContainer,children:[(0,i.jsxs)("div",{className:e2.markdownHeader,children:[(0,i.jsx)("span",{className:e2.outputHeader,children:"Output"}),(0,i.jsx)(e5.T,{icon:F.CopyIcon,variant:"invisible",ariaLabel:"Copy output",textToCopy:N?N.toString():""})]}),(0,i.jsx)("div",{className:e2.markdownContentWrapper,children:(0,i.jsx)(en.To,{markdown:N.toString()??""})})]})}):null})]}),h[26]=v,h[27]=b,h[28]=x,h[29]=j,h[30]=N,h[31]=I,h[32]=u):u=h[32],h[33]!==d||h[34]!==u?(m=(0,i.jsxs)("div",{className:e2.content,children:[d,u]}),h[33]=d,h[34]=u,h[35]=m):m=h[35],h[36]!==m||h[37]!==c?(p=(0,i.jsxs)("div",{className:e2.container,children:[c,m]}),h[36]=m,h[37]=c,h[38]=p):p=h[38],p):null}function e4(e){return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:e2.errorNotice,children:[(0,i.jsx)(F.AlertIcon,{className:e2.errorIcon}),"Oops, this node is configured incorrectly"]}),(0,i.jsx)("p",{className:e2.errorText,children:e})]},e)}try{e3.displayName||(e3.displayName="CompactNodePanel")}catch{}let e6=(e="")=>e.split("|")[0],e7=`
@keyframes flowAnimation {
  from {
    stroke-dashoffset: 100;
  }
  to {
    stroke-dashoffset: 0;
  }
}

@keyframes activeFlowAnimation {
  0% {
    stroke-dashoffset: 105%;
  }
  // add a bit delay
  60% {
    stroke-dashoffset: 5%;
  }
  100% {
    stroke-dashoffset: 5%;
  }
}
`,e8="#1f6feb";function e9(){let e,t,n,a,o,s,l,c,u,m;let p=(0,r.c)(40),h=function(){let e=E(e=>P(e)?.nodes?.map(e=>e.id)?.join("|"));return e?.split("|")??[]}(),g=E(tn),v=E(te),x=(0,d.useRef)(null),[_,y]=(0,d.useState)(null);p[0]!==_?(e=e=>{y(e===_?null:e)},p[0]=_,p[1]=e):e=p[1];let C=e,{layout:j,pipelineDimensions:N,edges:b}=function(){let e=B(),t=(0,eZ.xp)().id(e=>e.id).parentIds(e=>e.parentIds),n=e.nodes.map(e=>({id:e6(e.id)||"",parentIds:[...f(e)].map(e=>e6(e)||"").filter(Boolean)})),a={},i=[];try{let e=t(n),r=[30,10],{width:o,height:s}=(0,eZ.Hz)().nodeSize([200,120]).layering((0,eZ.AH)()).decross((0,eZ.X9)().order((0,eZ.Ys)().base((0,eZ.n0)()))).gap(r).tweaks([(0,eZ.uU)([r[0],r[1]],eZ.U9)])(e);for(let t of e.nodes())t.data.id&&(a[t.data.id]={x:t.x,y:t.y});for(let{points:t,source:n,target:a}of e.links()){let e=(0,eY.n8j)().curve(eY.uxU)(t)||"";i.push({path:e,points:t.map(([e,t])=>({x:e,y:t})),source:n.data.id||"",target:a.data.id||""})}return{layout:a,edges:i,pipelineDimensions:{width:o,height:s}}}catch{return function(e){let t={},n={width:ta.width,height:e.length*ta.height};for(let n=0;n<e.length;++n)t[e[n]]={x:ta.width/2,y:n*ta.height};return{layout:t,edges:[],pipelineDimensions:n}}(e.nodes.map(e=>e.id))}}(),I=_?j[_]:void 0;p[2]!==N||p[3]!==I?(t=I?{x:N.width/2-I.x,y:N.height/2-I.y}:{x:0,y:0},p[2]=N,p[3]=I,p[4]=t):t=p[4];let S=t;if(!g)return null;p[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("style",{children:e7}),p[5]=n):n=p[5];let w=`translate(${S.x}px, ${S.y}px)`;if(p[6]!==N.height||p[7]!==N.width||p[8]!==w?(a={height:N.height,width:N.width,transform:w},p[6]=N.height,p[7]=N.width,p[8]=w,p[9]=a):a=p[9],p[10]!==C||p[11]!==j||p[12]!==h||p[13]!==g||p[14]!==_){let e;p[16]!==C||p[17]!==j||p[18]!==g||p[19]!==_?(e=e=>(0,i.jsx)("div",{role:"button",tabIndex:0,className:e0.nodeWrapper,style:{left:j[e]?.x??0,top:j[e]?.y??0},onClick:()=>C(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&C(e)},children:(0,i.jsx)(eK,{pipelineId:g,nodeId:e,style:"compact",isSelected:_===e},e)},e),p[16]=C,p[17]=j,p[18]=g,p[19]=_,p[20]=e):e=p[20],o=h.map(e),p[10]=C,p[11]=j,p[12]=h,p[13]=g,p[14]=_,p[15]=o}else o=p[15];return p[21]!==a||p[22]!==o?(s=(0,i.jsx)("div",{className:e0.nodesContainer,style:a,children:o}),p[21]=a,p[22]=o,p[23]=s):s=p[23],p[24]!==b||p[25]!==N.height||p[26]!==N.width||p[27]!==v||p[28]!==S.x||p[29]!==S.y?(l=0!==N.width&&(0,i.jsxs)("svg",{className:e0.edgeContainer,style:{height:N.height,width:N.width,transform:`translate(${S.x}px, ${S.y}px)`},role:"presentation",children:[(0,i.jsxs)("defs",{children:[(0,i.jsxs)("linearGradient",{id:"lineGradient",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0.4"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"currentColor",stopOpacity:"0.4"})]}),(0,i.jsxs)("linearGradient",{id:"dotGradient",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0.8"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"currentColor",stopOpacity:"0.8"})]}),(0,i.jsxs)("linearGradient",{id:"activeEdgeGradient",gradientUnits:"userSpaceOnUse",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,i.jsx)("stop",{stopColor:e8,stopOpacity:"0.5"}),(0,i.jsx)("stop",{stopColor:e8}),(0,i.jsx)("stop",{offset:"32.5%",stopColor:e8}),(0,i.jsx)("stop",{offset:"100%",stopColor:e8,stopOpacity:"0.5"})]})]}),b.map(e=>{let t=!!Object.entries(v).find(t=>{let[n,a]=t;return n===e.target&&a});return(0,i.jsx)(e1,{path:e.path,isProcessing:t},`${e.source}-${e.target}`)})]}),p[24]=b,p[25]=N.height,p[26]=N.width,p[27]=v,p[28]=S.x,p[29]=S.y,p[30]=l):l=p[30],p[31]!==s||p[32]!==l?(c=(0,i.jsxs)("div",{className:e0.innerContainer,children:[s,l]}),p[31]=s,p[32]=l,p[33]=c):c=p[33],p[34]!==g||p[35]!==_?(u=_&&(0,i.jsx)("div",{className:e0.rightSidePanel,children:(0,i.jsx)(e3,{pipelineId:g,nodeId:_},_)}),p[34]=g,p[35]=_,p[36]=u):u=p[36],p[37]!==u||p[38]!==c?(m=(0,i.jsxs)("div",{className:e0.container,ref:x,children:[n,c,u]}),p[37]=u,p[38]=c,p[39]=m):m=p[39],m}function te(e){return Object.fromEntries(Object.entries(e.executionState.nodes).map(tt))}function tt(e){let[t,n]=e;return[t,n.running]}function tn(e){return e.pipelineState.selectedPipelineId}let ta={width:300,height:50};try{e9.displayName||(e9.displayName="CompactView")}catch{}try{(a=D3layout).displayName||(a.displayName="D3layout")}catch{}let ti=e=>{let t,n;let a=(0,r.c)(4),{view:o}=e;return a[0]!==o?(t="basic"===o?(0,i.jsx)(eJ,{}):"compact"===o?(0,i.jsx)(e9,{}):null,a[0]=o,a[1]=t):t=a[1],a[2]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),a[2]=t,a[3]=n):n=a[3],n};try{ti.displayName||(ti.displayName="PipelineVisualizer")}catch{}let tr={container:"Pipeline-module__container--LCuiu",footer:"Pipeline-module__footer--Veip0"};function to(e){let t,n,a;let o=(0,r.c)(7),{footerContent:s}=e,l=E(ts),[c]=(0,d.useState)("compact");return l?(o[0]!==c?(t=(0,i.jsx)("div",{className:tr.container,children:(0,i.jsx)(ti,{view:c})}),o[0]=c,o[1]=t):t=o[1],o[2]!==s?(n=(0,i.jsx)("div",{className:tr.footer,children:s}),o[2]=s,o[3]=n):n=o[3],o[4]!==t||o[5]!==n?(a=(0,i.jsxs)(i.Fragment,{children:[t,n]}),o[4]=t,o[5]=n,o[6]=a):a=o[6],a):null}function ts(e){return!!P(e)}try{to.displayName||(to.displayName="CurrentPipeline")}catch{}var tl=n(73451);let tc={footerSelect:"PipesPreviewArea-module__footerSelect--Z3wZr",container:"PipesPreviewArea-module__container--QJdqA",header:"PipesPreviewArea-module__header--uW2Lp"},td=(e,t)=>{let n=Q[e.type];if(!n)return e;let a={...e};for(let i of n.contentFields)e[i]&&(a[i]=function(e,t,n=!1){let a;let i=/{{([\w-]+)(?:\|([\w-]+))?}}/g;for(;null!==(a=i.exec(e));){let i=a[1];if(!i||!Object.keys(t).includes(i))continue;let r=t[i],o="string"!=typeof r||n?JSON.stringify(r):r;e=e.replaceAll(a[0],o)}return e}(e[i],t,["code","visualize"].includes(e.type)));return a};async function tu(e){return[{role:"user",content:`${e.content}

 Respond with just the content, no intro, no explanation, etc.`}]}function tm(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function tp(e,t){var n=tm(e,t,"get");return n.get?n.get.call(e):n.value}function th(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function tf(e,t,n){var a=tm(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n),n}var tg=new WeakMap,tv=new WeakMap,tx=new WeakMap;let NodeRunner=class NodeRunner{async run(){switch(tp(this,tg).type){case"prompt":{let e=await tu(tp(this,tg));return tp(this,tx).getChatCompletion(e,tp(this,tg).model)}case"github-graphql":return JSON.stringify(await tp(this,tv).getGraphQLResponse(tp(this,tg).content));default:return tp(this,tg).content}}constructor(e,t,n){th(this,tg,{writable:!0,value:void 0}),th(this,tv,{writable:!0,value:void 0}),th(this,tx,{writable:!0,value:void 0}),tf(this,tg,e),tf(this,tv,t),tf(this,tx,n)}};function t_(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function ty(e,t){var n=t_(e,t,"get");return n.get?n.get.call(e):n.value}function tC(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function tj(e,t,n){var a=t_(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n),n}var tN=new WeakMap,tb=new WeakMap,tI=new WeakMap,tS=new WeakMap,tw=new WeakMap,tE=new WeakMap,tk=new WeakMap;let PipelineRunner=class PipelineRunner{async run(e){let t=y(ty(this,tS));if(0===t.length)throw Error("No output node");await Promise.all(t.map(t=>this.runNodeUnlessRunning(t,e)))}async runNodeUnlessRunning(e,t){let n=ty(this,tk).get(e.id);if(n)return n;let a=this.runNode(e,t);return ty(this,tk).set(e.id,a),a}async runNode(e,t){let n=await ty(this,tN).getExecutionState(ty(this,tS).id,ty(this,tw)),a=n?.nodes[e.id]?.value;if(a)return a;t({type:"SET_PENDING",nodeId:e.id,pending:!0,iteration:ty(this,tw)});let i=[...new Set(ty(this,tE).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>ty(this,tS).nodes.find(t=>t.id===e)).filter(e=>!!e),r=new NodeRunner(td(e,Object.fromEntries(await Promise.all(i.map(async e=>[e.id,await this.runNodeUnlessRunning(e,t)])))),ty(this,tb),ty(this,tI));t({type:"SET_PENDING",nodeId:e.id,pending:!1,iteration:ty(this,tw)}),t({type:"SET_RUNNING",nodeId:e.id,running:!0,iteration:ty(this,tw)});try{let n=await r.run();return t({type:"UPDATE_NODE_VALUE",pipelineId:ty(this,tS).id,nodeId:e.id,value:n,iteration:ty(this,tw)}),t({type:"SET_RUNNING",nodeId:e.id,running:!1,iteration:ty(this,tw)}),n}catch(n){return t({type:"UPDATE_NODE_ERROR",pipelineId:ty(this,tS).id,nodeId:e.id,error:n instanceof Error?n.message:"string"==typeof n?n:"object"==typeof n?JSON.stringify(n):"",iteration:ty(this,tw)}),null}}constructor(e,t,n,a,i){tC(this,tN,{writable:!0,value:void 0}),tC(this,tb,{writable:!0,value:void 0}),tC(this,tI,{writable:!0,value:void 0}),tC(this,tS,{writable:!0,value:void 0}),tC(this,tw,{writable:!0,value:void 0}),tC(this,tE,{writable:!0,value:void 0}),tC(this,tk,{writable:!0,value:void 0}),tj(this,tN,n),tj(this,tb,a),tj(this,tI,i),tj(this,tS,e),tj(this,tw,t),tj(this,tE,h(e)),tj(this,tk,new Map)}};function tT(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function tP(e,t){var n=tT(e,t,"get");return n.get?n.get.call(e):n.value}function tA(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function tL(e,t,n){var a=tT(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n),n}var tO=new WeakMap,tR=new WeakMap,tB=new WeakMap;let PipesService=class PipesService{async getPipeline(e){return tP(this,tO).getPipeline(e)}async updatePipeline(e,t){return tP(this,tO).updatePipeline(e,t)}async getExecutionState(e,t){return tP(this,tO).getExecutionState(e,t)}async updateExecutionState(e,t,n){return tP(this,tO).updateExecutionState(e,t,n)}async runPipeline(e,t,n){if(!(C(e).length>0))return new PipelineRunner(e,t,tP(this,tO),tP(this,tR),tP(this,tB)).run(n)}constructor(e,t,n){tA(this,tO,{writable:!0,value:void 0}),tA(this,tR,{writable:!0,value:void 0}),tA(this,tB,{writable:!0,value:void 0}),tL(this,tO,e),tL(this,tR,t),tL(this,tB,n)}};let tD="pipes";var tM=n(46988);function tU(e,t){for(let n of[...t].reverse())for(let t of n.references??[])if("text"===t.type&&t.text)try{let a=JSON.parse(t.text);if(a&&"object"==typeof a&&"title"in a&&"nodes"in a){let t=_(a,[]);return t.id=e??a.title.replace(/\s+/g,"-").toLowerCase(),{messageId:n.id,pipeline:t}}}catch{continue}}function t$(e){return P(e)?.id}function tV(e){return e.executionState}function tW(e){let t,n;let a=(0,r.c)(6),{chatState:o,plugin:s,closePreviewPane:l}=e;if(!(s.id===tD&&"service"in s&&s.service instanceof PipesService))throw Error("PipesPreviewArea can only be used with a PipesPlugin");return o.selectedThreadID?(a[0]!==o||a[1]!==l?(t=(0,i.jsx)(w,{children:(0,i.jsx)(tF,{chatState:o,closePreviewPane:l})}),a[0]=o,a[1]=l,a[2]=t):t=a[2],a[3]!==s.service||a[4]!==t?(n=(0,i.jsx)(ez,{value:s.service,children:t}),a[3]=s.service,a[4]=t,a[5]=n):n=a[5],n):null}function tF(e){let t,n,a;let o=(0,r.c)(5),{chatState:s,closePreviewPane:l}=e;return function(){let e,t;let n=(0,r.c)(3),a=T();n[0]!==a?(e=()=>{},t=[!1,a],n[0]=a,n[1]=e,n[2]=t):(e=n[1],t=n[2]),(0,d.useEffect)(e,t)}(),function(e){let t,n;let a=(0,r.c)(10),i=T(),o=eH(),s=function(e,t){let{pipeline:n,messageId:a}=tU(e,t)??{};return(0,d.useMemo)(()=>n,[a])}(e.selectedThreadID,e.messages),l=k();a[0]!==e.selectedThreadID||a[1]!==i||a[2]!==l||a[3]!==s||a[4]!==o?(t=()=>{let t;return t=!1,(async()=>{if(!e.selectedThreadID)return;let n=await o.getPipeline(e.selectedThreadID),a=P(l()),r=!a||a.dummy?n??s:s??n;if(t||!r)return;i({type:"ADD_PIPELINE",pipeline:r});let c=await o.getExecutionState(r.id);!t&&c&&i({type:"RESTORE_EXECUTION_STATE",executionState:c})})(),()=>{t=!0}},a[0]=e.selectedThreadID,a[1]=i,a[2]=l,a[3]=s,a[4]=o,a[5]=t):t=a[5],a[6]!==i||a[7]!==s||a[8]!==o?(n=[s,i,o],a[6]=i,a[7]=s,a[8]=o,a[9]=n):n=a[9],(0,d.useEffect)(t,n)}(s),function(e){let t,n;let a=(0,r.c)(6),i=eH(),o=E(P),s=O();a[0]!==s||a[1]!==o||a[2]!==i||a[3]!==e?(t=()=>{o&&e&&!s&&(o.dummy||i.updatePipeline(e,o))},n=[o,i,s,e],a[0]=s,a[1]=o,a[2]=i,a[3]=e,a[4]=t,a[5]=n):(t=a[4],n=a[5]),(0,d.useEffect)(t,n)}(s.selectedThreadID),function(){let e,t;let n=(0,r.c)(5),a=eH(),i=E(tV),o=E(t$);n[0]!==i||n[1]!==o||n[2]!==a?(e=()=>{o&&a.updateExecutionState(o,i.iteration,i)},t=[o,i,a],n[0]=i,n[1]=o,n[2]=a,n[3]=e,n[4]=t):(e=n[3],t=n[4]),(0,d.useEffect)(e,t)}(),o[0]!==l?(t=(0,i.jsx)("div",{className:tc.header,children:(0,i.jsx)(H.K,{icon:F.SidebarCollapseIcon,"aria-label":"Close workbench",onClick:()=>{l(),(0,tM.BI)("dotcom_chat.activate",{target:"WORKBENCH_CLOSE",mode:"pipes"})}})}),o[0]=l,o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(to,{footerContent:null}),o[2]=n):n=o[2],o[3]!==t?(a=(0,i.jsxs)("div",{className:tc.container,children:[t,n]}),o[3]=t,o[4]=a):a=o[4],a}function tz(){let e,t,n,a;let o=(0,r.c)(12),s=T(),l=E(tG),c=E(tH);if(o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(tl.A.Label,{visuallyHidden:!0,children:"Selected demo pipeline"}),o[0]=e):e=o[0],o[1]!==s||o[2]!==l?(t=e=>{let t=Object.values(l).find(t=>t.id===e.target.value);t&&s({type:"SELECT_PIPELINE",pipelineId:t.id})},o[1]=s,o[2]=l,o[3]=t):t=o[3],o[4]!==c||o[5]!==l){let e;o[7]!==c?(e=e=>(0,i.jsx)(eo.A.Option,{value:e.id,selected:c===e.id,children:e.title},e.id),o[7]=c,o[8]=e):e=o[8],n=Object.values(l).map(e),o[4]=c,o[5]=l,o[6]=n}else n=o[6];return o[9]!==t||o[10]!==n?(a=(0,i.jsxs)(tl.A,{className:`${tc.footerSelect} d-flex flex-column flex-items-center mr-2`,children:[e,(0,i.jsx)(eo.A,{onChange:t,children:n})]}),o[9]=t,o[10]=n,o[11]=a):a=o[11],a}function tH(e){return P(e)?.id}function tG(e){return e.pipelineState.pipelines}try{tW.displayName||(tW.displayName="PipesPreviewArea")}catch{}try{tF.displayName||(tF.displayName="PipesPreview")}catch{}try{tz.displayName||(tz.displayName="DevFooter")}catch{}var tK=n(2497),tq=n(82610),tX=n(47584);let tQ=`${tq.Jz}/pipes`;function tJ(e){let t,n;let a=(0,r.c)(4),{onLinkClick:o}=e;a[0]!==o?(t=(e,t)=>{o?.(e,t)},a[0]=o,a[1]=t):t=a[1];let s=t;return a[2]!==s?(n=(0,i.jsx)(tK.Vx,{"aria-current":tX.fV.pathname===tQ?"page":void 0,displayName:"Pipes",href:tQ,icon:F.SyncIcon,id:tD,onLinkClick:s}),a[2]=s,a[3]=n):n=a[3],n}try{tJ.displayName||(tJ.displayName="PipesNavigation")}catch{}function tY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tZ(e){return!!e&&"object"==typeof e&&"pipelineId"in e&&"string"==typeof e.pipelineId&&"iteration"in e&&"number"==typeof e.iteration&&"executionState"in e&&"object"==typeof e.executionState}let IndexedDBPipesStorage=class IndexedDBPipesStorage{async getPipeline(e){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readonly",t=>t.get(e),e=>e&&"object"==typeof e&&"threadID"in e&&"string"==typeof e.threadID&&"pipeline"in e&&"object"==typeof e.pipeline?e.pipeline:null)}updatePipeline(e,t){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readwrite",n=>n.put({threadID:e,pipeline:t}),()=>t)}getExecutionState(e,t){return void 0!==t?this.withTransaction(IndexedDBPipesStorage.EXECUTION_STORE,"readonly",n=>n.get([e,t]),e=>tZ(e)?e.executionState:null):this.withTransaction(IndexedDBPipesStorage.EXECUTION_STORE,"readonly",t=>t.index("pipelineId").getAll(e),e=>{if(!Array.isArray(e))return null;let t=e.filter(tZ);if(0===t.length)return null;let n=Math.max(...t.map(e=>e.iteration));return t.find(e=>e.iteration===n)?.executionState??null})}updateExecutionState(e,t,n){return this.withTransaction(IndexedDBPipesStorage.EXECUTION_STORE,"readwrite",a=>a.put({pipelineId:e,iteration:t,executionState:n}),()=>n)}async withTransaction(e,t,n,a){let i=await this.getDatabase();return new Promise((r,o)=>{let s=i.transaction(e,t);s.oncomplete=()=>i.close(),s.onerror=()=>o(s.error);let l=n(s.objectStore(e));l.onsuccess=()=>r(a(l.result)),l.onerror=()=>o(l.error)})}getDatabase(){return new Promise((e,t)=>{let n=indexedDB.open(IndexedDBPipesStorage.PIPES_DB);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{let e=n.result;e.createObjectStore(IndexedDBPipesStorage.PIPELINES_STORE,{keyPath:"threadID"}).createIndex("threadID","threadID",{unique:!0});let t=e.createObjectStore(IndexedDBPipesStorage.EXECUTION_STORE,{keyPath:["pipelineId","iteration"]});t.createIndex("pipelineId, iteration",["pipelineId","iteration"],{unique:!0}),t.createIndex("pipelineId","pipelineId",{unique:!1})}})}};tY(IndexedDBPipesStorage,"PIPES_DB","copilot-pipes"),tY(IndexedDBPipesStorage,"PIPELINES_STORE","pipelines"),tY(IndexedDBPipesStorage,"EXECUTION_STORE","executionStates");var t0=n(49339);async function t1(e,t){let n=new TextDecoder,a=e.getReader(),i="";for(;;){let{done:e,value:t}=await a.read();if(e)return;let o=n.decode(t);if(i+=o,o.endsWith("\n\ndata: [DONE]\n\n")){var r;return i.replace("data: ","").replace("\n\ndata: [DONE]\n\n","").split("\n\ndata: ").map(e=>{try{let t=JSON.parse(e).choices[0];return t?.delta?.content??""}catch(e){}}).join("")}}}function t2(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function t5(e,t){var n=t2(e,t,"get");return n.get?n.get.call(e):n.value}function t3(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function t4(e,t,n){var a=t2(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n),n}var t6=new WeakMap,t7=new WeakMap,t8=new WeakMap;let ChatCompletionsClient=class ChatCompletionsClient{async getChatCompletion(e,t=eS.UB.id,n,a){let i=await t5(this,t6).getAuthToken(),r=await (0,tq.p)({basePath:t5(this,t7),body:{messages:e,model:t,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:i,integrationId:this.directConnectConfiguration.integrationID,realIp:t5(this,t8),signal:a});if(!r.ok)throw Error(`Failed to get chat completion: ${await r.error}`);return a?.aborted||!r.body?"":await t1(r.body,n)??""}get directConnectConfiguration(){return{integrationID:"copilot-chat"}}constructor(e,t,n=""){t3(this,t6,{writable:!0,value:void 0}),t3(this,t7,{writable:!0,value:void 0}),t3(this,t8,{writable:!0,value:void 0}),t4(this,t7,e),t4(this,t6,new t0.J(t)),t4(this,t8,n)}};var t9=n(57572);function ne(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var nt=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t){var n;let a=await (0,t9.Sr)((n=ne(this,nt,"get")).get?n.get.call(this):n.value,{method:"POST",body:{query:e},signal:t});if(a.ok){let e=await a.json();if(function(e,t){if("errors"in e&&e.errors.length)throw Error(e.errors.map(e=>`GraphQL error: ${e.type}: ${e.message} (path: ${e.path})`).join(", "));if(!("data"in e))throw Error(`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`);return!0}(e,a.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e){!function(e,t,n){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}(this,nt,{writable:!0,value:void 0}),function(e,t,n){var a=ne(e,t,"set");!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n)}(this,nt,e)}};function nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let PipesPlugin=class PipesPlugin{matchThread(e,t){return!!tU(e,t)}async overrideCreateMessageOptions(e){return{...e,references:await this.addReferenceForEditedPipeline(e.threadID,e.references),mode:tD}}async addReferenceForEditedPipeline(e,t){if(!this.service)return t;let n=await this.service.getPipeline(e);return n?[...t,{type:"text",text:JSON.stringify(n)}]:t}constructor(e,t,n,a){nn(this,"id",tD),nn(this,"displayName","Pipes"),nn(this,"service",void 0),nn(this,"widePreviewArea",!0),nn(this,"EmptyStateComponent",c),nn(this,"PreviewAreaComponent",tW),nn(this,"NavigationComponent",tJ),this.service=new PipesService(new IndexedDBPipesStorage,new GraphQLClient(t),new ChatCompletionsClient(e,n,a))}}},70187:(e,t,n)=>{n.d(t,{V:()=>WorkbenchPlugin});var a=n(74848),i=n(21728),r=n(97891),o=n(8932);let s={container:"WorkbenchEmptyState-module__container--w9b8h",description:"WorkbenchEmptyState-module__description--sKeAo"};function l(){let e;let t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)("div",{className:s.container,children:[(0,a.jsx)(o.A,{hidden:!0}),(0,a.jsx)("h2",{children:"Welcome to Workbench"}),(0,a.jsx)("p",{className:s.description,children:"Describe a workbench to create."}),(0,a.jsx)(r.h,{})]}),t[0]=e):e=t[0],e}try{l.displayName||(l.displayName="WorkbenchEmptyState")}catch{}var c=n(2497),d=n(38621),u=n(82610);let m="workbench";var p=n(47584);let h=`${u.Jz}/workbench`;function f(e){let t,n;let r=(0,i.c)(4),{onLinkClick:o}=e;r[0]!==o?(t=(e,t)=>{o?.(e,t)},r[0]=o,r[1]=t):t=r[1];let s=t;return r[2]!==s?(n=(0,a.jsx)(c.Vx,{"aria-current":p.fV.pathname===h?"page":void 0,displayName:"Workbench",href:h,icon:d.ToolsIcon,id:m,onLinkClick:s}),r[2]=s,r[3]=n):n=r[3],n}try{f.displayName||(f.displayName="WorkbenchNavigation")}catch{}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let WorkbenchPlugin=class WorkbenchPlugin{async overrideCreateMessageOptions(e){return{...e,mode:m}}constructor(){g(this,"id",m),g(this,"displayName","Workbench"),g(this,"widePreviewArea",!0),g(this,"EmptyStateComponent",l),g(this,"NavigationComponent",f)}}},75028:(e,t,n)=>{n.d(t,{G:()=>i,K:()=>r});var a=n(47584);let i=a.XC?.readyState==="interactive"||a.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{a.XC?.addEventListener("DOMContentLoaded",()=>{e()})}),r=a.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{a.cg?.addEventListener("load",e)})},42445:(e,t,n)=>{n.d(t,{N7:()=>_});var a=n(36301),i=n(25339),r=n(24212);function o(e){return(0,r.q)(e.stack||"").map(e=>({filename:e.file||"",function:String(e.methodName),lineno:(e.lineNumber||0).toString(),colno:(e.column||0).toString()}))}function s(e){return{type:e.name,value:e.message,stacktrace:o(e),catalogService:e.catalogService}}function l(e){let t=document.querySelectorAll(e);if(t.length>0)return t[t.length-1]}var c=n(9080),d=n(47584),u=n(75632),m=n(95505);let p=!1,h=0,f=Date.now(),g=new Set(["AbortError","AuthSessionExpiredError","TypeError"]),v=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","Unable to perform this operation. Please try again later."]);function x(e){return!!e.name&&!!("AbortError"===e.name||g.has(e.name)&&v.has(e.message)||e.name.startsWith("ApiError")&&v.has(e.message))}function _(e,t={}){if((0,u.G7)("FAILBOT_HANDLE_NON_ERRORS")){if(!(e instanceof Error||"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"message"in e&&"string"==typeof e.message)){if(function(e){if(!e||"boolean"==typeof e||"number"==typeof e)return!0;if("string"==typeof e){if(b.some(t=>e.includes(t)))return!0}else if("object"==typeof e&&"string"==typeof e.message&&"number"==typeof e.code)return!0;return!1}(e))return;let n=Error(),a=function(e){try{return JSON.stringify(e)}catch{return"Unserializable"}}(e);y(C({type:"UnknownError",value:`Unable to report error, due to a thrown non-Error type: ${typeof e}, with value ${a}`,stacktrace:o(n),catalogService:void 0},t));return}x(e)||y(C(s(e),t))}else x(e)||y(C(s(e),t))}async function y(e){if(!(!N&&!p&&h<10&&(0,i.TT)()))return;let t=document.head?.querySelector('meta[name="browser-errors-url"]')?.content;if(t){if(e.error.stacktrace.some(e=>j.test(e.filename)||j.test(e.function))){p=!0;return}h++;try{await fetch(t,{method:"post",body:JSON.stringify(e)})}catch{}}}function C(e,t={}){return Object.assign({error:e,sanitizedUrl:`${window.location.protocol}//${window.location.host}${function(){let e=l("meta[name=analytics-location]");return e?e.content:window.location.pathname}()+function(){let e=l("meta[name=analytics-location-query-strip]"),t="";e||(t=window.location.search);let n=l("meta[name=analytics-location-params]");for(let e of(n&&(t+=(t?"&":"?")+n.content),document.querySelectorAll("meta[name=analytics-param-rename]"))){let n=e.content.split(":",2);t=t.replace(RegExp(`(^|[?&])${n[0]}($|=)`,"g"),`$1${n[1]}$2`)}return t}()}`||window.location.href,readyState:document.readyState,referrer:(0,m.dR)(),timeSinceLoad:Math.round(Date.now()-f),user:function(){let e=document.head?.querySelector('meta[name="user-login"]')?.content;if(e)return e;let t=(0,a.y)();return`anonymous-${t}`}()||void 0,actorId:document.head?.querySelector('meta[name="octolytics-actor-id"]')?.content,bundler:c.v,ui:!!document.querySelector('meta[name="ui"]')},t)}let j=/(chrome|moz|safari)-extension:\/\//,N=!1;d.cg?.addEventListener("pageshow",()=>N=!1),d.cg?.addEventListener("pagehide",()=>N=!0),"function"==typeof BroadcastChannel&&new BroadcastChannel("shared-worker-error").addEventListener("message",e=>{_(e.data.error)});let b=["Object Not Found Matching Id","Not implemented on this platform","provider because it's not your default extension"]},75632:(e,t,n)=>{n.d(t,{G7:()=>l,XY:()=>c,fQ:()=>s});var a=n(5225),i=n(56176);function r(){return new Set((0,i._$)().featureFlags.map(e=>e.toLowerCase()))}let o=n(47584).X3||function(){try{return process?.env?.STORYBOOK==="true"}catch{return!1}}()?r:(0,a.A)(r);function s(){return Array.from(o())}function l(e){return o().has(e.toLowerCase())}let c={isFeatureEnabled:l}},11086:(e,t,n)=>{n.d(t,{t:()=>i});var a=n(5804);let i=({items:e,filter:t,key:n,secondaryKey:i})=>{let r=e.map(e=>[(0,a.dt)(t,n(e)),e]);return i&&(r=r.map(([e,n])=>[Math.max(e,(0,a.dt)(t,i(n))),n])),r.filter(([e])=>e>a.IP).sort(([e,t],[a,i])=>a===e?n(t).localeCompare(n(i)):a-e).map(([,e])=>e)}},5804:(e,t,n)=>{n.d(t,{Dx:()=>o,IP:()=>r,M4:()=>i,dt:()=>s});var a=n(91385);let i=1/0,r=-1/0,o=1,s=(e,t,n=o)=>{let s=e.trim().toLowerCase(),l=t.trim().toLowerCase();if(s===l)return i;if(0===l.length||0===s.length)return r;let c=(0,a.fN)(s,l);return c===1/0&&s!==l?r:l.startsWith(s)||l.endsWith(s)?c+n:c}},39483:(e,t,n)=>{n.d(t,{A:()=>o});let a=n.p+"azure-91ef97089dff.png",i=n.p+"jetbrains-e16495e63a33.png",r=n.p+"neovim-3301f23c4307.png",o={vscode:{url:"https://marketplace.visualstudio.com/items?itemName=GitHub.copilot",icon:n.p+"vscode-380056900de8.png",name:"Visual Studio Code",eventName:"VSCODE"},visualstudio:{url:"https://visualstudio.microsoft.com/github-copilot/",icon:n.p+"vsstudio-806c4b726938.png",name:"Visual Studio",eventName:"VS"},xcode:{url:"https://github.com/github/CopilotForXcode",icon:n.p+"xcode-a6c2735aa7ac.png",name:"Xcode",eventName:"XCODE"},jetbrains:{url:"https://plugins.jetbrains.com/plugin/17718-github-copilot",icon:i,name:"JetBrains",eventName:"JETBRAINS"},neovim:{url:"https://github.com/github/copilot.vim",icon:r,name:"Neovim",eventName:"NEOVIM"},datastudio:{url:"https://learn.microsoft.com/en-us/azure-data-studio/extensions/github-copilot-extension-overview",icon:a,name:"Azure Data Studio",eventName:"AZURE_DATA"}}},9080:(e,t,n)=>{n.d(t,{k:()=>o,v:()=>s});var a=n(5225),i=n(47584);let r=(0,a.A)(function(){return i.XC?.head?.querySelector('meta[name="runtime-environment"]')?.content||""}),o=(0,a.A)(function(){return"enterprise"===r()}),s="webpack"},80688:(e,t,n)=>{n.d(t,{A:()=>o,D:()=>s});var a=n(47584),i=n(57516);let r=class NoOpStorage{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}};function o(e,t={throwQuotaErrorsOnSet:!1},n=a.cg,s=e=>e,l=e=>e){let c;try{if(!n)throw Error();c=n[e]||new r}catch{c=new r}let{throwQuotaErrorsOnSet:d}=t;function u(e){t.sendCacheStats&&(0,i.i)({incrementKey:e})}function m(e){try{if(c.removeItem(e),t.ttl){let t=`${e}:expiry`;c.removeItem(t)}}catch{}}return{getItem:function(e,t=Date.now()){try{let n=c.getItem(e);if(!n)return null;let a=`${e}:expiry`,i=Number(c.getItem(a));if(i&&t>i)return m(e),m(a),u("SAFE_STORAGE_VALUE_EXPIRED"),null;return u("SAFE_STORAGE_VALUE_WITHIN_TTL"),s(n)}catch{return null}},setItem:function(e,n,a=Date.now()){try{if(c.setItem(e,l(n)),t.ttl){let n=`${e}:expiry`,i=a+t.ttl;c.setItem(n,i.toString())}}catch(e){if(d&&e instanceof Error&&e.message.toLowerCase().includes("quota"))throw e}},removeItem:m,clear:c.clear,key:c.key,get length(){return c.length}}}function s(e){return o(e,{throwQuotaErrorsOnSet:!1},a.cg,JSON.parse,JSON.stringify)}},32329:(e,t,n)=>{n.d(t,{Ai:()=>r,Gq:()=>a,SO:()=>i});let{getItem:a,setItem:i,removeItem:r}=(0,n(80688).A)("sessionStorage")},95505:(e,t,n)=>{n.d(t,{BW:()=>i,Ff:()=>p,HK:()=>_,JA:()=>I,LM:()=>h,Pv:()=>j,Vy:()=>m,ZW:()=>C,dR:()=>y,di:()=>f,fX:()=>N,gc:()=>b,k9:()=>x,my:()=>v,r7:()=>S,wG:()=>g,xT:()=>u});var a=n(32329);let i="reload",r="soft-nav:fail",o="soft-nav:fail-referrer",s="soft-nav:referrer",l="soft-nav:marker",c="soft-nav:react-app-name",d="soft-nav:latest-mechanism";function u(){(0,a.SO)(l,"0"),(0,a.Ai)(s),(0,a.Ai)(r),(0,a.Ai)(o),(0,a.Ai)(c),(0,a.Ai)(d)}function m(e){(0,a.SO)(l,e)}function p(){(0,a.SO)(l,"0")}function h(){let e=(0,a.Gq)(l);return e&&"0"!==e}function f(){return(0,a.Gq)(l)}function g(){return!!v()}function v(){return(0,a.Gq)(r)}function x(e){(0,a.SO)(r,e||i),(0,a.SO)(o,window.location.href)}function _(){(0,a.SO)(s,window.location.href)}function y(){return(0,a.Gq)(s)||document.referrer}function C(){let e=N();e?(0,a.SO)(c,e):(0,a.Ai)(c)}function j(){return(0,a.Gq)(c)}function N(){return document.querySelector('react-partial[partial-name="repos-overview"]')?"repos-overview":document.querySelector("react-app")?.getAttribute("app-name")}function b(){return!!document.querySelector("react-app")?.getAttribute("app-name")}function I(e){(0,a.SO)(d,e)}function S(){return(0,a.Gq)(d)}},47584:(e,t,n)=>{n.d(t,{KJ:()=>a.KJ,Kn:()=>i.Kn,X3:()=>a.X3,XC:()=>i.XC,cg:()=>i.cg,fV:()=>i.fV,g5:()=>a.g5});var a=n(25992),i=n(39833)},39833:(e,t,n)=>{n.d(t,{Kn:()=>o,XC:()=>i,cg:()=>r,fV:()=>s});let a="undefined"!=typeof FORCE_SERVER_ENV&&FORCE_SERVER_ENV,i="undefined"==typeof document||a?void 0:document,r="undefined"==typeof window||a?void 0:window,o="undefined"==typeof history||a?void 0:history,s="undefined"==typeof location||a?{pathname:"",origin:"",search:"",hash:"",href:""}:location},25992:(e,t,n)=>{n.d(t,{KJ:()=>r,X3:()=>i,g5:()=>o});var a=n(39833);let i=void 0===a.XC,r=!i;function o(){return!!i||!a.XC||!!(a.XC.querySelector('react-app[data-ssr="true"]')||a.XC.querySelector('react-partial[data-ssr="true"][partial-name="repos-overview"]'))}},57516:(e,t,n)=>{n.d(t,{X:()=>h,i:()=>d});var a=n(47584),i=n(75028),r=n(9080),o=n(75632),s=n(56176),l=n(70170);let c=[];function d(e,t=!1,n=.5){if(!a.X3&&!0!==(0,o.G7)("BROWSER_STATS_DISABLED")){if(n<0||n>1)throw RangeError("Sampling probability must be between 0 and 1");void 0===e.timestamp&&(e.timestamp=Date.now()),e.loggedIn=(0,s.M3)(),e.staff=h(),e.bundler=r.v,Math.random()<n&&c.push(e),t?p():m()}}let u=null,m=(0,l.n)(async function(){await i.K,null==u&&(u=window.requestIdleCallback(p))},5e3);function p(){if(u=null,!c.length)return;let e=a.XC?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(e){for(let t of function(e){let t=[],n=e.map(e=>JSON.stringify(e));for(;n.length>0;)t.push(function(e){let t=e.shift(),n=[t],a=t.length;for(;e.length>0&&a<=65536;){let t=e[0].length;if(a+t<=65536){let i=e.shift();n.push(i),a+=t}else break}return n}(n));return t}(c))!function(e,t){try{navigator.sendBeacon&&navigator.sendBeacon(e,t)}catch{}}(e,`{"stats": [${t.join(",")}] }`);c=[]}}function h(){return!!a.XC?.head?.querySelector('meta[name="user-staff"]')?.content}a.XC?.addEventListener("pagehide",p),a.XC?.addEventListener("visibilitychange",p)},42252:(e,t,n)=>{n.d(t,{S:()=>i});var a=n(96540);function i(e){let t=(0,a.useRef)(void 0);return(0,a.useEffect)(()=>{t.current=e},[e]),t.current}},18610:(e,t,n)=>{n.d(t,{N:()=>i});var a=n(96540);function i(e,{isPropUpdateDisabled:t=!1,isEqual:n=Object.is}={}){let[r,o]=(0,a.useState)(e),[s,l]=(0,a.useState)(e),c=e instanceof Function?e():e;return t||n(s,c)||(l(c),o(c)),[r,o]}},34225:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var a=n(74848),i=n(24774),r=n(96540),o=n(6585),s=n(5853),l=n(9299),c=n(45230),d=n(54528),u=n(15874);let m=(0,n(91752).zw)()?[]:[{key:"Alt-g",run:()=>!0,preventDefault:!0}],p=[(0,c.b6)(),(0,u.WD)(),(0,i.$K)({formatNumber:e=>e.toString().padStart(3," ")}),(0,u.SG)(),(0,i.vX)({position:"absolute"}),(0,d.$P)({top:!0}),i.Lz.editorAttributes.of({class:"js-codemirror-editor","data-testid":"codemirror-editor"}),i.w4.of([...m,...c.pw,...d.Eo,...c.cL])];var h=n(43720);let f={"&":{background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--codeMirror-fgColor, var(--color-codemirror-text))",cursor:"text"},".cm-gutters":{background:"var(--codeMirror-gutters-bgColor, var(--color-codemirror-gutters-bg))",borderRightWidth:0},".cm-lineNumbers .cm-gutterElement":{color:"var(--codeMirror-lineNumber-fgColor, var(--color-codemirror-linenumber-text))",fontFamily:"var(--fontStack-monospace)",fontSize:"var(--codeMirror-gutter-fontSize, var(--codeMirror-content-fontSize, 12px))",lineHeight:"20px",padding:"0 16px 0 16px"},".cm-content":{caretColor:"var(--codeMirror-cursor-fgColor, var(--color-codemirror-cursor))",fontFamily:"var(--fontStack-monospace)",fontSize:"var(--codeMirror-content-fontSize, 12px)",background:"var(--codeMirror-lines-bgColor, var(--color-codemirror-lines-bg))",lineHeight:"20px",paddingTop:"8px"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},"&.cm-focused":{outline:"none"},"&.hide-help-until-focus":{"&.cm-focused .cm-panels-bottom":{display:"block"},"& .cm-panels-bottom":{display:"none"}},".cm-content ::-moz-selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},".cm-activeLine":{backgroundColor:"var(--codeMirror-activeline-bgColor, var(--color-codemirror-activeline-bg))"},".cm-line":{paddingLeft:"16px"},".cm-help-panel":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"7px 10px",margin:0,fontSize:"13px",lineHeight:"16px",color:"var(--fgColor-muted, var(--color-fg-muted))",cursor:"default"},".cm-panels-bottom":{borderTop:"var(--borderWidth-thin, 1px) solid var(--borderColor-default, var(--color-border-default))",background:"none"},".js-upload-markdown-image & .cm-panels-bottom":{bottom:"30px !important"},".cm-panel.cm-search":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"8px",fontSize:"16px"},".cm-panel.cm-search > button":{borderRadius:"6px",padding:"4px 8px",background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--button-default-fgColor-rest, var(--color-btn-text))",border:"1px solid var(--button-default-borderColor-rest, var(--color-btn-border))",textTransform:"capitalize"},".cm-panel.cm-search > label":{color:"var(--fgColor-default, var(--color-fg-default))",textTransform:"capitalize",fontSize:"12px"},".cm-panel.cm-search > input":{borderRadius:"6px",padding:"4px 8px",background:"var(--bgColor-default, var(--color-canvas-default))",color:"var(--fgColor-default, var(--color-fg-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",fontSize:"12px"},'.cm-panel.cm-search > button[name="close"]':{padding:"4px"},".cm-panels-top":{borderBottom:"var(--borderWidth-thin, 1px) solid var(--color-border-default)",background:"none"},".cm-panel.cm-search input, .cm-panel.cm-search button, .cm-panel.cm-search label":{marginRight:"8px",marginBottom:"4px",marginTop:"4px",marginLeft:0},".cm-lintRange":{cursor:"help",backgroundImage:"none !important"},".cm-placeholder":{height:"1em",color:"var(--fgColor-muted)"},"&.custom-tooltips .cm-tooltip":{border:"none !important",backgroundColor:"transparent !important"},"&.custom-tooltips .cm-diagnostic":{padding:0,marginLeft:"0 !important",borderLeft:"none !important",whiteSpace:"unset"}},g=[{tag:[h._A.keyword],color:"var(--codeMirror-syntax-fgColor-keyword, var(--color-codemirror-syntax-keyword))"},{tag:[h._A.comment],color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"},{tag:[h._A.bracket],color:"var(--codeMirror-matchingBracket-fgColor, var(--color-codemirror-matchingbracket-text))"},{tag:[h._A.string,h._A.url,h._A.regexp],color:"var(--codeMirror-syntax-fgColor-string, var(--color-codemirror-syntax-string))"},{tag:[h._A.constant(h._A.name),h._A.propertyName,h._A.attributeName],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[h._A.atom,h._A.number,h._A.bool],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[h._A.function(h._A.variableName)],color:"var(--codeMirror-syntax-fgColor-entity, var(--color-codemirror-syntax-entity))"},{tag:h._A.definition(h._A.variableName),color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"},{tag:h._A.meta,color:"inherit"},{tag:h._A.heading,fontWeight:"bold",color:"inherit !important"},{tag:h._A.monospace,color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"}],v=[{tag:h._A.link,textDecoration:"underline"},{tag:h._A.emphasis,fontStyle:"italic"},{tag:h._A.strong,fontWeight:"bold"},{tag:h._A.strikethrough,textDecoration:"line-through"}],x=[...g,...v],_=[...g,...v];function y(e=[]){let t=[...null!==document.querySelector('[data-color-mode="dark"]')?_:x,...e];return[i.Lz.theme(f),(0,u.y9)(u.cr.define(t),{fallback:!0})]}let C=e=>{let t=[o.$t.tabSize.of(e.indentUnit)];return e.indentWithTabs?t.push(u.Xt.of("	")):t.push(u.Xt.of(" ".repeat(e.indentUnit))),e.lineWrapping&&t.push(i.Lz.lineWrapping),t};var j=n(42378);let N=(e,t)=>{let{state:n,placeholder:a,replacementText:i}=e.detail;"uploading"===n?(0,j.w0)(t)?(0,j.tJ)(t,a):(0,j.TC)(t,i):("uploaded"===n||"failed"===n)&&(0,j.TB)(t,a,i)},b=(e,t)=>{let{left:n,top:a}=e.detail,i=t.posAtCoords({x:n,y:a});i&&t.dispatch({selection:{anchor:i,head:i}})},I=new WeakMap;function S(e,t){if((0,j.w0)(e)){let n=(0,j.Lo)(e.state);(0,j.tJ)(e,`${t}${n}${t}`)}else{let n=(0,j.BE)(e);(0,j.TC)(e,t.repeat(2)),(0,j.f9)(e,n.anchor+t.length)}return!0}function w(e,t){let n=(0,j.BE)(e),a=e.state.doc.lineAt(n.from),i=(0,j.Lo)(e.state),r=RegExp(`^${"ol"===t?"\\d+\\.":t}\\s`);if(i){let n=(i.endsWith("\n")?i.slice(0,-2):i).split("\n").map((t,n)=>{let i=a.number+n;return{text:e.state.doc.line(i).text,lineNumber:i}}),o=n.every(e=>r.test(e.text));for(let a=0;a<n.length;a++){let i=n[a];if(o){let t=i.text.match(r);t&&(0,j.YH)(e,i?.lineNumber,t[0])}else{let n=`${"ol"===t?`${a+1}.`:t} `;(0,j.Md)(e,i?.lineNumber,n)}}}else{let i=a.text.match(r);if(i)(0,j.YH)(e,a.number,i[0]);else{let i=`${"ol"===t?"1.":t} `;(0,j.Md)(e,a.number,i),a.text||(0,j.f9)(e,n.anchor+i.length)}}return!0}let E=[{key:"Mod-i",run:e=>S(e,"_"),preventDefault:!0},{key:"Mod-b",run:e=>S(e,"**"),preventDefault:!0},{key:"Mod-e",run:e=>S(e,"`"),preventDefault:!0},{key:"Mod-k",run:e=>{let t=(0,j.Lo)(e.state);if(t){let n=`[${t}](url)`;(0,j.tJ)(e,n);let a=(0,j.I6)(e,n).value.from;(0,j.td)(e,a+t.length+3,a+t.length+6)}else{let t=(0,j.BE)(e);(0,j.TC)(e,"[](url)"),(0,j.f9)(e,t.anchor+1)}return!0},preventDefault:!0},{key:"Shift-Mod-.",run:e=>w(e,">"),preventDefault:!0},{key:"Shift-Mod-7",run:e=>w(e,"ol"),preventDefault:!0},{key:"Shift-Mod-8",run:e=>w(e,"-"),preventDefault:!0},{key:"Mod-v",run:e=>(I.set(e,!1),!1)},{key:"Shift-Mod-v",run:e=>(I.set(e,!0),!1)}];function k(e){let t=i.NZ.line({attributes:{dir:"auto"}}),n=new o.vB;for(let{from:a,to:i}of e.visibleRanges)for(let r=a;r<=i;){let a=e.state.doc.lineAt(r);n.add(a.from,a.from,t),r=a.to+1}return n.finish()}let T=i.Z9.fromClass(class{update(e){(e.docChanged||e.viewportChanged)&&(this.decorations=k(e.view))}constructor(e){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"decorations",void 0),this.decorations=k(e)}},{decorations:e=>e.decorations}),P=[i.Lz.domEventHandlers({keydown(e){(e.metaKey||e.ctrlKey)&&"k"===e.key&&e.stopPropagation()},paste(e,t){I.get(t)||function(e,t){let n=(0,j.Lo)(e.state),a=t.clipboardData;if(n&&a){let i=a.getData("text/plain");if(!/^https?:\/\//i.test(i))return;i&&(t.preventDefault(),(0,j.tJ)(e,`[${n}](${i})`))}}(t,e),I.set(t,!1)}}),i.w4.of(E),T];var A=n(47404),L=n(5225),O=n(48741);let R=(0,L.A)(async function(){let e=new Request("/autocomplete/emojis_for_editor",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),t=await fetch(e);if(200!==t.status)throw Error(`emoji request failed with a ${t.status}`);let n=await t.json();return Object.keys(n).map(e=>{let t=n[e];return{name:e,src:t[0],emoji:t[1]}})}),B=o.Pe.define({map:({from:e,to:t,severity:n},a)=>({from:a.mapPos(e),to:a.mapPos(t),severity:n})}),D=o.sU.define({create:()=>i.NZ.none,update(e,t){for(let n of(e=e.map(t.changes),t.effects))n.is(B)&&("error"===n.value.severity?e=e.update({add:[M.range(n.value.from,n.value.to)]}):"warning"===n.value.severity?e=e.update({add:[U.range(n.value.from,n.value.to)]}):"info"===n.value.severity&&(e=e.update({add:[$.range(n.value.from,n.value.to)]})));return e},provide:e=>i.Lz.decorations.from(e)}),M=i.NZ.mark({class:"CodeMirror-lint-mark-error"}),U=i.NZ.mark({class:"CodeMirror-lint-mark-warning"}),$=i.NZ.mark({class:"CodeMirror-lint-mark-info"}),V=(e,t)=>{let{from:n,to:a,severity:i}=e.detail,r=(0,j.TU)(t,{line:n.lineNumber,ch:n.character}),o=(0,j.TU)(t,{line:a.lineNumber,ch:a.character});t.dispatch({effects:[B.of({from:r,to:o,severity:i})]})},W={ruby:[{tag:h._A.variableName,color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"}],html:[{tag:h._A.meta,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.name,color:"var(--color-prettylights-syntax-entity-tag)"}],javascript:[{tag:h._A.name,color:"var(--color-prettylights-syntax-variable)"}],typescript:[{tag:h._A.name,color:"var(--color-prettylights-syntax-variable)"},{tag:h._A.typeName,color:"var(--color-prettylights-syntax-keyword)"}],java:[{tag:h._A.typeName,color:"var(--color-prettylights-syntax-entity)"}],"c++":[{tag:h._A.meta,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.typeName,color:"var(--color-prettylights-syntax-keyword)"}],php:[{tag:h._A.processingInstruction,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.name,color:"var(--color-prettylights-syntax-entity)"}]},F=Object.keys(W);var z=n(48031);let H={key:"Tab",run:({state:e,dispatch:t})=>e.selection.ranges.some(e=>!e.empty)?(0,c.UY)({state:e,dispatch:t}):(t(e.update(e.replaceSelection(e.facet(u.Xt)),{scrollIntoView:!0,userEvent:"input"})),!0),shift:c.Mg},G=(0,r.forwardRef)((e,t)=>{let{value:n="",extensions:c=[],keyBindings:d=[],height:u="85vh",width:m="100%",focusNextRenderRef:h,containerClassName:f,...g}=e,v=(0,r.useRef)(null),x=function({extensions:e=[],fileName:t="",onChange:n,spacing:a,isHpc:c,isReadOnly:d,enableFileUpload:u,parentRef:m,placeholder:h="Enter file contents here",ariaLabelledBy:f,value:g,width:v="",height:x="",minHeight:_="",hideHelpUntilFocus:j,onCreateEditor:I,onDestroyEditor:S}){let w=(0,r.useRef)(void 0),E=(0,r.useMemo)(()=>new o.xx,[]),k=(0,r.useMemo)(()=>new o.xx,[]),T=(0,r.useMemo)(()=>new o.xx,[]),L=(0,r.useCallback)(e=>{e.docChanged&&n(e.state.doc.toString()||"")},[n]),B=i.Lz.updateListener.of(L),M=i.Lz.theme({"&":{height:x,minHeight:_,width:v}}),U=(0,r.useMemo)(()=>[...p,B,M,(0,i.qf)(h),...C(a),[i.Lz.domEventHandlers({"secret-detected:lint":V}),D],E.of([]),k.of([]),T.of([y()]),[i.Z9.fromClass(class{constructor(e){e.scrollDOM.tabIndex=0,e.scrollDOM.setAttribute("role","region"),e.scrollDOM.setAttribute("aria-labelledby",f)}})],i.Lz.contentAttributes.of({"aria-labelledby":`${f} focus-trap-help-panel`}),i.Lz.editorAttributes.of({class:j?"hide-help-until-focus":""})],[B,M,h,a,E,k,T,f,j]);return u&&(U.push((0,i.A)()),U.push([i.Lz.domEventHandlers({"upload:editor:change":N,"upload:editor:cursor":b})])),c&&U.push(i.Lz.editorAttributes.of({"data-hpc":"true"})),d?U.push(o.$t.readOnly.of(!0)):U.push([function(e,t,n){let a=new o.xx;return[a.of(n?t:[]),i.w4.of([{key:e,run:function(e){let n=a.get(e.state)===t;return e.dispatch({effects:a.reconfigure(n?[]:t)}),!0}}])]}("Shift-Ctrl-m",i.w4.of([H]),!0),(0,z.G)(function(){let e=document.createElement("div"),t=e=>{let t=document.createElement("kbd");return t.textContent=e,t};return e.append("Use ",t("Control + Shift + m")," to toggle the ",t("tab")," key moving focus. Alternatively, use ",t("esc")," then ",t("tab")," to move to the next interactive element on the page."),e.className="cm-help-panel",e.id="focus-trap-help-panel",e}())]),U=U.concat(e),(0,r.useEffect)(()=>{let e=m.current;if(!e)return;let t=o.$t.create({doc:g,extensions:U}),n=new i.Lz({state:t,parent:e});return I?.(n),w.current=n,()=>{n.destroy(),S?.(n)}},[]),(0,r.useEffect)(()=>{w.current&&(w.current.dispatch({effects:k.reconfigure([])}),w.current.dispatch({effects:o.Pe.reconfigure.of(U)}))},[k,U]),(0,r.useEffect)(()=>{if(w.current&&void 0!==g){let e=w.current.state.doc.toString()||"",t=g||"";t!==e&&w.current.dispatch({changes:{from:0,to:e.length,insert:t}})}},[g]),(0,r.useEffect)(()=>{let e=async()=>{let e=t.split(".").pop()||"",n=e?s.e.find(n=>n.extensions.includes(e)||n.filename&&n.filename.test(t)):void 0;if(n&&w.current){var a;let e=(a=n.name,F.includes(a.toLowerCase())?W[a.toLowerCase()]:null);e&&w.current.dispatch({effects:T.reconfigure(y(e))}),"Markdown"===n.name?(w.current.dispatch({effects:E.reconfigure((0,l.markdown)({base:l.markdownLanguage}))}),w.current.dispatch({effects:o.Pe.reconfigure.of([...P,...U])}),w.current.dispatch({effects:k.reconfigure([O.E,(0,A.yU)({override:[async e=>(function(e,t=[]){let n=e.matchBefore(/:\w+/);if(!n||n&&n.from===n.to&&!e.explicit)return null;let a=t.filter(e=>-1!==e.name.indexOf(n.text.replace(":",""))).map(e=>({label:e.name,apply:e.emoji||`:${e.name}:`,type:e.src}));return{from:n.from,to:n.to,options:a,filter:!1}})(e,await R())],icons:!1,addToOptions:[{render:e=>{let t=document.createElement("img");return t.className="emoji emoji-result mr-2",t.height=20,t.width=20,t.alt=`:${e.label}:`,t.src=e.type,t.setAttribute("async",""),t},position:0}]}),o.Nb.highest(i.w4.of([{key:"Tab",run:A.$w}]))])})):(w.current.dispatch({effects:k.reconfigure([])}),w.current.dispatch({effects:E.reconfigure(await n.load())}))}};w.current&&e()},[t,E,k,U,T]),w}({parentRef:v,value:n,height:u,width:m,extensions:[...c,i.w4.of(d)],...g});return(0,r.useImperativeHandle)(t,()=>({editor:v.current,view:x.current}),[v,x]),h?.current&&x&&(window.requestAnimationFrame(()=>{x.current&&!x.current.hasFocus&&x.current.focus()}),h.current=!1),(0,a.jsx)("div",{className:f,ref:v})});G.displayName="CodeMirror";let K=G},14987:(e,t,n)=>{n.d(t,{l:()=>u});var a=n(74848),i=n(51349),r=n(57572),o=n(96540),s=n(2622),l=n(54912);let c=(0,a.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.7C6.15313 9.85483 7.09616 9.3 8 9.3C8.47794 9.3 9.0345 9.50535 9.54632 9.9146C9.83116 10.1424 10.0753 10.4124 10.2645 10.7H5.65646ZM11.8447 11.016C11.3379 9.39273 9.66897 8 8 8C6.30092 8 4.60185 9.23723 4.12902 11.011C3.98676 11.5446 4.44771 12 5 12H11C11.5523 12 12.0093 11.5432 11.8447 11.016Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.89649 4.7586C4.02981 4.42529 4.40809 4.26317 4.7414 4.39649L7.00928 5.30364C7.63789 5.55509 7.6379 6.44491 7.00928 6.69636L4.7414 7.60351C4.40809 7.73683 4.02981 7.57471 3.89649 7.2414C3.76317 6.90809 3.92529 6.52981 4.2586 6.39649L5.24982 6L4.2586 5.60351C3.92529 5.47019 3.76317 5.09191 3.89649 4.7586Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1035 4.7586C11.9702 4.42529 11.5919 4.26317 11.2586 4.39649L8.99072 5.30364C8.36211 5.55509 8.3621 6.44491 8.99072 6.69636L11.2586 7.60351C11.5919 7.73683 11.9702 7.57471 12.1035 7.2414C12.2368 6.90809 12.0747 6.52981 11.7414 6.39649L10.7502 6L11.7414 5.60351C12.0747 5.47019 12.2368 5.09191 12.1035 4.7586Z"})]}),d=[{name:"Hate it",value:1,icon:c,color:"veryDissatisfied"},{name:"Not great",value:2,icon:(0,a.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,a.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3416 11.8591C9.33064 10.0058 6.66936 10.0058 5.65842 11.8591C5.46007 12.2228 5.0045 12.3568 4.64086 12.1584C4.27722 11.9601 4.14323 11.5045 4.34158 11.1409C5.92104 8.24518 10.079 8.24518 11.6584 11.1409C11.8568 11.5045 11.7228 11.9601 11.3591 12.1584C10.9955 12.3568 10.5399 12.2228 10.3416 11.8591Z"})]}),color:"dissatisfied"},{name:"It\u2019s ok",value:3,icon:(0,a.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,a.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3569 9.61413C9.28933 11.3934 6.71067 11.3934 5.64312 9.61413C5.43001 9.25894 4.96931 9.14377 4.61413 9.35688C4.25894 9.56999 4.14377 10.0307 4.35688 10.3859C6.00704 13.1361 9.99296 13.1361 11.6431 10.3859C11.8562 10.0307 11.7411 9.56999 11.3859 9.35688C11.0307 9.14377 10.57 9.25894 10.3569 9.61413Z"})]}),color:"satisfied"},{name:"Love it",value:4,icon:(0,a.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.3C6.15313 11.1452 7.09616 11.7 8 11.7C8.47794 11.7 9.0345 11.4947 9.54632 11.0854C9.83116 10.8576 10.0753 10.5876 10.2645 10.3H5.65646ZM11.8447 9.98403C11.3379 11.6073 9.66897 13 8 13C6.30092 13 4.60185 11.7628 4.12902 9.98904C3.98676 9.45539 4.44771 9 5 9H11C11.5523 9 12.0093 9.45684 11.8447 9.98403Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3292 6.83541C10.9875 6.15213 10.0125 6.15213 9.67082 6.83541C9.48558 7.20589 9.03507 7.35606 8.66459 7.17082C8.29411 6.98558 8.14394 6.53507 8.32918 6.16459C9.22361 4.37574 11.7764 4.37574 12.6708 6.16459C12.8561 6.53507 12.7059 6.98558 12.3354 7.17082C11.9649 7.35606 11.5144 7.20589 11.3292 6.83541Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.32918 6.83541C5.98754 6.15213 5.01246 6.15213 4.67082 6.83541C4.48558 7.20589 4.03507 7.35606 3.66459 7.17082C3.29411 6.98558 3.14394 6.53507 3.32918 6.16459C4.22361 4.37574 6.77639 4.37574 7.67082 6.16459C7.85606 6.53507 7.70589 6.98558 7.33541 7.17082C6.96493 7.35606 6.51442 7.20589 6.32918 6.83541Z"})]}),color:"verySatisfied"}],u=(0,o.forwardRef)(function({mode:e},t){let n=(0,o.useRef)(null),c=(0,o.useRef)(null),u=(0,o.useRef)(void 0);(0,o.useImperativeHandle)(t,()=>({openDialog:e=>{u.current=e,s.W.copilotChatInterviewSurvey?n.current?.openDialog():c.current?.openDialog(e)}}));let m=async(t,n)=>{let a=[];if(null==t&&a.push("Please select a rating."),n.length>2e3&&a.push("Please keep your feedback within 2000 characters or less."),a.length>0)return a;let i={rating:t,content:n,hostname:window.location.hostname,path:window.location.pathname,mode:e};try{(await (0,r.lS)("/github-copilot/feedback",{method:"POST",body:i})).ok||a.push("An error occurred while submitting your feedback.")}catch{a.push("An error occurred while submitting your feedback.")}return a};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.E,{ref:n,onClose:e=>{"no-thanks"===e&&c.current?.openDialog(u.current)}}),(0,a.jsx)(i.N,{ref:c,options:d,onSubmit:m})]})});u.displayName="ConversationFeedbackDialog"},25408:(e,t,n)=>{n.d(t,{Y:()=>I});var a,i=n(74848),r=n(70170),o=n(46988),s=n(53949),l=n(11499),c=n(38568),d=n(57572),u=n(16255),m=n(73451),p=n(51856),h=n(55847),f=n(91246),g=n(96540),v=n(65615),x=n(7426);let _={footerContainer:"PersonalInstructionsDialog-module__footerContainer--YsPvr"};var y=n(38621),C=n(8338);let j={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},N=(0,g.forwardRef)(function(e,t){let{onSelect:n}=e,[a,r]=(0,g.useState)(!1);return(0,i.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:{marginBottom:"1px"},children:[(0,i.jsx)(C.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:a&&Object.entries(j)?.map(([e,t])=>i.jsxs(C.l.Item,{"aria-label":`${t.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>n(e,t.body),children:[i.jsx(y.PlusIcon,{}),e]},e))}),(0,i.jsx)(C.l,{className:"d-flex flex-column flex-justify-end",children:(0,i.jsx)(C.l.Item,{"aria-label":a?"Hide templates":"Show templates","data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:{border:"1px solid transparent"},onSelect:()=>r(!a),children:a?(0,i.jsx)(y.XIcon,{}):(0,i.jsx)(y.LightBulbIcon,{})})})]})});try{N.displayName||(N.displayName="PersonalInstructionsTemplates")}catch{}try{(a=PersonalInstructionsTemplatesWithRef).displayName||(a.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let b=(e,t=500)=>{let[n,a]=(0,g.useState)(48);return(0,g.useEffect)(()=>{let n=(0,r.s)(()=>{e?.current&&a(e.current.clientHeight??48)},t),i=new ResizeObserver(n);return e?.current&&i.observe(e.current),()=>{n.cancel(),i?.disconnect?.()}},[e,t]),n},I=({onDismiss:e})=>{let t=(0,v.Pk)(),n=(0,x.b)(),[a,r]=(0,g.useState)(t.personalInstructions??""),[y,C]=(0,g.useState)(void 0),[j,I]=(0,g.useState)(!1),w=(0,g.useRef)(null),E=(0,g.useRef)(null),[k,T]=(0,g.useState)(""),P=b(E);(0,c.N)(()=>{w?.current&&(w.current.scrollTop=w.current.scrollHeight)},[a]);let A=(0,g.useCallback)(async()=>{if(!j){I(!0),k&&(0,o.BI)("copilot_personal_instruction_template_usage",{content:k});try{let t=await (0,d.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:a}});if(t.ok)(0,o.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),n.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:a}),e();else{let e=await t.json();C(String(e.errorMessage))}}catch{C("An error occurred while saving your personal instructions.")}finally{I(!1)}}},[j,a,n,e,k]),L=(e,t)=>{t&&(r(a?`${a}
${t}`:t),T(e),w?.current?.focus())},O=()=>{A()},R=(0,g.useCallback)(()=>{(0,o.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),e()},[e]);return(0,i.jsx)(u.Z,{children:(0,i.jsx)(f.l,{onClose:R,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",renderBody:()=>(0,i.jsx)(f.l.Body,{children:(0,i.jsx)("form",{onSubmit:A,children:(0,i.jsxs)(m.A,{children:[(0,i.jsx)(m.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,i.jsx)("div",{className:"width-full position-relative",children:(0,i.jsxs)(l.tL,{commands:{"github:submit-form":O},children:[(0,i.jsx)(p.Ay,{ref:w,className:"width-full",style:{paddingBottom:`${P}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:a,validationStatus:y||a.length>600?"error":void 0,...(0,s.G)("prompt-input"),onChange:e=>{r(e.target.value),C(void 0)}}),(0,i.jsx)(N,{ref:E,onSelect:L})]})}),(0,i.jsx)(S,{text:a,promptCharLimit:600}),y&&(0,i.jsx)(m.A.Validation,{variant:"error",children:(0,i.jsx)("span",{...(0,s.G)("error-message"),children:y})})]})})}),renderFooter:()=>(0,i.jsxs)("div",{className:_.footerContainer,children:[(0,i.jsx)(h.Q,{variant:"default",onClick:R,children:"Cancel"}),(0,i.jsx)(h.Q,{loading:j,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:A,children:"Save"})]})})})};function S({text:e,promptCharLimit:t}){let n=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-tabular-nums",...(0,s.G)("current-character-count"),children:e.length})," ","/ ",t," characters"]});return(0,i.jsx)(i.Fragment,{children:e.length>t?(0,i.jsx)(m.A.Validation,{variant:"error",children:n}):(0,i.jsx)(m.A.Caption,{children:n})})}try{I.displayName||(I.displayName="PersonalInstructionsDialog")}catch{}try{S.displayName||(S.displayName="CharacterCount")}catch{}},57393:(e,t,n)=>{n.d(t,{X:()=>x});var a=n(74848),i=n(38621),r=n(16255),o=n(73451),s=n(51856),l=n(67138),c=n(75177),d=n(46309),u=n(81679),m=n(87330),p=n(55847),h=n(91246),f=n(96540),g=n(37937),v=n(7426);let x=({onDismiss:e,promptDialogRef:t})=>{let n=(0,v.b)(),x=g.J.settings,[_,y]=(0,f.useState)(x?.instructionPrompt||void 0),[C,j]=(0,f.useState)(x?.skillOverrides??[]),[N,b]=(0,f.useState)(x?.temperature||.7),I=(0,f.useRef)(void 0),S=(0,f.useCallback)(async()=>{if(I.current){y(I.current);return}let e=await n.getSystemPrompt();I.current=e,y(e)},[n]);(0,f.useEffect)(()=>{(async()=>{void 0===_&&await S()})()},[S,n,_]);let w=(0,f.useCallback)(()=>{S(),j([]),b(.7)},[S]);return(0,a.jsx)(r.Z,{children:(0,a.jsxs)(h.l,{ref:t,onClose:e,title:"Prompt Settings",width:"xlarge",sx:{overflow:"auto"},children:[(0,a.jsxs)(h.l.Body,{children:[(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{children:"System Instructions"}),(0,a.jsx)(o.A.Caption,{children:(0,a.jsx)("span",{children:"Make adjustments to the system instructions or add new instructions."})}),(0,a.jsx)(s.Ay,{block:!0,sx:{my:2},"aria-label":"Prompt",name:"Prompt",value:_,onChange:e=>y(e.target.value)})]}),(0,a.jsxs)(o.A,{sx:{pt:3},children:[(0,a.jsx)(o.A.Label,{children:"Temperature"}),(0,a.jsx)(o.A.Caption,{children:"Controls the randomness of the model's responses. Lower temperatures are more deterministic, while higher temperatures are more random."}),(0,a.jsx)(l.A,{type:"number",min:"0",max:"1",step:"0.01",block:!0,value:N,onChange:e=>b(Number(e.target.value))})]}),(0,a.jsx)(c.A,{sx:{fontSize:3,py:3},children:"Tools"}),C.map((e,t)=>(0,a.jsxs)(f.Fragment,{children:[(0,a.jsxs)(d.B,{direction:"horizontal",sx:{py:2},children:[(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{children:"Name"}),(0,a.jsx)(o.A.Caption,{children:(0,a.jsx)("span",{children:"Slug of tool you want to adjust"})}),(0,a.jsx)(l.A,{defaultValue:e.slug,onChange:e=>{C.map((n,a)=>{a===t&&(n.slug=e.target.value)})}})]}),(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{children:"Description"}),(0,a.jsx)(o.A.Caption,{children:(0,a.jsx)("span",{children:"Make changes to the tool description"})}),(0,a.jsx)(l.A,{defaultValue:e.description,onChange:n=>{C.map((a,i)=>{i===t&&(e.description=n.target.value)})}})]}),(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{id:"toggle",children:"Enabled?"}),(0,a.jsx)(u.A,{size:"small","aria-labelledby":"toggle",defaultChecked:e.enabled,onChange:e=>{C.map((n,a)=>{a===t&&(n.enabled=e)})}})]}),(0,a.jsx)(m.K,{icon:i.TrashIcon,"aria-label":"Delete tool",variant:"invisible",sx:{mt:"20px"},onClick:()=>{let e=[...C];1===C.length?j([]):(e.splice(t,1),j(e))}})]}),t===C.length-1&&(0,a.jsx)(p.Q,{leadingVisual:(0,a.jsx)(i.PlusIcon,{}),onClick:()=>j([...C,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add another tool"})]},`tool-${e.slug}-${Math.random()}`)),0===C.length&&(0,a.jsx)(p.Q,{leadingVisual:(0,a.jsx)(i.PlusIcon,{}),onClick:()=>j([...C,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add a tool"})]}),(0,a.jsx)(h.l.Footer,{children:(0,a.jsx)(h.l.Buttons,{buttons:[{type:"button",onClick:e,content:"Cancel"},{type:"button",onClick:w,content:"Reset"},{type:"submit",onClick:()=>{let t=C.filter(e=>e.slug&&e.description);n.setCopilotSettings({instructionPrompt:_||"",skillOverrides:t,temperature:N}),e()},content:"Save",buttonType:"primary"}]})})]})})};try{x.displayName||(x.displayName="PromptDialog")}catch{}},2497:(e,t,n)=>{n.d(t,{Vx:()=>d});var a,i,r=n(74848),o=n(38621),s=n(96540),l=n(84976);let c={subList:"Navigation-module__subList--Ued7A",section:"Navigation-module__section--KRddB",expandButton:"Navigation-module__expandButton--v40lv",item:"Navigation-module__item--KtIqz",link:"Navigation-module__link--ybSvz",contextButton:"Navigation-module__contextButton--AhNds",icon:"Navigation-module__icon--szbQF",textWrapper:"Navigation-module__textWrapper--qEAz8",text:"Navigation-module__text--KFINZ"};function d({"aria-current":e,children:t,contextMenuComponent:n,expandOnClick:a=!0,hasItems:i,href:d,icon:u,iconOverride:m,onLinkClick:p,id:h,displayName:f}){let[g,v]=(0,s.useState)(!1),x={"aria-current":e,className:c.link,onClick:e=>{p?.(e,h),a&&v(!0)}};return(0,r.jsxs)("li",{className:c.section,children:[(0,r.jsxs)("div",{className:c.item,children:[i&&(0,r.jsx)("button",{"aria-label":"Expand","aria-expanded":g,className:c.expandButton,onClick:()=>{v(!g)},children:g?(0,r.jsx)(o.ChevronDownIcon,{size:12}):(0,r.jsx)(o.ChevronRightIcon,{size:12})}),(0,r.jsxs)(l.N_,{to:d,...x,children:[u?(0,r.jsx)(u,{size:16,className:c.icon}):m,(0,r.jsx)("div",{className:c.textWrapper,children:(0,r.jsx)("div",{className:c.text,children:f})})]}),n]}),g&&i&&(0,r.jsx)("ul",{className:c.subList,children:t})]})}try{d.displayName||(d.displayName="Navigation")}catch{}try{(a=function({"aria-current":e,contextMenuComponent:t,displayName:n,href:a,icon:i,iconOverride:o,onLinkClick:s}){return(0,r.jsxs)("li",{className:c.item,children:[(0,r.jsxs)(l.N_,{className:c.link,to:a,"aria-current":e,onClick:s,children:[i?(0,r.jsx)(i,{size:16,className:c.icon}):o,(0,r.jsx)("div",{className:c.textWrapper,children:(0,r.jsx)("div",{className:c.text,children:n})})]}),t]})}).displayName||(a.displayName="NavigationSubItem")}catch{}try{(i=function(e){return(0,r.jsx)("button",{...e,className:c.contextButton,children:(0,r.jsx)(o.KebabHorizontalIcon,{size:16})})}).displayName||(i.displayName="NavigationContextMenuButton")}catch{}},83150:(e,t,n)=>{n.d(t,{BH:()=>p,xx:()=>h});var a=n(74848),i=n(65615),r=n(44848),o=n(42252),s=n(96540),l=n(32837),c=n(54533);let d=(0,s.createContext)(void 0),u=new Map,m=[];function p({children:e}){let[t,n]=(0,s.useState)(u),[p,h]=(0,s.useState)(m),[f,g]=(0,s.useState)(m),[v,x]=(0,s.useState)([]),[_,y]=(0,s.useState)(void 0),[C,j,N]=(0,l.B)(!1),[b,I,S]=(0,l.B)(!1),w=(0,r.nu)((0,i.A3)("activePlugin")),E=(0,o.S)((0,i.pn)(e=>e.selectedThreadID)),k=(0,i.pn)(e=>e.selectedThreadID);(0,s.useEffect)(()=>{E&&E!==k&&(n(u),h(m),y(void 0),w?.PreviewAreaComponent||N())},[N,k,E,w]);let T=(0,s.useCallback)((e,t=!0)=>{h(t=>{if(t.includes(e))return t;let n=(0,c.oy)(e),a=t.findIndex(e=>(0,c.oy)(e)===n),i=[...t];return -1===a?i.push(e):i.splice(a,1,e),i}),t&&y(e)},[]),P=(0,s.useCallback)(e=>{n(t=>{let n=new Map(t);return n.set(e.id,e),n})},[]),A=(0,s.useCallback)(e=>{let t=p.indexOf(e);h(t=>t.filter(t=>t!==e)),_===e&&y(t>0?p[t-1]:p[0])},[p,_]),L=(0,s.useCallback)(e=>{if(e)for(let t of e)n(e=>{let n=new Map(e);return n.delete(t),n}),h(e=>e.filter(e=>e!==t));else n(u),h(m),y(void 0)},[]),O=(0,s.useMemo)(()=>{let e=new Map;for(let[n,a]of t){let t=(0,c.oy)(n),i=e.get(t)??[];i.push(a.id),e.set(t,i)}for(let n of e.values())n.sort((e,n)=>{let a=t.get(e),i=t.get(n);return"timestamp"in a&&"timestamp"in i?a.timestamp.valueOf()-i.timestamp.valueOf():0});return e},[t]),R=(0,s.useMemo)(()=>({items:t,versionedItems:O,openItems:C?p:m,openItemsBeforeSubthreadChange:f,messagesBeforeSubthreadChange:v,previewPaneOpen:C,selectedItem:_,updateItem:P,setOpenItemsBeforeSubthreadChange:g,setMessagesBeforeSubthreadChange:x,openItem:T,closeItem:A,openPreviewPane:j,closePreviewPane:N,removeItems:L,showLoadingState:b,enableLoadingState:I,disableLoadingState:S}),[t,O,C,p,f,v,_,P,g,x,T,A,j,N,L,b,I,S]);return(0,a.jsx)(d.Provider,{value:R,children:e})}function h(){let e=(0,s.useContext)(d);if(!e)throw Error("useContentPreview must be used within ContentPreviewContextProvider");return e}try{d.displayName||(d.displayName="ContentPreviewContext")}catch{}try{p.displayName||(p.displayName="ContentPreviewProvider")}catch{}},64633:(e,t,n)=>{n.d(t,{t:()=>o});var a=n(74848),i=n(8338),r=n(39483);function o({onClick:e}){return Object.entries(r.A).map(([t,{name:n,url:r,icon:o}])=>(0,a.jsxs)(i.l.LinkItem,{href:r,onClick:()=>e?.(t),children:[n,(0,a.jsx)(i.l.LeadingVisual,{children:(0,a.jsx)("img",{src:o,alt:"",height:"20",width:"20"})})]},t))}try{o.displayName||(o.displayName="EditorMenuItems")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react","react-core","react-lib","octicons-react","react-profiling","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-62da9f","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-e7dcdd","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_tanstack_query-core_build_modern_queryObserver_js-node_modules_tanstack_-defd52","vendors-node_modules_react-relay_index_js","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_fzy_js_index_js-node_mo-b1360e","vendors-node_modules_github_hotkey_dist_index_js-node_modules_date-fns_getDaysInMonth_mjs-nod-70c11b","vendors-node_modules_lodash-es__baseIsEqual_js","vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js","vendors-node_modules_github_combobox-nav_dist_index_js-node_modules_github_g-emoji-element_di-24c074","vendors-node_modules_buffer_index_js","vendors-node_modules_react-relay_hooks_js-node_modules_color2k_dist_index_exports_import_es_m-e8b6bb","vendors-node_modules_remark-gfm_lib_index_js-node_modules_remark-parse_lib_index_js-node_modu-44d0fc","vendors-node_modules_highlight_js_es_core_js-node_modules_lowlight_lib_all_js","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-fe32b5","vendors-node_modules_hast-util-find-and-replace_lib_index_js-node_modules_hastscript_lib_inde-693930","vendors-node_modules_codemirror_autocomplete_dist_index_js-node_modules_codemirror_search_dis-aafe81","vendors-node_modules_codemirror_commands_dist_index_js-node_modules_codemirror_language-data_-92b5c9","vendors-node_modules_js-yaml_index_js","vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_accname_dist_access-a7695e","vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_tanstack_react-query_build_-971f15","vendors-node_modules_github_quote-selection_dist_index_js-node_modules_tanstack_react-query_b-3cf506","ui_packages_paths_index_ts","ui_packages_ui-commands_ui-commands_ts","ui_packages_date-picker_date-picker_ts-ui_packages_github-avatar_GitHubAvatar_tsx","ui_packages_item-picker_constants_labels_ts-ui_packages_item-picker_constants_values_ts-ui_pa-163a9a","ui_packages_item-picker_components_RepositoryPicker_tsx","ui_packages_comment-box_api_file-upload_ts-ui_packages_comment-box_api_preview_ts-ui_packages-2c5e84","ui_packages_issue-create_dialog_CreateIssueDialogEntry_tsx","ui_packages_drag-and-drop_drag-and-drop_ts","ui_packages_signed-commit-badge_index_ts-ui_packages_use-navigate_use-navigate_ts","ui_packages_copilot-chat_utils_copilot-local-storage_ts-ui_packages_hydro-analytics_hydro-ana-74ad7c","ui_packages_copilot-markdown_MarkdownRenderer_tsx","ui_packages_copilot-chat_utils_CopilotChatContext_tsx","ui_packages_item-picker_components_PullRequestAndBranchPicker_tsx","ui_packages_use-client-value_use-client-value_ts-ui_packages_issue-viewer_components_IssueVie-d05a8f","ui_packages_copilot-chat_components_CopilotIconAnimation_tsx-ui_packages_copilot-chat_compone-8be2e4","ui_packages_copilot-chat_hooks_use-chat-message-behavior_ts-ui_packages_copilot-chat_hooks_us-4cf731","ui_packages_issue-viewer_contexts_IssueViewerContext_tsx-ui_packages_issues-react_pages_issue-fd6415","ui_packages_app-uuid_app-uuid_ts-ui_packages_document-metadata_document-metadata_ts-ui_packag-7e8b56"],()=>t(67514)),e.O()}]);
//# sourceMappingURL=copilot-immersive-v1-b24615c33ec1.js.map