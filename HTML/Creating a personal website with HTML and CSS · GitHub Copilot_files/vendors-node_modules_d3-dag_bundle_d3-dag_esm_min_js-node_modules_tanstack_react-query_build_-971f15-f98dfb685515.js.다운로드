"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_tanstack_react-query_build_-971f15"],{78075:(t,e,i)=>{i.d(e,{AH:()=>ep,Hz:()=>ev,U9:()=>ey,X9:()=>ec,Ys:()=>el,n0:()=>eo,uU:()=>em,xp:()=>et});var n=Object.create,r=Object.defineProperty,o=Object.defineProperties,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,d=(t,e)=>{if(e=Symbol[t])return e;throw Error("Symbol."+t+" is not defined")},p=(t,e,i)=>e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,v=(t,e)=>{for(var i in e||(e={}))c.call(e,i)&&p(t,i,e[i]);if(h)for(var i of h(e))f.call(e,i)&&p(t,i,e[i]);return t},y=(t,e)=>o(t,a(e)),m=(t,e)=>{var i={};for(var n in t)c.call(t,n)&&0>e.indexOf(n)&&(i[n]=t[n]);if(null!=t&&h)for(var n of h(t))0>e.indexOf(n)&&f.call(t,n)&&(i[n]=t[n]);return i},g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),b=(t,e,i,n)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let o of l(e))c.call(t,o)||o===i||r(t,o,{get:()=>e[o],enumerable:!(n=s(e,o))||n.enumerable});return t},x=(t,e,i)=>(i=null!=t?n(u(t)):{},b(!e&&t&&t.__esModule?i:r(i,"default",{value:t,enumerable:!0}),t)),w=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},_=(t,e,i)=>(w(t,e,"read from private field"),i?i.call(t):e.get(t)),I=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},k=(t,e,i,n)=>(w(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),M=(t,e,i)=>(w(t,e,"access private method"),i),C=function(t,e){this[0]=t,this[1]=e},B=t=>{var e,i=t[d("asyncIterator")],n=!1,r={};return null==i?(i=t[d("iterator")](),e=t=>r[t]=e=>i[t](e)):(i=i.call(t),e=t=>r[t]=e=>{if(n){if(n=!1,"throw"===t)throw e;return e}return n=!0,{done:!1,value:new C(new Promise(n=>{var r=i[t](e);if(!(r instanceof Object))throw TypeError("Object expected");n(r)}),1)}}),r[d("iterator")]=()=>r,e("next"),"throw"in i?e("throw"):r.throw=t=>{throw t},"return"in i&&e("return"),r},V=g((t,e)=>{function i(t,e,i,n){this.feasible=i,this.evaluation=e,this.bounded=n,this._tableau=t}e.exports=i,i.prototype.generateSolutionSet=function(){for(var t={},e=this._tableau,i=e.varIndexByRow,n=e.variablesPerIndex,r=e.matrix,o=e.rhsColumn,s=e.height-1,a=Math.round(1/e.precision),l=1;l<=s;l+=1){var h=n[i[l]];if(!(void 0===h||!0===h.isSlack)){var u=r[l][o];t[h.id]=Math.round((Number.EPSILON+u)*a)/a}}return t}}),z=g((t,e)=>{var i=V();function n(t,e,n,r,o){i.call(this,t,e,n,r),this.iter=o}e.exports=n,n.prototype=Object.create(i.prototype),n.constructor=n}),S=g((t,e)=>{var i=V(),n=z();function r(t){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=t||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}function o(t,e){this.priority=t,this.reducedCosts=Array(e);for(var i=0;i<e;i+=1)this.reducedCosts[i]=0}e.exports=r,r.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()},o.prototype.copy=function(){var t=new o(this.priority,this.reducedCosts.length);return t.reducedCosts=this.reducedCosts.slice(),t},r.prototype.setOptionalObjective=function(t,e,i){var n=this.objectivesByPriority[t];void 0===n&&(n=new o(t,Math.max(this.width,e+1)),this.objectivesByPriority[t]=n,this.optionalObjectives.push(n),this.optionalObjectives.sort(function(t,e){return t.priority-e.priority})),n.reducedCosts[e]=i},r.prototype.initialize=function(t,e,i,n){this.variables=i,this.unrestrictedVars=n,this.width=t,this.height=e;for(var r=Array(t),o=0;o<t;o++)r[o]=0;this.matrix=Array(e);for(var s=0;s<e;s++)this.matrix[s]=r.slice();this.varIndexByRow=Array(this.height),this.varIndexByCol=Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=t+e-2,this.rowByVarIndex=Array(this.nVars),this.colByVarIndex=Array(this.nVars),this.lastElementIndex=this.nVars},r.prototype._resetMatrix=function(){var t,e,i=this.model.variables,n=this.model.constraints,r=i.length,o=n.length,s=this.matrix[0],a=!0===this.model.isMinimization?-1:1;for(t=0;t<r;t+=1){var l=i[t],h=l.priority,u=a*l.cost;0===h?s[t+1]=u:this.setOptionalObjective(h,t+1,u),e=i[t].index,this.rowByVarIndex[e]=-1,this.colByVarIndex[e]=t+1,this.varIndexByCol[t+1]=e}for(var c=1,f=0;f<o;f+=1){var d=n[f],p=d.index;this.rowByVarIndex[p]=c,this.colByVarIndex[p]=-1,this.varIndexByRow[c]=p;var v,y,m=d.terms,g=m.length,b=this.matrix[c++];if(d.isUpperBound){for(v=0;v<g;v+=1)y=m[v],b[this.colByVarIndex[y.variable.index]]=y.coefficient;b[0]=d.rhs}else{for(v=0;v<g;v+=1)y=m[v],b[this.colByVarIndex[y.variable.index]]=-y.coefficient;b[0]=-d.rhs}}},r.prototype.setModel=function(t){this.model=t;var e=t.nVariables+1,i=t.nConstraints+1;return this.initialize(e,i,t.variables,t.unrestrictedVariables),this._resetMatrix(),this},r.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var t=this.lastElementIndex;return this.lastElementIndex+=1,t},r.prototype.density=function(){for(var t=0,e=this.matrix,i=0;i<this.height;i++)for(var n=e[i],r=0;r<this.width;r++)0!==n[r]&&(t+=1);return t/(this.height*this.width)},r.prototype.setEvaluation=function(){var t=Math.round(1/this.precision),e=Math.round((Number.EPSILON+this.matrix[this.costRowIndex][this.rhsColumn])*t)/t;this.evaluation=e,0===this.simplexIters&&(this.bestPossibleEval=e)},r.prototype.getSolution=function(){var t=!0===this.model.isMinimization?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new n(this,t,this.feasible,this.bounded,this.branchAndCutIterations):new i(this,t,this.feasible,this.bounded)}}),$=g(()=>{var t=S();t.prototype.simplex=function(){return this.bounded=!0,this.phase1(),!0===this.feasible&&this.phase2(),this},t.prototype.phase1=function(){for(var t=this.model.checkForCycles,e=[],i=this.matrix,n=this.rhsColumn,r=this.width-1,o=this.height-1,s=0;;){for(var a=0,l=-this.precision,h=1;h<=o;h++){this.unrestrictedVars[this.varIndexByRow[h]];var u=i[h][n];u<l&&(l=u,a=h)}if(0===a)return this.feasible=!0,s;for(var c=0,f=-1/0,d=i[0],p=i[a],v=1;v<=r;v++){var y=p[v];if(!0===this.unrestrictedVars[this.varIndexByCol[v]]||y<-this.precision){var m=-d[v]/y;f<m&&(f=m,c=v)}}if(0===c)return this.feasible=!1,s;if(t){e.push([this.varIndexByRow[a],this.varIndexByCol[c]]);var g=this.checkForCycles(e);if(g.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+g[0]),this.model.messages.push("Length :"+g[1]),this.feasible=!1,s}this.pivot(a,c),s+=1}},t.prototype.phase2=function(){for(var t,e,i=this.model.checkForCycles,n=[],r=this.matrix,o=this.rhsColumn,s=this.width-1,a=this.height-1,l=this.precision,h=this.optionalObjectives.length,u=null,c=0;;){var f=r[this.costRowIndex];h>0&&(u=[]);for(var d=0,p=l,v=!1,y=1;y<=s;y++){if(t=f[y],e=!0===this.unrestrictedVars[this.varIndexByCol[y]],h>0&&-l<t&&t<l){u.push(y);continue}if(e&&t<0){-t>p&&(p=-t,d=y,v=!0);continue}t>p&&(p=t,d=y,v=!1)}if(h>0)for(var m=0;0===d&&u.length>0&&m<h;){var g=[],b=this.optionalObjectives[m].reducedCosts;p=l;for(var x=0;x<u.length;x++){if(t=b[y=u[x]],e=!0===this.unrestrictedVars[this.varIndexByCol[y]],-l<t&&t<l){g.push(y);continue}if(e&&t<0){-t>p&&(p=-t,d=y,v=!0);continue}t>p&&(p=t,d=y,v=!1)}u=g,m+=1}if(0===d)return this.setEvaluation(),this.simplexIters+=1,c;for(var w=0,_=1/0,I=(this.varIndexByRow,1);I<=a;I++){var k=r[I],M=k[o],C=k[d];if(!(-l<C&&C<l)){if(C>0&&l>M&&M>-l){_=0,w=I;break}var B=v?-M/C:M/C;B>l&&_>B&&(_=B,w=I)}}if(_===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[d],c;if(i){n.push([this.varIndexByRow[w],this.varIndexByCol[d]]);var V=this.checkForCycles(n);if(V.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+V[0]),this.model.messages.push("Length :"+V[1]),this.feasible=!1,c}this.pivot(w,d,!0),c+=1}};var e=[];t.prototype.pivot=function(t,i){var n=this.matrix,r=n[t][i],o=this.height-1,s=this.width-1,a=this.varIndexByRow[t],l=this.varIndexByCol[i];this.varIndexByRow[t]=l,this.varIndexByCol[i]=a,this.rowByVarIndex[l]=t,this.rowByVarIndex[a]=-1,this.colByVarIndex[l]=-1,this.colByVarIndex[a]=i;for(var h=n[t],u=0,c=0;c<=s;c++)h[c]>=-1e-16&&h[c]<=1e-16?h[c]=0:(h[c]/=r,e[u]=c,u+=1);h[i]=1/r,this.precision;for(var f,d,p,v=0;v<=o;v++)if(v!==t&&!(n[v][i]>=-1e-16&&n[v][i]<=1e-16)){var y=n[v];if((f=y[i])>=-1e-16&&f<=1e-16)0!==f&&(y[i]=0);else{for(d=0;d<u;d++)(p=h[c=e[d]])>=-1e-16&&p<=1e-16?0!==p&&(h[c]=0):y[c]=y[c]-f*p;y[i]=-f/r}}var m=this.optionalObjectives.length;if(m>0)for(var g=0;g<m;g+=1){var b=this.optionalObjectives[g].reducedCosts;if(0!==(f=b[i])){for(d=0;d<u;d++)0!==(p=h[c=e[d]])&&(b[c]=b[c]-f*p);b[i]=-f/r}}},t.prototype.checkForCycles=function(t){for(var e=0;e<t.length-1;e++)for(var i=e+1;i<t.length;i++){var n=t[e],r=t[i];if(n[0]===r[0]&&n[1]===r[1]){if(i-e>t.length-i)break;for(var o=!0,s=1;s<i-e;s++){var a=t[e+s],l=t[i+s];if(a[0]!==l[0]||a[1]!==l[1]){o=!1;break}}if(o)return[e,i-e]}}return[]}}),O=g((t,e)=>{function i(t,e,i,n){this.id=t,this.cost=e,this.index=i,this.value=0,this.priority=n}function n(t,e,n,r){i.call(this,t,e,n,r)}function r(t,e){i.call(this,t,0,e,0)}function o(t,e){this.variable=t,this.coefficient=e}function s(t,e,i){return 0===i||"required"===i?null:(e=e||1,i=i||1,!1===t.isMinimization&&(e=-e),t.addVariable(e,"r"+t.relaxationIndex++,!1,!1,i))}function a(t,e,i,n){this.slack=new r("s"+i,i),this.index=i,this.model=n,this.rhs=t,this.isUpperBound=e,this.terms=[],this.termsByVarIndex={},this.relaxation=null}function l(t,e){this.upperBound=t,this.lowerBound=e,this.model=t.model,this.rhs=t.rhs,this.relaxation=null}n.prototype.isInteger=!0,r.prototype.isSlack=!0,a.prototype.addTerm=function(t,e){var i=e.index,n=this.termsByVarIndex[i];if(void 0===n)n=new o(e,t),this.termsByVarIndex[i]=n,this.terms.push(n),!0===this.isUpperBound&&(t=-t),this.model.updateConstraintCoefficient(this,e,t);else{var r=n.coefficient+t;this.setVariableCoefficient(r,e)}return this},a.prototype.removeTerm=function(t){return this},a.prototype.setRightHandSide=function(t){if(t!==this.rhs){var e=t-this.rhs;!0===this.isUpperBound&&(e=-e),this.rhs=t,this.model.updateRightHandSide(this,e)}return this},a.prototype.setVariableCoefficient=function(t,e){var i=e.index;if(-1===i){console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");return}var n=this.termsByVarIndex[i];if(void 0===n)this.addTerm(t,e);else if(t!==n.coefficient){var r=t-n.coefficient;!0===this.isUpperBound&&(r=-r),n.coefficient=t,this.model.updateConstraintCoefficient(this,e,r)}return this},a.prototype.relax=function(t,e){this.relaxation=s(this.model,t,e),this._relax(this.relaxation)},a.prototype._relax=function(t){null!==t&&(this.isUpperBound?this.setVariableCoefficient(-1,t):this.setVariableCoefficient(1,t))},l.prototype.isEquality=!0,l.prototype.addTerm=function(t,e){return this.upperBound.addTerm(t,e),this.lowerBound.addTerm(t,e),this},l.prototype.removeTerm=function(t){return this.upperBound.removeTerm(t),this.lowerBound.removeTerm(t),this},l.prototype.setRightHandSide=function(t){this.upperBound.setRightHandSide(t),this.lowerBound.setRightHandSide(t),this.rhs=t},l.prototype.relax=function(t,e){this.relaxation=s(this.model,t,e),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},e.exports={Constraint:a,Variable:i,IntegerVariable:n,SlackVariable:r,Equality:l,Term:o}}),E=g(()=>{var t=S(),e=O().SlackVariable;t.prototype.addCutConstraints=function(t){for(var i=t.length,n=this.height,r=n+i,o=n;o<r;o+=1)void 0===this.matrix[o]&&(this.matrix[o]=this.matrix[o-1].slice());this.height=r,this.nVars=this.width+this.height-2;for(var s,a=this.width-1,l=0;l<i;l+=1){var h=t[l],u=n+l,c="min"===h.type?-1:1,f=h.varIndex,d=this.rowByVarIndex[f],p=this.matrix[u];if(-1===d){for(p[this.rhsColumn]=c*h.value,s=1;s<=a;s+=1)p[s]=0;p[this.colByVarIndex[f]]=c}else{var v=this.matrix[d],y=v[this.rhsColumn];for(p[this.rhsColumn]=c*(h.value-y),s=1;s<=a;s+=1)p[s]=-c*v[s]}var m=this.getNewElementIndex();this.varIndexByRow[u]=m,this.rowByVarIndex[m]=u,this.colByVarIndex[m]=-1,this.variablesPerIndex[m]=new e("s"+m,m),this.nVars+=1}},t.prototype._addLowerBoundMIRCut=function(t){if(t===this.costRowIndex)return!1;this.model;var i=this.matrix;if(!this.variablesPerIndex[this.varIndexByRow[t]].isInteger)return!1;var n=i[t][this.rhsColumn],r=n-Math.floor(n);if(r<this.precision||1-this.precision<r)return!1;var o=this.height;i[o]=i[o-1].slice(),this.height+=1,this.nVars+=1;var s=this.getNewElementIndex();this.varIndexByRow[o]=s,this.rowByVarIndex[s]=o,this.colByVarIndex[s]=-1,this.variablesPerIndex[s]=new e("s"+s,s),i[o][this.rhsColumn]=Math.floor(n);for(var a=1;a<this.varIndexByCol.length;a+=1)if(this.variablesPerIndex[this.varIndexByCol[a]].isInteger){var l=i[t][a],h=Math.floor(l)+Math.max(0,l-Math.floor(l)-r)/(1-r);i[o][a]=h}else i[o][a]=Math.min(0,i[t][a]/(1-r));for(var u=0;u<this.width;u+=1)i[o][u]-=i[t][u];return!0},t.prototype._addUpperBoundMIRCut=function(t){if(t===this.costRowIndex)return!1;this.model;var i=this.matrix;if(!this.variablesPerIndex[this.varIndexByRow[t]].isInteger)return!1;var n=i[t][this.rhsColumn],r=n-Math.floor(n);if(r<this.precision||1-this.precision<r)return!1;var o=this.height;i[o]=i[o-1].slice(),this.height+=1,this.nVars+=1;var s=this.getNewElementIndex();this.varIndexByRow[o]=s,this.rowByVarIndex[s]=o,this.colByVarIndex[s]=-1,this.variablesPerIndex[s]=new e("s"+s,s),i[o][this.rhsColumn]=-r;for(var a=1;a<this.varIndexByCol.length;a+=1){var l=this.variablesPerIndex[this.varIndexByCol[a]],h=i[t][a],u=h-Math.floor(h);l.isInteger?u<=r?i[o][a]=-u:i[o][a]=-(1-u)*r/u:h>=0?i[o][a]=-h:i[o][a]=h*r/(1-r)}return!0},t.prototype.applyMIRCuts=function(){}}),T=g(()=>{var t=S();t.prototype._putInBase=function(t){var e=this.rowByVarIndex[t];if(-1===e){for(var i=this.colByVarIndex[t],n=1;n<this.height;n+=1){var r=this.matrix[n][i];if(r<-this.precision||this.precision<r){e=n;break}}this.pivot(e,i)}return e},t.prototype._takeOutOfBase=function(t){var e=this.colByVarIndex[t];if(-1===e){for(var i=this.rowByVarIndex[t],n=this.matrix[i],r=1;r<this.height;r+=1){var o=n[r];if(o<-this.precision||this.precision<o){e=r;break}}this.pivot(i,e)}return e},t.prototype.updateVariableValues=function(){for(var t=this.variables.length,e=Math.round(1/this.precision),i=0;i<t;i+=1){var n=this.variables[i],r=n.index,o=this.rowByVarIndex[r];if(-1===o)n.value=0;else{var s=this.matrix[o][this.rhsColumn];n.value=Math.round((s+Number.EPSILON)*e)/e}}},t.prototype.updateRightHandSide=function(t,e){var i=this.height-1,n=this.rowByVarIndex[t.index];if(-1===n){for(var r=this.colByVarIndex[t.index],o=0;o<=i;o+=1){var s=this.matrix[o];s[this.rhsColumn]-=e*s[r]}var a=this.optionalObjectives.length;if(a>0)for(var l=0;l<a;l+=1){var h=this.optionalObjectives[l].reducedCosts;h[this.rhsColumn]-=e*h[r]}}else this.matrix[n][this.rhsColumn]-=e},t.prototype.updateConstraintCoefficient=function(t,e,i){if(t.index===e.index)throw Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var n=this._putInBase(t.index),r=this.colByVarIndex[e.index];if(-1===r)for(var o=this.rowByVarIndex[e.index],s=0;s<this.width;s+=1)this.matrix[n][s]+=i*this.matrix[o][s];else this.matrix[n][r]-=i},t.prototype.updateCost=function(t,e){var i=t.index,n=this.width-1,r=this.colByVarIndex[i];if(-1===r){var o,s=this.matrix[this.rowByVarIndex[i]];if(0===t.priority){var a=this.matrix[0];for(o=0;o<=n;o+=1)a[o]+=e*s[o]}else{var l=this.objectivesByPriority[t.priority].reducedCosts;for(o=0;o<=n;o+=1)l[o]+=e*s[o]}}else this.matrix[0][r]-=e},t.prototype.addConstraint=function(t){var e=t.isUpperBound?1:-1,i=this.height,n=this.matrix[i];void 0===n&&(n=this.matrix[0].slice(),this.matrix[i]=n);for(var r=this.width-1,o=0;o<=r;o+=1)n[o]=0;n[this.rhsColumn]=e*t.rhs;for(var s=t.terms,a=s.length,l=0;l<a;l+=1){var h=s[l],u=h.coefficient,c=h.variable.index,f=this.rowByVarIndex[c];if(-1===f)n[this.colByVarIndex[c]]+=e*u;else{var d=this.matrix[f];for(d[this.rhsColumn],o=0;o<=r;o+=1)n[o]-=e*u*d[o]}}var p=t.index;this.varIndexByRow[i]=p,this.rowByVarIndex[p]=i,this.colByVarIndex[p]=-1,this.height+=1},t.prototype.removeConstraint=function(t){var e=t.index,i=this.height-1,n=this._putInBase(e),r=this.matrix[i];this.matrix[i]=this.matrix[n],this.matrix[n]=r,this.varIndexByRow[n]=this.varIndexByRow[i],this.varIndexByRow[i]=-1,this.rowByVarIndex[e]=-1,this.availableIndexes[this.availableIndexes.length]=e,t.slack.index=-1,this.height-=1},t.prototype.addVariable=function(t){var e=this.height-1,i=this.width,n=!0===this.model.isMinimization?-t.cost:t.cost,r=t.priority,o=this.optionalObjectives.length;if(o>0)for(var s=0;s<o;s+=1)this.optionalObjectives[s].reducedCosts[i]=0;0===r?this.matrix[0][i]=n:(this.setOptionalObjective(r,i,n),this.matrix[0][i]=0);for(var a=1;a<=e;a+=1)this.matrix[a][i]=0;var l=t.index;this.varIndexByCol[i]=l,this.rowByVarIndex[l]=-1,this.colByVarIndex[l]=i,this.width+=1},t.prototype.removeVariable=function(t){var e=t.index,i=this._takeOutOfBase(e),n=this.width-1;if(i!==n){for(var r=this.height-1,o=0;o<=r;o+=1){var s=this.matrix[o];s[i]=s[n]}var a=this.optionalObjectives.length;if(a>0)for(var l=0;l<a;l+=1){var h=this.optionalObjectives[l].reducedCosts;h[i]=h[n]}var u=this.varIndexByCol[n];this.varIndexByCol[i]=u,this.colByVarIndex[u]=i}this.varIndexByCol[n]=-1,this.colByVarIndex[e]=-1,this.availableIndexes[this.availableIndexes.length]=e,t.index=-1,this.width-=1}}),j=g(()=>{S().prototype.log=function(t,e){console.log("****",t,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var i,n,r,o,s,a,l,h,u,c,f,d="",p=[" "];for(n=1;n<this.width;n+=1)s=this.varIndexByCol[n],l=(a=void 0===(o=this.variablesPerIndex[s])?"c"+s:o.id).length,h=" ",u="	",l>5?h+=" ":u+="	",p[n]=h,d+=u+a;console.log(d);var v=this.matrix[this.costRowIndex],y="	";for(i=1;i<this.width;i+=1)y+="	",y+=p[i],y+=v[i].toFixed(5);for(console.log((y+="	"+p[0]+v[0].toFixed(5))+"	Z"),r=1;r<this.height;r+=1){for(c=this.matrix[r],f="	",n=1;n<this.width;n+=1)f+="	"+p[n]+c[n].toFixed(5);f+="	"+p[0]+c[0].toFixed(5),s=this.varIndexByRow[r],console.log(f+"	"+(a=void 0===(o=this.variablesPerIndex[s])?"c"+s:o.id))}console.log("");var m=this.optionalObjectives.length;if(m>0){console.log("    Optional objectives:");for(var g=0;g<m;g+=1){var b=this.optionalObjectives[g].reducedCosts,x="";for(i=1;i<this.width;i+=1)x+=b[i]<0?"":" ",x+=p[i],x+=b[i].toFixed(5);console.log((x+=(b[0]<0?"":" ")+p[0]+b[0].toFixed(5))+" z"+g)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this}}),R=g(()=>{var t=S();t.prototype.copy=function(){var e=new t(this.precision);e.width=this.width,e.height=this.height,e.nVars=this.nVars,e.model=this.model,e.variables=this.variables,e.variablesPerIndex=this.variablesPerIndex,e.unrestrictedVars=this.unrestrictedVars,e.lastElementIndex=this.lastElementIndex,e.varIndexByRow=this.varIndexByRow.slice(),e.varIndexByCol=this.varIndexByCol.slice(),e.rowByVarIndex=this.rowByVarIndex.slice(),e.colByVarIndex=this.colByVarIndex.slice(),e.availableIndexes=this.availableIndexes.slice();for(var i=[],n=0;n<this.optionalObjectives.length;n++)i[n]=this.optionalObjectives[n].copy();e.optionalObjectives=i;for(var r=this.matrix,o=Array(this.height),s=0;s<this.height;s++)o[s]=r[s].slice();return e.matrix=o,e},t.prototype.save=function(){this.savedState=this.copy()},t.prototype.restore=function(){if(null!==this.savedState){var t,e,i=this.savedState,n=i.matrix;for(this.nVars=i.nVars,this.model=i.model,this.variables=i.variables,this.variablesPerIndex=i.variablesPerIndex,this.unrestrictedVars=i.unrestrictedVars,this.lastElementIndex=i.lastElementIndex,this.width=i.width,this.height=i.height,t=0;t<this.height;t+=1){var r=n[t],o=this.matrix[t];for(e=0;e<this.width;e+=1)o[e]=r[e]}var s=i.varIndexByRow;for(e=0;e<this.height;e+=1)this.varIndexByRow[e]=s[e];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var a=i.varIndexByCol;for(t=0;t<this.width;t+=1)this.varIndexByCol[t]=a[t];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var l=i.rowByVarIndex,h=i.colByVarIndex,u=0;u<this.nVars;u+=1)this.rowByVarIndex[u]=l[u],this.colByVarIndex[u]=h[u];if(i.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var c=0;c<i.optionalObjectives.length;c++){var f=i.optionalObjectives[c].copy();this.optionalObjectives[c]=f,this.optionalObjectivePerPriority[f.priority]=f}}}}}),A=g(()=>{var t=S();function e(t,e){this.index=t,this.value=e}t.prototype.getMostFractionalVar=function(){for(var t=0,i=null,n=null,r=this.model.integerVariables,o=r.length,s=0;s<o;s++){var a=r[s].index,l=this.rowByVarIndex[a];if(-1!==l){var h=this.matrix[l][this.rhsColumn],u=Math.abs(h-Math.round(h));t<u&&(t=u,i=a,n=h)}}return new e(i,n)},t.prototype.getFractionalVarWithLowestCost=function(){for(var t=1/0,i=null,n=null,r=this.model.integerVariables,o=r.length,s=0;s<o;s++){var a=r[s],l=a.index,h=this.rowByVarIndex[l];if(-1!==h){var u=this.matrix[h][this.rhsColumn];if(Math.abs(u-Math.round(u))>this.precision){var c=a.cost;t>c&&(t=c,i=l,n=u)}}}return new e(i,n)}}),P=g(()=>{var t=S();t.prototype.countIntegerValues=function(){for(var t=0,e=1;e<this.height;e+=1)if(this.variablesPerIndex[this.varIndexByRow[e]].isInteger){var i=this.matrix[e][this.rhsColumn];(i-=Math.floor(i))<this.precision&&-i<this.precision&&(t+=1)}return t},t.prototype.isIntegral=function(){for(var t=this.model.integerVariables,e=t.length,i=0;i<e;i++){var n=this.rowByVarIndex[t[i].index];if(-1!==n){var r=this.matrix[n][this.rhsColumn];if(Math.abs(r-Math.round(r))>this.precision)return!1}}return!0},t.prototype.computeFractionalVolume=function(t){for(var e=-1,i=1;i<this.height;i+=1)if(this.variablesPerIndex[this.varIndexByRow[i]].isInteger){var n=this.matrix[i][this.rhsColumn];if(Math.min((n=Math.abs(n))-Math.floor(n),Math.floor(n+1))<this.precision){if(!t)return 0}else -1===e?e=n:e*=n}return -1===e?0:e}}),N=g((t,e)=>{$(),E(),T(),j(),R(),A(),P(),e.exports=S()}),L=g(()=>{var t=S();function e(t,e,i){this.type=t,this.varIndex=e,this.value=i}function i(t,e){this.relaxedEvaluation=t,this.cuts=e}function n(t,e){return e.relaxedEvaluation-t.relaxedEvaluation}t.prototype.applyCuts=function(t){if(this.restore(),this.addCutConstraints(t),this.simplex(),this.model.useMIRCuts)for(var e=!0;e;){var i=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex(),this.computeFractionalVolume(!0)>=.9*i&&(e=!1)}},t.prototype.branchAndCut=function(){var t=[],r=0,o=this.model.tolerance,s=!0,a=1e99;this.model.timeout&&(a=Date.now()+this.model.timeout);for(var l=1/0,h=null,u=[],c=0;c<this.optionalObjectives.length;c+=1)u.push(1/0);var f,d=new i(-1/0,[]);for(t.push(d);t.length>0&&!0===s&&Date.now()<a;)if(f=this.model.isMinimization?this.bestPossibleEval*(1+o):this.bestPossibleEval*(1-o),o>0&&l<f&&(s=!1),!((d=t.pop()).relaxedEvaluation>l)){var p=d.cuts;if(this.applyCuts(p),r++,!1!==this.feasible){var v=this.evaluation;if(!(v>l)){if(v===l){for(var y=!0,m=0;m<this.optionalObjectives.length&&!(this.optionalObjectives[m].reducedCosts[0]>u[m]);m+=1)if(this.optionalObjectives[m].reducedCosts[0]<u[m]){y=!1;break}if(y)continue}if(!0===this.isIntegral()){if(this.__isIntegral=!0,1===r){this.branchAndCutIterations=r;return}h=d,l=v;for(var g=0;g<this.optionalObjectives.length;g+=1)u[g]=this.optionalObjectives[g].reducedCosts[0]}else{1===r&&this.save();for(var b=this.getMostFractionalVar(),x=b.index,w=[],_=[],I=p.length,k=0;k<I;k+=1){var M=p[k];M.varIndex===x?"min"===M.type?_.push(M):w.push(M):(w.push(M),_.push(M))}var C=Math.ceil(b.value),B=Math.floor(b.value),V=new e("min",x,C);w.push(V);var z=new e("max",x,B);_.push(z),t.push(new i(v,w)),t.push(new i(v,_)),t.sort(n)}}}}null!==h&&this.applyCuts(h.cuts),this.branchAndCutIterations=r}}),D=g((t,e)=>{var i=S(),n=(L(),O()),r=n.Constraint,o=n.Equality,s=n.Variable,a=n.IntegerVariable;function l(t,e){this.tableau=new i(t),this.name=e,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}n.Term,e.exports=l,l.prototype.minimize=function(){return this.isMinimization=!0,this},l.prototype.maximize=function(){return this.isMinimization=!1,this},l.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var t=this.lastElementIndex;return this.lastElementIndex+=1,t},l.prototype._addConstraint=function(t){var e=t.slack;this.tableau.variablesPerIndex[e.index]=e,this.constraints.push(t),this.nConstraints+=1,!0===this.tableauInitialized&&this.tableau.addConstraint(t)},l.prototype.smallerThan=function(t){var e=new r(t,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(e),e},l.prototype.greaterThan=function(t){var e=new r(t,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(e),e},l.prototype.equal=function(t){var e=new r(t,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(e);var i=new r(t,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(i),new o(e,i)},l.prototype.addVariable=function(t,e,i,n,r){if("string"==typeof r)switch(r){case"required":default:r=0;break;case"strong":r=1;break;case"medium":r=2;break;case"weak":r=3}var o,l=this.tableau.getNewElementIndex();return null==e&&(e="v"+l),null==t&&(t=0),null==r&&(r=0),i?(o=new a(e,t,l,r),this.integerVariables.push(o)):o=new s(e,t,l,r),this.variables.push(o),this.tableau.variablesPerIndex[l]=o,n&&(this.unrestrictedVariables[l]=!0),this.nVariables+=1,!0===this.tableauInitialized&&this.tableau.addVariable(o),o},l.prototype._removeConstraint=function(t){var e=this.constraints.indexOf(t);if(-1===e){console.warn("[Model.removeConstraint] Constraint not present in model");return}this.constraints.splice(e,1),this.nConstraints-=1,!0===this.tableauInitialized&&this.tableau.removeConstraint(t),t.relaxation&&this.removeVariable(t.relaxation)},l.prototype.removeConstraint=function(t){return t.isEquality?(this._removeConstraint(t.upperBound),this._removeConstraint(t.lowerBound)):this._removeConstraint(t),this},l.prototype.removeVariable=function(t){var e=this.variables.indexOf(t);if(-1===e){console.warn("[Model.removeVariable] Variable not present in model");return}return this.variables.splice(e,1),!0===this.tableauInitialized&&this.tableau.removeVariable(t),this},l.prototype.updateRightHandSide=function(t,e){return!0===this.tableauInitialized&&this.tableau.updateRightHandSide(t,e),this},l.prototype.updateConstraintCoefficient=function(t,e,i){return!0===this.tableauInitialized&&this.tableau.updateConstraintCoefficient(t,e,i),this},l.prototype.setCost=function(t,e){var i=t-e.cost;return!1===this.isMinimization&&(i=-i),e.cost=t,this.tableau.updateCost(e,i),this},l.prototype.loadJson=function(t){this.isMinimization="max"!==t.opType;for(var e=t.variables,i=t.constraints,n={},r={},s=Object.keys(i),a=s.length,l=0;l<a;l+=1){var h,u,c=s[l],f=i[c],d=f.equal,p=f.weight,v=f.priority,y=void 0!==p||void 0!==v;if(void 0===d){var m=f.min;void 0!==m&&(h=this.greaterThan(m),n[c]=h,y&&h.relax(p,v));var g=f.max;void 0!==g&&(u=this.smallerThan(g),r[c]=u,y&&u.relax(p,v))}else{h=this.greaterThan(d),n[c]=h,u=this.smallerThan(d),r[c]=u;var b=new o(h,u);y&&b.relax(p,v)}}var x=Object.keys(e),w=x.length;this.tolerance=t.tolerance||0,t.timeout&&(this.timeout=t.timeout),t.options&&(t.options.timeout&&(this.timeout=t.options.timeout),0===this.tolerance&&(this.tolerance=t.options.tolerance||0),t.options.useMIRCuts&&(this.useMIRCuts=t.options.useMIRCuts),void 0===t.options.exitOnCycles?this.checkForCycles=!0:this.checkForCycles=t.options.exitOnCycles);for(var _=t.ints||{},I=t.binaries||{},k=t.unrestricted||{},M=t.optimize,C=0;C<w;C+=1){var B=x[C],V=e[B],z=V[M]||0,S=!!I[B],$=!!_[B]||S,O=!!k[B],E=this.addVariable(z,B,$,O);S&&this.smallerThan(1).addTerm(1,E);var T=Object.keys(V);for(l=0;l<T.length;l+=1){var j=T[l];if(j!==M){var R=V[j],A=n[j];void 0!==A&&A.addTerm(R,E);var P=r[j];void 0!==P&&P.addTerm(R,E)}}}return this},l.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},l.prototype.solve=function(){return!1===this.tableauInitialized&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},l.prototype.isFeasible=function(){return this.tableau.feasible},l.prototype.save=function(){return this.tableau.save()},l.prototype.restore=function(){return this.tableau.restore()},l.prototype.activateMIRCuts=function(t){this.useMIRCuts=t},l.prototype.debug=function(t){this.checkForCycles=t},l.prototype.log=function(t){return this.tableau.log(t)}}),F=g(t=>{t.CleanObjectiveAttributes=function(t){var e,i,n;if("string"==typeof t.optimize){if(!t.constraints[t.optimize])return t;for(i in e=Math.random(),t.variables)t.variables[i][t.optimize]&&(t.variables[i][e]=t.variables[i][t.optimize]);return t.constraints[e]=t.constraints[t.optimize],delete t.constraints[t.optimize],t}for(n in t.optimize)if(t.constraints[n]){if("equal"===t.constraints[n])delete t.optimize[n];else{for(i in e=Math.random(),t.variables)t.variables[i][n]&&(t.variables[i][e]=t.variables[i][n]);t.constraints[e]=t.constraints[n],delete t.constraints[n]}}return t}}),W=g((t,e)=>{e.exports=function(t){return t.length?function(t){var e={is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},i={opType:"",optimize:"_obj",constraints:{},variables:{}},n={">=":"min","<=":"max","=":"equal"},r="",o=null,s="",a="",l="",h=0;"string"==typeof t&&(t=t.split(`
`));for(var u=0;u<t.length;u++)if(l="__"+u,r=t[u],o=null,e.is_objective.test(r))i.opType=r.match(/(max|min)/gi)[0],(o=r.match(e.parse_lhs).map(function(t){return t.replace(/\s+/,"")}).slice(1)).forEach(function(t){s=parseFloat(s=null===(s=t.match(e.get_num))?"-"===t.substr(0,1)?-1:1:s[0]),a=t.match(e.get_word)[0].replace(/\;$/,""),i.variables[a]=i.variables[a]||{},i.variables[a]._obj=s});else if(e.is_int.test(r))o=r.match(e.parse_int).slice(1),i.ints=i.ints||{},o.forEach(function(t){t=t.replace(";",""),i.ints[t]=1});else if(e.is_bin.test(r))o=r.match(e.parse_bin).slice(1),i.binaries=i.binaries||{},o.forEach(function(t){t=t.replace(";",""),i.binaries[t]=1});else if(e.is_constraint.test(r)){var c=r.indexOf(":");(o=(-1===c?r:r.slice(c+1)).match(e.parse_lhs).map(function(t){return t.replace(/\s+/,"")})).forEach(function(t){s=parseFloat(s=null===(s=t.match(e.get_num))?"-"===t.substr(0,1)?-1:1:s[0]),a=t.match(e.get_word)[0],i.variables[a]=i.variables[a]||{},i.variables[a][l]=s}),h=parseFloat(r.match(e.parse_rhs)[0]),r=n[r.match(e.parse_dir)[0]],i.constraints[l]=i.constraints[l]||{},i.constraints[l][r]=h}else e.is_unrestricted.test(r)&&(o=r.match(e.parse_int).slice(1),i.unrestricted=i.unrestricted||{},o.forEach(function(t){t=t.replace(";",""),i.unrestricted[t]=1}));return i}(t):function(t){if(!t)throw Error("Solver requires a model to operate on");var e="",i={max:"<=",min:">=",equal:"="},n=RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(t.opType)for(var r in e+=t.opType+":",t.variables)t.variables[r][r]=t.variables[r][r]?t.variables[r][r]:1,t.variables[r][t.optimize]&&(e+=" "+t.variables[r][t.optimize]+" "+r.replace(n,"_"));else e+="max:";for(var o in e+=`;

`,t.constraints)for(var s in t.constraints[o])if(void 0!==i[s]){for(var a in t.variables)void 0!==t.variables[a][o]&&(e+=" "+t.variables[a][o]+" "+a.replace(n,"_"));e+=" "+i[s]+" "+t.constraints[o][s]+`;
`}if(t.ints)for(var l in e+=`

`,t.ints)e+="int "+l.replace(n,"_")+`;
`;if(t.unrestricted)for(var h in e+=`

`,t.unrestricted)e+="unrestricted "+h.replace(n,"_")+`;
`;return e}(t)}}),q=g(()=>{}),U=g(()=>{}),G=g(t=>{function e(t){return t=(t=(t=t.replace("\\r\\n",`\r
`)).split(`\r
`)).filter(function(t){return!(!0===RegExp(" 0$","gi").test(t)||!1===RegExp("\\d$","gi").test(t))}).map(function(t){return t.split(/\:{0,1} +(?=\d)/)}).reduce(function(t,e,i){return t[e[0]]=e[1],t},{})}t.reformat=W(),t.solve=function(t){return new Promise(function(i,n){"undefined"!=typeof window&&n("Function Not Available in Browser");var r=W()(t);t.external||n("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),t.external.binPath||n("No Executable | Binary path provided in arguments as 'binPath'"),t.external.args||n("No arguments array for cli | bash provided on 'args' attribute"),t.external.tempName||n("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on"),q().writeFile(t.external.tempName,r,function(r,o){if(r)n(r);else{var s=U().execFile;t.external.args.push(t.external.tempName),s(t.external.binPath,t.external.args,function(t,r){t?1===t.code?i(e(r)):n({code:t.code,meaning:{"-2":"Out of Memory",1:"SUBOPTIMAL",2:"INFEASIBLE",3:"UNBOUNDED",4:"DEGENERATE",5:"NUMFAILURE",6:"USER-ABORT",7:"TIMEOUT",9:"PRESOLVED",25:"ACCURACY ERROR",255:"FILE-ERROR"}[t.code],data:r}):i(e(r))})}})})}}),Y=g((t,e)=>{e.exports={lpsolve:G()}}),X=g((t,e)=>{e.exports=function(t,e){var i,n,r,o,s,a=e.optimize,l=JSON.parse(JSON.stringify(e.optimize)),h=Object.keys(e.optimize),u=0,c={},f="",d={},p=[];for(delete e.optimize,n=0;n<h.length;n++)l[h[n]]=0;for(n=0;n<h.length;n++){for(s in e.optimize=h[n],e.opType=a[h[n]],i=t.Solve(e,void 0,void 0,!0),h)if(!e.variables[h[s]])for(o in i[h[s]]=i[h[s]]?i[h[s]]:0,e.variables)e.variables[o][h[s]]&&i[o]&&(i[h[s]]+=i[o]*e.variables[o][h[s]]);for(f="base",r=0;r<h.length;r++)i[h[r]]?f+="-"+(1e3*i[h[r]]|0)/1e3:f+="-0";if(!c[f]){for(c[f]=1,u++,r=0;r<h.length;r++)i[h[r]]&&(l[h[r]]+=i[h[r]]);delete i.feasible,delete i.result,p.push(i)}}for(n=0;n<h.length;n++)e.constraints[h[n]]={equal:l[h[n]]/u};for(n in e.optimize="cheater-"+Math.random(),e.opType="max",e.variables)e.variables[n].cheater=1;for(n in p)for(o in p[n])d[o]=d[o]||{min:1e99,max:-1e99};for(n in d)for(o in p)p[o][n]?(p[o][n]>d[n].max&&(d[n].max=p[o][n]),p[o][n]<d[n].min&&(d[n].min=p[o][n])):(p[o][n]=0,d[n].min=0);return{midpoint:i=t.Solve(e,void 0,void 0,!0),vertices:p,ranges:d}}}),H=g((t,e)=>{var i=N(),n=D(),r=L(),o=O(),s=F(),a=o.Constraint,l=o.Variable,h=o.Numeral,u=o.Term,c=Y(),f=function(){this.Model=n,this.branchAndCut=r,this.Constraint=a,this.Variable=l,this.Numeral=h,this.Term=u,this.Tableau=i,this.lastSolvedModel=null,this.External=c,this.Solve=function(t,e,i,r){if(r)for(var o in s)t=s[o](t);if(!t)throw Error("Solver requires a model to operate on");if("object"==typeof t.optimize&&Object.keys(t.optimize>1))return X()(this,t);if(t.external){var a=Object.keys(c);if(a=JSON.stringify(a),!t.external.solver)throw Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+a);if(!c[t.external.solver])throw Error("No support (yet) for "+t.external.solver+". Please use one of these instead:"+a);return c[t.external.solver].solve(t)}t instanceof n||(t=new n(e).loadJson(t));var l=t.solve();if(this.lastSolvedModel=t,l.solutionSet=l.generateSolutionSet(),i)return l;var h={};return h.feasible=l.feasible,h.result=l.evaluation,h.bounded=l.bounded,l._tableau.__isIntegral&&(h.isIntegral=!0),Object.keys(l.solutionSet).forEach(function(t){0!==l.solutionSet[t]&&(h[t]=l.solutionSet[t])}),h},this.ReformatLP=W(),this.MultiObjective=function(t){return X()(this,t)}};"function"==typeof define?define([],function(){return new f}):"object"==typeof window?window.solver=new f:"object"==typeof self&&(self.solver=new f),e.exports=new f}),J=g((t,e)=>{var i,n,r=1e-60;do r+=r,i=1+.1*r,n=1+.2*r;while(i<=1||n<=1)e.exports=r}),K=g((t,e)=>{e.exports=function(t,e,i){let n,r;for(let e=1;e<=i;e+=1){t[e][e]=1/t[e][e],r=-t[e][e];for(let i=1;i<e;i+=1)t[i][e]*=r;if(i<(n=e+1))break;for(let o=n;o<=i;o+=1){r=t[e][o],t[e][o]=0;for(let i=1;i<=e;i+=1)t[i][o]+=r*t[i][e]}}}}),Q=g((t,e)=>{e.exports=function(t,e,i,n){let r,o;for(r=1;r<=i;r+=1){o=0;for(let e=1;e<r;e+=1)o+=t[e][r]*n[e];n[r]=(n[r]-o)/t[r][r]}for(let e=1;e<=i;e+=1){r=i+1-e,n[r]/=t[r][r],o=-n[r];for(let e=1;e<r;e+=1)n[e]+=o*t[e][r]}}}),Z=g((t,e)=>{e.exports=function(t,e,i,n){let r,o,s;for(let e=1;e<=i;e+=1){if(n[1]=e,s=0,(r=e-1)<1){if((s=t[e][e]-s)<=0)break;t[e][e]=Math.sqrt(s)}else{for(let i=1;i<=r;i+=1){o=t[i][e];for(let n=1;n<i;n+=1)o-=t[n][e]*t[n][i];o/=t[i][i],t[i][e]=o,s+=o*o}if((s=t[e][e]-s)<=0)break;t[e][e]=Math.sqrt(s)}n[1]=0}}}),tt=g((t,e)=>{var i=J(),n=K(),r=Q(),o=Z();e.exports=function(t,e,s,a,l,h,u,c,f,d,p,v,y,m=0,g,b,x){let w,_,I,k,M,C,B,V,z,S,$,O,E,T,j=Math.min(a,p),R=2*a+j*(j+5)/2+2*p+1;for(let t=1;t<=a;t+=1)b[t]=e[t];for(let t=a+1;t<=R;t+=1)b[t]=0;for(let t=1;t<=p;t+=1)y[t]=0,h[t]=0;let A=[];if(0===x[1]){if(o(t,s,a,A),0!==A[1]){x[1]=2;return}r(t,s,a,e),n(t,s,a)}else{for(let i=1;i<=a;i+=1){l[i]=0;for(let n=1;n<=i;n+=1)l[i]+=t[n][i]*e[n]}for(let i=1;i<=a;i+=1){e[i]=0;for(let n=i;n<=a;n+=1)e[i]+=t[i][n]*l[n]}}u[1]=0;for(let i=1;i<=a;i+=1){l[i]=e[i],u[1]+=b[i]*l[i],b[i]=0;for(let e=i+1;e<=a;e+=1)t[e][i]=0}u[1]=-u[1]/2,x[1]=0;let P=a+a,N=P+j,L=N+j+1,D=L+j*(j+1)/2,F=D+p;for(let t=1;t<=p;t+=1){C=0;for(let e=1;e<=a;e+=1)C+=c[e][t]*c[e][t];b[F+t]=Math.sqrt(C)}function W(){return b[N+k]=b[N+k+1],b[N+k+1]=0,y[k]=0,k-=1,g[2]+=1,0}for(k=m,g[1]=0,g[2]=0,T=0;;){if(999===(T=function(){g[1]+=1,R=D;for(let t=1;t<=p;t+=1){R+=1,C=-f[t];for(let e=1;e<=a;e+=1)C+=c[e][t]*l[e];if(Math.abs(C)<i&&(C=0),t>v)b[R]=C;else if(b[R]=-Math.abs(C),C>0){for(let e=1;e<=a;e+=1)c[e][t]=-c[e][t];f[t]=-f[t]}}for(let t=1;t<=k;t+=1)b[D+y[t]]=0;I=0,M=0;for(let t=1;t<=p;t+=1)b[D+t]<M*b[F+t]&&(I=t,M=b[D+t]/b[F+t]);if(0===I){for(let t=1;t<=k;t+=1)h[y[t]]=b[N+t];return 999}return 0}()))return;for(;0!==(T=function(){for(let e=1;e<=a;e+=1){C=0;for(let i=1;i<=a;i+=1)C+=t[i][e]*c[i][I];b[e]=C}w=a;for(let t=1;t<=a;t+=1)b[w+t]=0;for(let e=k+1;e<=a;e+=1)for(let i=1;i<=a;i+=1)b[w+i]=b[w+i]+t[i][e]*b[e];O=!0;for(let t=k;t>=1;t-=1){C=b[t],w=(R=L+t*(t+3)/2)-t;for(let e=t+1;e<=k;e+=1)C-=b[R]*b[P+e],R+=e;C/=b[w],b[P+t]=C,!(y[t]<=v)&&(C<=0||(O=!1,_=t))}if(!O){B=b[N+_]/b[P+_];for(let t=1;t<=k;t+=1)y[t]<=v||b[P+t]<=0||(M=b[N+t]/b[P+t])<B&&(B=M,_=t)}C=0;for(let t=a+1;t<=a+a;t+=1)C+=b[t]*b[t];if(Math.abs(C)<=i){if(O)return x[1]=1,999;for(let t=1;t<=k;t+=1)b[N+t]=b[N+t]-B*b[P+t];return b[N+k+1]=b[N+k+1]+B,700}C=0;for(let t=1;t<=a;t+=1)C+=b[a+t]*c[t][I];V=-b[D+I]/C,E=!0,O||B<V&&(V=B,E=!1);for(let t=1;t<=a;t+=1)l[t]+=V*b[a+t],Math.abs(l[t])<i&&(l[t]=0);u[1]+=V*C*(V/2+b[N+k+1]);for(let t=1;t<=k;t+=1)b[N+t]=b[N+t]-V*b[P+t];if(b[N+k+1]=b[N+k+1]+V,E){y[k+=1]=I,R=L+(k-1)*k/2+1;for(let t=1;t<=k-1;t+=1)b[R]=b[t],R+=1;if(k===a)b[R]=b[a];else{for(let e=a;e>=k+1;e-=1)if(0!==b[e]&&(z=Math.max(Math.abs(b[e-1]),Math.abs(b[e])),S=Math.min(Math.abs(b[e-1]),Math.abs(b[e])),M=b[e-1]>=0?Math.abs(z*Math.sqrt(1+S*S/(z*z))):-Math.abs(z*Math.sqrt(1+S*S/(z*z))),z=b[e-1]/M,S=b[e]/M,1!==z)){if(0===z){b[e-1]=S*M;for(let i=1;i<=a;i+=1)M=t[i][e-1],t[i][e-1]=t[i][e],t[i][e]=M}else{b[e-1]=M,$=S/(1+z);for(let i=1;i<=a;i+=1)M=z*t[i][e-1]+S*t[i][e],t[i][e]=$*(t[i][e-1]+M)-t[i][e],t[i][e-1]=M}}b[R]=b[k]}}else{C=-f[I];for(let t=1;t<=a;t+=1)C+=l[t]*c[t][I];if(I>v)b[D+I]=C;else if(b[D+I]=-Math.abs(C),C>0){for(let t=1;t<=a;t+=1)c[t][I]=-c[t][I];f[I]=-f[I]}return 700}return 0}());){if(999===T)return;if(700===T){if(_===k)W();else{for(;function(){if(0!==b[w=(R=L+_*(_+1)/2+1)+_]&&(z=Math.max(Math.abs(b[w-1]),Math.abs(b[w])),S=Math.min(Math.abs(b[w-1]),Math.abs(b[w])),M=b[w-1]>=0?Math.abs(z*Math.sqrt(1+S*S/(z*z))):-Math.abs(z*Math.sqrt(1+S*S/(z*z))),z=b[w-1]/M,S=b[w]/M,1!==z)){if(0===z){for(let t=_+1;t<=k;t+=1)M=b[w-1],b[w-1]=b[w],b[w]=M,w+=t;for(let e=1;e<=a;e+=1)M=t[e][_],t[e][_]=t[e][_+1],t[e][_+1]=M}else{$=S/(1+z);for(let t=_+1;t<=k;t+=1)M=z*b[w-1]+S*b[w],b[w]=$*(b[w-1]+M)-b[w],b[w-1]=M,w+=t;for(let e=1;e<=a;e+=1)M=z*t[e][_]+S*t[e][_+1],t[e][_+1]=$*(t[e][_]+M)-t[e][_+1],t[e][_]=M}}}(),797===(T=function(){w=R-_;for(let t=1;t<=_;t+=1)b[w]=b[R],R+=1,w+=1;return b[N+_]=b[N+_+1],y[_]=y[_+1],(_+=1)<k?797:0}()););W()}}}}}}),te=g(t=>{var e=tt();t.solveQP=function(t,i,n,r=[],o=0,s=[0,0]){let a=[],l=[],h=[],u=[],c=[],f=[],d="",p=t.length-1,v=n[1].length-1;if(!r)for(let t=1;t<=v;t+=1)r[t]=0;if(p!==t[1].length-1&&(d="Dmat is not symmetric!"),p!==i.length-1&&(d="Dmat and dvec are incompatible!"),p!==n.length-1&&(d="Amat and dvec are incompatible!"),v!==r.length-1&&(d="Amat and bvec are incompatible!"),(o>v||o<0)&&(d="Value of meq is invalid!"),""!==d)return{message:d};for(let t=1;t<=v;t+=1)l[t]=0,u[t]=0;let y=Math.min(p,v);for(let t=1;t<=p;t+=1)h[t]=0;a[1]=0;for(let t=1;t<=2*p+y*(y+5)/2+2*v+1;t+=1)c[t]=0;for(let t=1;t<=2;t+=1)f[t]=0;return e(t,i,p,p,h,u,a,n,r,p,v,o,l,0,f,c,s),1===s[1]&&(d="constraints are inconsistent, no solution!"),2===s[1]&&(d="matrix D in quadratic function is not positive definite!"),{solution:h,Lagrangian:u,value:a,unconstrained_solution:i,iterations:f,iact:l,message:d}}}),ti=g((t,e)=>{e.exports=te()});function tn(t){for(let e of t)return t.delete(e),e}function tr(t,e,i){let n=t.get(e);void 0===n?t.set(e,new Set([i])):n.add(i)}function to(t,e,i){let n=t.get(e);void 0!==n&&(n.delete(i),n.size||t.delete(e))}var{toString:ts}=Object.prototype,{propertyIsEnumerable:ta}=Object.prototype;function*tl(t,...e){let i=new Set,n;for(;void 0!==(n=e.pop());)i.has(n)||(yield n,i.add(n),e.push(...t(n)))}function th(t,e){let i=[];for(let[n,r]of tp(e))i.push(t[n]),i.push(r);return i.push(t[t.length-1]),i.join("")}function tu(t,...e){return Error(th(t,ty(e,t=>{let e;return e=[],function t(i,n={},r=""){var o,s,a;let l,h=n.indent||"	",u;u=void 0===n.inlineCharacterLimit?{newline:`
`,newlineOrSpace:`
`,pad:r,indent:r+h}:{newline:"@@__STRINGIFY_OBJECT_NEW_LINE__@@",newlineOrSpace:"@@__STRINGIFY_OBJECT_NEW_LINE_OR_SPACE__@@",pad:"@@__STRINGIFY_OBJECT_PAD__@@",indent:"@@__STRINGIFY_OBJECT_INDENT__@@"};let c=t=>{if(void 0===n.inlineCharacterLimit)return t;let e=t.replace(RegExp(u.newline,"g"),"").replace(RegExp(u.newlineOrSpace,"g")," ").replace(RegExp(u.pad+"|"+u.indent,"g"),"");return e.length<=n.inlineCharacterLimit?e:t.replace(RegExp(u.newline+"|"+u.newlineOrSpace,"g"),`
`).replace(RegExp(u.pad,"g"),r).replace(RegExp(u.indent,"g"),r+h)};if(e.includes(i))return'"[Circular]"';if(null==i||"number"==typeof i||"boolean"==typeof i||"function"==typeof i||"symbol"==typeof i||(o=i,"[object RegExp]"===ts.call(o)))return String(i);if(i instanceof Date)return`new Date('${i.toISOString()}')`;if(Array.isArray(i)){if(0===i.length)return"[]";e.push(i);let o="["+u.newline+i.map((e,o)=>{let s=i.length-1===o?u.newline:","+u.newlineOrSpace,a=t(e,n,r+h);return n.transform&&(a=n.transform(i,o,a)),u.indent+a+s}).join("")+u.pad+"]";return e.pop(),c(o)}if(l=typeof(s=i),null!==s&&("object"===l||"function"===l)){let o=[...Object.keys(a=i),...Object.getOwnPropertySymbols(a).filter(t=>ta.call(a,t))];if(n.filter&&(o=o.filter(t=>n.filter(i,t))),0===o.length)return"{}";e.push(i);let s="{"+u.newline+o.map((e,s)=>{let a=o.length-1===s?u.newline:","+u.newlineOrSpace,l="symbol"==typeof e,c=!l&&/^[a-z$_][$\w]*$/i.test(e),f=l||c?e:t(e,n),d=t(i[e],n,r+h);return n.transform&&(d=n.transform(i,e,d)),u.indent+String(f)+": "+d+a}).join("")+u.pad+"}";return e.pop(),c(s)}return i=String(i=i.replace(/\\/g,"\\\\")).replace(/[\r\n]/g,t=>t===`
`?"\\n":"\\r"),!1===n.singleQuotes?(i=i.replace(/"/g,'\\"'),`"${i}"`):(i=i.replace(/'/g,"\\'"),`'${i}'`)}(t,{indent:"  ",singleQuotes:!1,inlineCharacterLimit:60},void 0)})))}function tc(t){return`internal error: ${t}; if you encounter this please submit an issue at: https://github.com/erikbrinkman/d3-dag/issues`}function tf(t,...e){return Error(tc(th(t,ty(e,t=>t.toString()))))}function td(t,e,...i){let[n,...r]=t,o=th(r,ty(i,t=>t.toString())),s=e.name||"anonymous";return Error("d3dagBuiltin"in e?tc(`builtin ${n}'${s}'${o}`):`custom ${n}'${s}'${o}`)}function*tp(t){let e=0;for(let i of t)yield[e++,i]}function*tv(t,e){for(let[i,n]of tp(t))yield*B(e(n,i))}function*ty(t,e){for(let[i,n]of tp(t))yield e(n,i)}function*tm(t,e){for(let[i,n]of tp(t))e(n,i)&&(yield n)}function tg(t,e){for(let[i,n]of tp(t))if(e(n,i))return!0;return!1}function*tb(...t){for(let e of t)yield*B(e)}function*tx(t){let e=t[Symbol.iterator](),i=e.next();if(!i.done){let t=i.value,n;for(;!(n=e.next()).done;)yield[t,n.value],t=n.value}}function tw(t){let e=[],i,n=new Map;for(let[r,o]of tp(t.nodes()))n.set(o,r),e.push({x:o.ux,y:o.uy,data:o.data}),o===t&&(i=r);let r=[];for(let{source:e,target:i,data:o,points:s}of t.links())r.push({source:n.get(e),target:n.get(i),points:s,data:o});return{nodes:e,links:r,index:i,v:1}}var t_=class{constructor(t,e,i,n="inactive"){this.node=t,this.indeg=e,this.outdeg=i,this.stat=n}bucket(){let t=0===this.indeg?-1/0:0===this.outdeg?1/0:this.indeg-this.outdeg;return"top"===this.stat?Math.min(t,0):"bottom"===this.stat?Math.max(t,0):t}isTop(){return this.indeg<=this.outdeg&&"bottom"!==this.stat||"top"===this.stat}};function tI(t,e){let i=t[e];if(void 0!==i)return i;{let i=new Set;return t[e]=i,i}}function tk(t){var e;let i;for(;t.length&&!(null!=(e=i=t[t.length-1])&&e.size);)t.pop();return i||void 0}function tM(t,e=()=>{}){let i=new Map,n=new Map,r=new Set,o=new Set,s=[],a=[];function l(t){return t===-1/0?r:t===1/0?o:t<=0?tI(s,-t):tI(a,t-1)}for(let r of t){let t=r.nparentLinks(),o=r.nchildLinks(),s=new t_(r,t,o),a=e(r);i.set(r,s),void 0===a?(s.stat="active",l(s.bucket()).add(s)):tr(n,a,s)}let h=[...n].sort(([t],[e])=>t-e).map(([,t])=>t),u=0,c=h.length,f=h.length?h[u++]:new Set,d=h.length>1?h[--c]:new Set;for(let t of f)t.stat="top",l(t.bucket()).add(t);for(let t of d)t.stat="bottom",l(t.bucket()).add(t);let p=Array(i.size),v=0,y=i.size,m;for(;m=function(){var t;let e;if(e=null!=(t=tn(r))?t:tn(o))return e;let i=tk(s),n=tk(a);return n?tn(s.length>a.length?i:n):i?tn(i):void 0}();){let{node:t}=m,e=m.isTop()?v++:--y;for(let[n,r]of(m.stat="ranked",p[e]=t,t.parentCounts())){let t=i.get(n);l(t.bucket()).delete(t),t.outdeg-=r,"ranked"!==t.stat&&"inactive"!==t.stat&&l(t.bucket()).add(t)}for(let[e,n]of t.childCounts()){let t=i.get(e);l(t.bucket()).delete(t),t.indeg-=n,"ranked"!==t.stat&&"inactive"!==t.stat&&l(t.bucket()).add(t)}if(f.delete(m),!f.size&&u<c)for(let t of f=h[u++])t.stat="top",l(t.bucket()).add(t);if(d.delete(m),!d.size&&u<c)for(let t of d=h[--c])t.stat="bottom",l(t.bucket()).add(t)}return p}function tC(t,e){let i=new Set,n=new Set,r=[],o;for(let s of t)if(!n.has(s)){for(r.push(s);o=r.pop();)i.delete(o),n.has(o)||(n.add(o),r.push(...e(o)));i.add(s)}return i}var tB,tV,tz,tS,t$,tO,tE,tT,tj,tR=class{constructor(){I(this,tB,0),I(this,tV,0),I(this,tz,0),I(this,tS,!0),I(this,t$,new Set),I(this,tO,new Set),I(this,tE,()=>{k(this,tB,_(this,tB)-1)}),I(this,tT,(t,e)=>{k(this,tV,_(this,tV)+1),t?k(this,tz,_(this,tz)+1):e||!0!==_(this,tS)||k(this,tS,null)}),I(this,tj,t=>{k(this,tV,_(this,tV)-1),t?k(this,tz,_(this,tz)-1):!1===_(this,tS)&&k(this,tS,null)})}*nodes(){for(let t of this.split())yield*B(t.nodes())}topological(t){return tM(this.nodes(),t)}*links(){for(let t of this.nodes())yield*B(t.childLinks())}nnodes(){return _(this,tB)}nlinks(){return _(this,tV)}*roots(){for(let t of this.split())yield*B(t.roots())}*leaves(){for(let t of this.split())yield*B(t.leaves())}*split(){let t;for(yield*B(_(this,t$));t=function(t){for(let e of t)return e}(_(this,tO));)yield t,t.nnodes()}connected(){let t=!1;for(let e of this.split()){if(t)return!1;t=!0}return!0}multi(){return!!_(this,tz)}acyclic(){if(null!==_(this,tS))return _(this,tS);for(let t of this.split())if(!t.acyclic())return k(this,tS,!1),!1;return k(this,tS,!0),!0}node(t){return k(this,tB,_(this,tB)+1),new t5(this,_(this,t$),_(this,tO),_(this,tE),_(this,tT),_(this,tj),t)}link(t,e,i){return t.link(t,e,i)}toJSON(){return tw(this)}};function tA(t){for(let e of t.values())for(let t of e)return t}function tP(t){return t instanceof t5}tB=new WeakMap,tV=new WeakMap,tz=new WeakMap,tS=new WeakMap,t$=new WeakMap,tO=new WeakMap,tE=new WeakMap,tT=new WeakMap,tj=new WeakMap;var tN,tL,tD,tF,tW,tq,tU,tG,tY,tX,tH,tJ,tK,tQ,tZ,t0,t1,t2,t5=class{constructor(t,e,i,n,r,o,s){this.data=s,I(this,tQ),I(this,t0),I(this,tN,void 0),I(this,tL,void 0),I(this,tD,void 0),I(this,tF,void 0),I(this,tW,void 0),I(this,tq,void 0),I(this,tU,0),I(this,tG,0),I(this,tY,new Map),I(this,tX,0),I(this,tH,new Map),I(this,tJ,void 0),I(this,tK,void 0),I(this,t2,t=>{let{source:e,target:i}=t,n=e.nchildLinksTo(i)>1;if(n){k(e,tU,_(e,tU)-1);let t=M(e,t0,t1).call(e);t.nlinks-=1,t.multis-=1}else{let t=M(e,tQ,tZ).call(e);k(t,tK,null),_(this,tW).delete(t),_(this,tq).add(e),k(e,tJ,e),k(e,tK,null),_(this,tq).add(i),k(i,tJ,i),k(i,tK,null)}_(this,tF).call(this,n),to(_(e,tH),i,t),k(e,tX,_(e,tX)-1),to(_(i,tY),e,t),k(i,tG,_(i,tG)-1)}),k(this,tN,t),k(this,tW,e),k(this,tq,i),k(this,tL,n),k(this,tD,r),k(this,tF,o),k(this,tJ,this),k(this,tK,{nnodes:1,nlinks:0,multis:0,acyclic:!0,roots:[this],leaves:[this]}),_(this,tW).add(this)}get x(){if(void 0===this.ux)throw tu`can't get \`x\` when \`ux\` is undefined`;return this.ux}set x(t){this.ux=t}get y(){if(void 0===this.uy)throw tu`can't get \`y\` when \`uy\` is undefined`;return this.uy}set y(t){this.uy=t}*nodes(){yield*B(tl(t=>tb(t.children(),t.parents()),this))}topological(t){return tM(this.nodes(),t)}*links(){for(let t of this.nodes())yield*B(t.childLinks())}nnodes(){return M(this,t0,t1).call(this).nnodes}nlinks(){return M(this,t0,t1).call(this).nlinks}*split(){yield this}connected(){return!0}multi(){return M(this,t0,t1).call(this).multis>0}acyclic(){let t=M(this,t0,t1).call(this);return null===t.acyclic?t.acyclic=function(t){let e,i=new Map(ty(t,t=>[t,t.nparents()])),n=[...ty(tm(i,([,t])=>0===t),([t])=>t)];for(let t of n)i.delete(t);for(;e=n.pop();)for(let t of e.children()){let e=i.get(t)-1;e?i.set(t,e):(i.delete(t),n.push(t))}return!i.size}(this.nodes()):t.acyclic}node(t){if(_(this,tN))return _(this,tN).node(t);throw tu`can't add a node from a deleted node`}link(t,e,i){if(_(this,tN)){if(t===e)throw tu`tried to create a link between the same node, but self loops are not supported`;if(tP(t)&&tP(e)&&_(t,tN)===_(e,tN)&&_(this,tN)===_(t,tN)){let n=new t6(_(this,tN),t,e,_(this,t2),i),r=t.nchildLinksTo(e)>0,o=M(t,tQ,tZ).call(t),s=_(o,tK),a=M(e,tQ,tZ).call(e),l=_(a,tK);if(r&&s)k(t,tU,_(t,tU)+1),s.nlinks+=1,s.multis+=1;else if(r)k(t,tU,_(t,tU)+1);else if(o===a&&s)s.nlinks+=1,!0===s.acyclic&&(s.acyclic=null);else if(o!==a&&s&&l){let[t,e,i,n]=s.nnodes>l.nnodes?[o,s,a,l]:[a,l,o,s];_(this,tW).delete(i),k(i,tJ,t),k(i,tK,void 0),e.nnodes+=n.nnodes,e.nlinks+=n.nlinks+1,e.multis+=n.multis,e.acyclic=!1!==e.acyclic&&!1!==n.acyclic&&(!0===e.acyclic&&!0===n.acyclic||null),e.roots=null,e.leaves=null}else o!==a&&(k(o,tK,null),k(a,tK,null));return _(this,tD).call(this,r,o!==a),k(t,tX,_(t,tX)+1),tr(_(t,tH),e,n),k(e,tG,_(e,tG)+1),tr(_(e,tY),t,n),n}throw tu`when creating a link, both source and target must be current members of the same graph, and can't have been deleted`}throw tu`can't add a link from a deleted node`}nparents(){return _(this,tY).size}nchildren(){return _(this,tH).size}nparentLinks(){return _(this,tG)}nchildLinks(){return _(this,tX)}nparentLinksTo(t){var e,i;return tP(t)&&null!=(i=null==(e=_(this,tY).get(t))?void 0:e.size)?i:0}*parentLinksTo(t){if(tP(t)){let e=_(this,tY).get(t);e&&(yield*B(e))}}nchildLinksTo(t){var e,i;return tP(t)&&null!=(i=null==(e=_(this,tH).get(t))?void 0:e.size)?i:0}*childLinksTo(t){if(tP(t)){let e=_(this,tH).get(t);e&&(yield*B(e))}}*parents(){yield*B(_(this,tY).keys())}*children(){yield*B(_(this,tH).keys())}*parentCounts(){for(let[t,e]of _(this,tY))yield[t,e.size]}*childCounts(){for(let[t,e]of _(this,tH))yield[t,e.size]}*parentLinks(){for(let t of _(this,tY).values())yield*B(t)}*childLinks(){for(let t of _(this,tH).values())yield*B(t)}*ancestors(){yield*B(tl(t=>t.parents(),this))}*descendants(){yield*B(tl(t=>t.children(),this))}*roots(){let t=M(this,t0,t1).call(this);t.roots||(t.roots=[...tC(this.nodes(),t=>t.children())]),yield*B(t.roots)}*leaves(){let t=M(this,t0,t1).call(this);t.leaves||(t.leaves=[...tC(this.nodes(),t=>t.parents())]),yield*B(t.leaves)}parent(t,e){return this.link(t,this,e)}child(t,e){return this.link(this,t,e)}delete(){if(_(this,tN)){let t;for(;t=tA(_(this,tH));)t.delete();for(;t=tA(_(this,tY));)t.delete();_(this,tW).delete(this),_(this,tq).delete(this),_(this,tL).call(this),k(this,tN,null),k(this,tK,null)}}toJSON(){return tw(this)}};tN=new WeakMap,tL=new WeakMap,tD=new WeakMap,tF=new WeakMap,tW=new WeakMap,tq=new WeakMap,tU=new WeakMap,tG=new WeakMap,tY=new WeakMap,tX=new WeakMap,tH=new WeakMap,tJ=new WeakMap,tK=new WeakMap,tQ=new WeakSet,tZ=function(){let t=this;for(;_(t,tJ)!==t;)k(t,tJ,_(_(t,tJ),tJ)),t=_(t,tJ);return t},t0=new WeakSet,t1=function(){let t=M(this,tQ,tZ).call(this);if(void 0===_(t,tK))throw tf`undefined cached info`;if(null!==_(t,tK))return _(t,tK);{let t=0,e=0,i=0;for(let n of this.nodes())t+=1,e+=n.nchildLinks(),i+=_(n,tU),k(n,tJ,this),k(n,tK,void 0),_(this,tq).delete(n);return _(this,tW).add(this),k(this,tK,{nnodes:t,nlinks:e,multis:i,acyclic:null,roots:null,leaves:null})}},t2=new WeakMap;var t3,t9,t6=class{constructor(t,e,i,n,r){this.source=e,this.target=i,this.data=r,I(this,t3,void 0),I(this,t9,void 0),this.points=[],k(this,t3,t),k(this,t9,n)}delete(){_(this,t3)&&(_(this,t9).call(this,this),k(this,t3,null))}};function t8(t){function e(e,i){var n;return ty(null!=(n=t(e,i))?n:[],t=>[t,void 0])}return e.wrapped=t,e}function t7(t){if("object"!=typeof t||null===t||!("id"in t))throw tu`datum did not have an id field, and no id accessor was specified; try calling \`graphStratify().id(d => d...)\` to set a custom id accessor`;let{id:e}=t;if("string"==typeof e)return e;throw tu`datum has an id field that was not a string, and no id accessor was specified; try calling \`graphStratify().id(d => d...)\` to set a custom id accessor`}function t4(t){var e,i;if("object"!=typeof t||null===t)throw tu`default parentIds function expected datum to be an object but got: ${t}; try setting a custom accessor for parentIds with \`graphStratify().parentIds(d => ...)\``;if(!("parentIds"in t))return;let{parentIds:n}=t;if(void 0===n||"object"==typeof(i=n)&&null!==i&&Symbol.iterator in i&&"function"==typeof i[Symbol.iterator]&&(e=t=>"string"==typeof t,!tg(n,(t,i)=>!e(t,i))))return n;throw tu`default parentIds function expected parentIds to be an iterable of strings but got: ${n}; try setting a custom accessor for parentIds with \`graphStratify().parentIds(d => ...)\``}function et(...t){if(t.length)throw tu`got arguments to graphStratify(${t}), but constructor takes no arguments; these were probably meant as data which should be called as \`graphStratify()(...)\``;return function t(e){function i(t){var i;let r=new tR,o=new Map,s=[];for(let[a,l]of t.entries()){let t=function(t){if("string"!=typeof t)throw tu`id is supposed to be type string but got type ${typeof t}`;return t}(e.id(l,a)),h=r.node(l);for(let[t,n]of null!=(i=e.parentData(l,a))?i:[])s.push([t,h,n]);if(o.has(t))throw tu`found a duplicate id: ${n}, but ids passed to \`graphStratify()\` must be unique`;o.set(t,h)}for(let[t,e,i]of s){let n=o.get(t);if(!n)throw tu`missing id: ${t}; this id was references in a node's parentIds, but no node with that id exists`;r.link(n,e,i)}return r}function n(i){if(void 0===i)return e.id;{let{id:n}=e;return t(y(v({},m(e,["id"])),{id:i}))}}return i.id=n,i.parentData=function(i){if(void 0===i)return e.parentData;{let{parentIds:n,parentData:r}=e;return t(y(v({},m(e,["parentIds","parentData"])),{parentIds:function(t){function e(e,i){var n;return ty(null!=(n=t(e,i))?n:[],([t])=>t)}return e.wrapped=t,e}(i),parentData:i}))}},i.parentIds=function(i){if(void 0===i)return e.parentIds;{let{parentIds:n,parentData:r}=e;return t(y(v({},m(e,["parentIds","parentData"])),{parentIds:i,parentData:t8(i)}))}},i}({id:t7,parentIds:t4,parentData:t8(t4)})}function ee(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}t3=new WeakMap,t9=new WeakMap;var ei=x(H());function en(t,e,i,n,r={}){let o=ei.Solve.call({},{optimize:t,opType:e,constraints:n,variables:i,ints:r}),{feasible:s}=o,a=m(o,["feasible"]);if(!s)throw tf`could not find a feasible simplex solution`;return a}function er(t){let e=[...t];if(e.sort((t,e)=>t-e),0!==e.length){if(2===e.length)return(e[0]+e[1])/2;if(e.length%2!=0)return e[(e.length-1)/2];{let t=e.length/2,i=e[0],n=e[t-1],r=e[t],o=e[e.length-1],s=n-i,a=o-r;return(n*a+r*s)/(s+a)}}}function eo(...t){if(t.length)throw tu`got arguments to twolayerAgg(${t}); you probably forgot to construct twolayerAgg before passing to order: \`decrossTwoLayer().order(twolayerAgg())\`, note the trailing "()"`;return function t({aggregate:e}){function i(t,i,n){let[r,o]=n?[i,t]:[t,i],s=n?t=>t.parents():t=>t.children(),a=new Map(o.map((t,e)=>[t,e])),l=new Map(r.map(t=>{let i=a.get(t),n=null!=i?i:e(ty(s(t),t=>a.get(t)));return[t,n]}));!function(t,e){let i=new Map;for(let n of t){let t=e.get(n);void 0!==t&&function(t,e,i){let n=t.get(e);void 0===n?t.set(e,[i]):n.push(i)}(i,t,n)}let n=[...i.entries()].sort(([t],[e])=>t-e).flatMap(([,t])=>t),r=new Map(t.map((t,e)=>[t,e])),o=t.filter(t=>void 0===e.get(t)),s=Array(o.length).fill(null);(function t(e,i,a,l){if(i<=e)return;let h=Math.floor((e+i)/2),u=o[h],c=r.get(u),f=0,d=[0];for(let t=a;t<l;++t)f+=r.get(n[t])<c?-1:1,d.push(f);let p=a+d.indexOf(Math.min(...d));s[h]=p,t(e,h,a,p),t(h+1,i,p,l)})(0,o.length,0,n.length),s.push(n.length+1);let a=0,l=0;for(let[e,i]of n.entries()){for(;s[l]==e;)t[a++]=o[l++];t[a++]=i}for(;s[l]==n.length;)t[a++]=o[l++]}(r,l)}return i.aggregator=function(i){return void 0===i?e:t({aggregate:i})},i.d3dagBuiltin=!0,i}({aggregate:er})}function es([t,e,i]){if(t<=0||e<=0||i<=0)throw tu`simplex weights must be positive, but got: ${t}, ${e}, ${i}`}function ea(t,e){let i=new Map,n=new Map(t.map((t,e)=>[t,e]));return function(t,r){var o;let s=null==(o=i.get(t))?void 0:o.get(r);if(void 0!==s)return s;if(n.has(t)||n.has(r))return-1/0;{let o=0;for(let[i,s]of e(t)){let t=n.get(i);for(let[i,a]of e(r))o+=Math.sign(t-n.get(i))*s*a}let s=i.get(t);void 0===s?i.set(t,new Map([[r,o]])):s.set(r,o);let a=i.get(r);return void 0===a?i.set(r,new Map([[t,-o]])):a.set(t,-o),o}}}function el(...t){if(t.length)throw tu`got arguments to twolayerGreedy(${t}); you probably forgot to construct twolayerGreedy before passing to order: \`decrossTwoLayer().order(twolayerGreedy())\`, note the trailing "()"`;return function t({baseOp:e,doScan:i}){function n(t,n,r){e(t,n,r);let o=r?n:t,s=r?ea(t,t=>t.parentCounts()):ea(n,t=>t.childCounts());i?function(t,e){let i=Array(t.length*(t.length-1)/2);for(;;){let n=0;for(let r=1;r<t.length;++r){let o=0,s=n;for(let n=r-1;n>=0;--n)i[s]=o,o+=e(t[n],t[r]),s-=t.length-n-1;n+=t.length-r}let r=0,o=0,s=0,a=0;for(let n=0;n<t.length-1;++n){let l=0;for(let h=n+1;h<t.length;++h){l+=e(t[n],t[h]);let u=i[r++]+l;u>o&&(o=u,s=n,a=h)}}if(0===o)break;let l=t[a];t[a]=t[s],t[s]=l}}(o,s):function(t,e){let i=[[0,t.length]],n;for(;n=i.pop();){let[r,o]=n;if(r>=o)continue;let s=0,a=o;for(let i=r;i<o-1;++i){let n=e(t[i],t[i+1]);n>s&&(s=n,a=i)}if(a!==o){let e=t[a+1];t[a+1]=t[a],t[a]=e,i.push([r,a],[a+2,o])}}}(o,s)}return n.base=function(n){return void 0===n?e:t({baseOp:n,doScan:i})},n.scan=function(n){return void 0===n?i:t({baseOp:e,doScan:n})},n.d3dagBuiltin=!0,n}({baseOp:()=>{},doScan:!1})}function eh(t){let e=0;for(let[i,n]of tx(t)){let t=new Map(n.map((t,e)=>[t,e]));for(let[n,r]of i.entries())for(let o of i.slice(n+1))for(let[i,n]of r.childCounts())for(let[r,s]of o.childCounts())i!==r&&t.get(i)>t.get(r)&&(e+=n*s)}return e}function eu(...t){if(t.length)throw tu`got arguments to decrossDfs(${t}); you probably forgot to construct decrossDfs before passing to decross: \`sugiyama().decross(decrossDfs())\`, note the trailing "()"`;return function t(e){function i(t){let i;for(let n of(i=e.topDown?tl(t=>[...t.children()].sort((t,e)=>e.nchildren()-t.nchildren()),...tv(t,t=>[...tm(t,t=>!t.nparents())].sort((t,e)=>e.nchildren()-t.nchildren()))):tl(t=>[...t.parents()].sort((t,e)=>e.nparents()-t.nparents()),...tv(function(t,e=0,i=t.length,n=1){if(n>0)return function*(t,e,i,n){let r=Math.min(i,t.length);for(let i=e;i<r;i+=n)yield t[i]}(t,e,i,n);if(n<0)return function*(t,e,i,n){let r=Math.max(i,-1);for(let i=e;i>r;i+=n)yield t[i]}(t,e,i,n);throw tu`can't slice with zero stride`}(t,t.length-1,-1,-1),t=>[...tm(t,t=>!t.nchildren())].sort((t,e)=>e.nparents()-t.nparents()))),t))n.splice(0);for(let e of i){let{data:i}=e;if("node"===i.role)for(let n=i.topLayer;n<=i.bottomLayer;++n)t[n].push(e);else t[i.layer].push(e)}}return i.topDown=function(i){return void 0===i?e.topDown:t({topDown:i})},i.d3dagBuiltin=!0,i}({topDown:!0})}function ec(...t){if(t.length)throw tu`got arguments to decrossTwoLayer(${t}); you probably forgot to construct decrossTwoLayer before passing to decross: \`sugiyama().decross(decrossTwoLayer())\`, note the trailing "()"`;return function t(e){function i(t){let i=t.slice().reverse(),n=t.map(t=>t.slice()),r=eh(n);for(let o of e.inits.length?e.inits:[()=>{}]){o(t);let s=!0;for(let o=0;o<e.passes&&s;++o){for(let[i,n]of(s=!1,tx(t))){let t=n.slice();e.order(i,n,!0),n.some((e,i)=>t[i]!==e)&&(s=!0)}let o=eh(t);for(let[a,l]of(o<r&&(r=o,n=t.map(t=>t.slice())),tx(i))){let t=l.slice();e.order(l,a,!1),l.some((e,i)=>t[i]!==e)&&(s=!0)}let a=eh(t);a<r&&(r=a,n=t.map(t=>t.slice()))}}t.splice(0,t.length,...n)}return i.order=function(i){if(void 0===i)return e.order;{let{order:n}=e;return t(y(v({},m(e,["order"])),{order:i}))}},i.inits=function(i){if(void 0===i)return[...e.inits];{let{inits:n}=e;return t(y(v({},m(e,["inits"])),{inits:i}))}},i.passes=function(i){if(void 0===i)return e.passes;if(i<=0)throw tu`number of passes must be positive`;return t(y(v({},e),{passes:i}))},i.d3dagBuiltin=!0,i}({order:el().base(eo()),inits:[eu().topDown(!0),eu().topDown(!1)],passes:24})}function ef(t,e){return+!!(t&&e)}function ed(){}function ep(...t){if(t.length)throw tu`got arguments to layeringSimplex(${t}); you probably forgot to construct layeringSimplex before passing to layering: \`sugiyama().layering(layeringSimplex())\`, note the trailing "()"`;return function t(e){function i(t,i){var n;let r={},o={},s=new Map(ty(t.nodes(),(t,e)=>[t,e.toString()]));function a(t){return s.get(t)}function l(t,e,i,n,s=0){let h=r[a(e)],u=r[a(i)],c=`${t}: ${a(e)} -> ${a(i)}`;o[c]={min:n},h[c]=-1,u[c]=1,h.opt+=s,u.opt-=s}function h(t,e,i){l(`${t} before`,e,i,0),l(`${t} after`,i,e,0)}let u=[],c=new Map;for(let i of t.nodes()){r[a(i)]={opt:0};let t=e.rank(i);void 0!==t&&u.push([t,i]);let n=e.group(i);if(void 0!==n){let t=c.get(n);t?t.push(i):c.set(n,[i])}}let f=new Set;for(let n of t.topological(e.rank)){for(let[t,e]of n.childCounts())f.has(t)?l("link",t,n,i(t,n),e):l("link",n,t,i(n,t),e);f.add(n)}for(let[[t,e],[n,r]]of tx(u.sort(([t],[e])=>t-e)))t<n?l("rank",e,r,i(e,r)):h("rank",e,r);for(let t of c.values())for(let[e,i]of tx(t))h("group",e,i);try{let e=en("opt","max",r,o,{}),s=0,l=0;for(let r of t.nodes()){let t=null!=(n=e[a(r)])?n:0;r.y=t,s=Math.min(s,t-i(void 0,r)),l=Math.max(l,t+i(r,void 0))}for(let e of t.nodes())e.y-=s;return l-s}catch(t){throw c.size?tu`could not find a feasible simplex layout; this is likely due to group constraints producing an infeasible layout, try relaxing the functions you're passing to \`layeringSimplex().group(...)\``:tf`could not find a feasible simplex solution`}}return i.rank=function(i){if(void 0===i)return e.rank;{let{rank:n}=e;return t(y(v({},m(e,["rank"])),{rank:i}))}},i.group=function(i){if(void 0===i)return e.group;{let{group:n}=e;return t(y(v({},m(e,["group"])),{group:i}))}},i.d3dagBuiltin=!0,i}({rank:ed,group:ed})}function ev(...t){if(t.length)throw tu`got arguments to sugiyama(${t}), but constructor takes no arguments; these were probably meant as data which should be called as \`sugiyama()(...)\``;return function t(e,i){function n(t){let n;if(t.nnodes()){var r;let[o,s]=function(t){if("function"==typeof t)return[e=>t(e)[0],e=>t(e)[1]];{let[e,i]=t;return[()=>e,()=>i]}}(function(t){if("function"!=typeof t){let[e,i]=t;if(e<=0||i<=0)throw tu`all node sizes must be positive, but got width ${e} and height ${i}`;return()=>[e,i]}{let e=new Map;return i=>{let n=e.get(i);if(void 0===n){let[r,o]=n=t(i);if(r<=0||o<=0)throw tu`all node sizes must be positive, but got width ${r} and height ${o} for node with data: ${i.data}; make sure the callback passed to \`sugiyama().nodeSize(...)\` is doing that`;e.set(i,n)}return n}}}(e.nodeSize)),[a,l]=i.gap,h=e.layering(t,ef)+1,[u,c]=function(t,e,i,n,r){let o=new tR,s=Array(n).fill(!1),a=new Map;for(let e of t.nodes()){let t=e.uy;if(void 0===t)throw td`layering ${r} didn't assign a layer to a node`;if(t<0||t>=n)throw td`layering ${r} assigned node an invalid layer: ${t}`;{let i=tb(e.parentCounts(),e.childCounts());!s[t]&&tg(i,([{uy:e},i])=>i>1&&e===t-1)&&(s[t]=!0);let n={node:e,topLayer:t,bottomLayer:t,role:"node"};a.set(e,[n,o.node(n)])}}let l=0,h=s.map(t=>l+=+t);for(let[t]of a.values()){let e=h[t.topLayer];t.topLayer+=e,t.bottomLayer+=e}let u=function(t,e,i,n){for(let[i,[r,o]]of e){let s=r.bottomLayer;for(let r of i.childLinks()){let[i,a]=e.get(r.target),l=i.topLayer;if(l>s){let e=o;for(let i=s+1;i<l;++i){let n=t.node({link:r,layer:i,role:"link"});e.child(n,void 0),e=n}e.child(a)}else if(l<s){let e=a;for(let i=l+1;i<s;++i){let n=t.node({link:r,layer:i,role:"link"});e.child(n,void 0),e=n}e.child(o)}else throw td`layering ${n} assigned nodes with an edge to the same layer`}}let r=Array(i).fill(null).map(()=>[]);for(let e of t.nodes()){let{data:t}=e;if("node"===t.role){let{topLayer:i,bottomLayer:n}=t;for(let t=i;t<=n;++t)r[t].push(e)}else{let{layer:i}=t;r[i].push(e)}}for(let t of r)if(!t.length)throw td`layering ${n} didn't assign a node to every layer`;return r}(o,a,n+l,r),c=-i;for(let t of u){c+=i;let n=Math.max(-i,...ty(t,({data:t})=>"node"===t.role?e(t.node):-1/0)),r=c+n/2;for(let e of t)e.y=r;c+=n}return[u,c]}(t,s,l,h,e.layering);e.decross(u);let f=(r=function(t,e=0){return({data:i})=>"node"===i.role?t(i.node):e}(o),function(t,e){let i=((t?r(t):0)+(e?r(e):0))/2;return t&&e?i+a:i}),d=e.coord(u,f);(function(t,e,i,n,r=.001){for(let o of t){for(let t of o)if(void 0===t.ux)throw td`coord ${n} didn't assign an x to every node`;for(let[[t,s],[a,l]]of tx(tb([[void 0,0]],ty(o,t=>[t,t.x]),[[void 0,i]])))if(l-s<e(t,a)-r)throw td`coord ${n} assigned nodes too close for separation`}})(u,f,d,e.coord),function(t){for(let e of t)for(let t of e)if("node"===t.data.role){let{node:e}=t.data;for(let i of(e.x=t.x,e.y=t.y,t.children())){let n=[[t.x,t.y]],r;for(;"link"===i.data.role;)r=i.data.link,n.push([i.x,i.y]),[i]=i.children();n.push([i.x,i.y]);let o=i.data.node,s=tb(e.childLinksTo(o),e.parentLinksTo(o));r||([r]=s),r.source!==e&&n.reverse(),r.points.splice(0,r.points.length,...n)}}}(u),n={width:d,height:c}}else n={width:0,height:0};for(let i of e.tweaks)n=i(t,n);return n}return n.layering=function(n){if(void 0===n)return e.layering;{let{layering:r}=e;return t(y(v({},m(e,["layering"])),{layering:n}),i)}},n.decross=function(n){if(void 0===n)return e.decross;{let{decross:r}=e;return t(y(v({},m(e,["decross"])),{decross:n}),i)}},n.coord=function(n){if(void 0===n)return e.coord;{let{coord:r}=e;return t(y(v({},m(e,["coord"])),{coord:n}),i)}},n.tweaks=function(n){if(void 0===n)return e.tweaks;{let{tweaks:r}=e;return t(y(v({},m(e,["tweaks"])),{tweaks:n}),i)}},n.nodeSize=function(n){if(void 0===n)return e.nodeSize;if("function"!=typeof n&&(n[0]<=0||n[1]<=0)){let[t,e]=n;throw tu`constant nodeSize must be positive, but got: [${t}, ${e}]`}{let{nodeSize:r}=e;return t(y(v({},m(e,["nodeSize"])),{nodeSize:n}),i)}},n.gap=function(n){if(void 0!==n){let[r,o]=n;if(r<0||o<0)throw tu`gap width (${r}) and height (${o}) must be non-negative`;return t(e,y(v({},i),{gap:n}))}{let[t,e]=i.gap;return[t,e]}},n}({layering:ep(),decross:ec(),coord:function(...t){if(t.length)throw tu`got arguments to coordSimplex(${t}); you probably forgot to construct coordSimplex before passing to coord: \`sugiyama().coord(coordSimplex())\`, note the trailing "()"`;return function t(e){function i(t,i){var n;let r={},o={},s=function(t,e){if("function"!=typeof e){let[t,i,n]=e;return(e,r)=>{switch(+("node"===e.data.role)+ +("node"===r.data.role)){case 0:return n;case 1:return i;case 2:return t;default:throw tf`invalid count`}}}{let i=new Map;for(let n of tv(t,t=>t))if("node"===n.data.role){let t=n.data.node,r=new Map;for(let i of t.childLinks()){let{target:t}=i,n=e(i);es(n),r.set(t,n)}i.set(t,r)}return(t,e)=>{if("link"===t.data.role){let{source:n,target:r}=t.data.link,[,o,s]=i.get(n).get(r);return"link"===e.data.role?s:o}if("link"===e.data.role){let{source:t,target:n}=e.data.link,[,r]=i.get(t).get(n);return r}{let[n]=i.get(t.data.node).get(e.data.node);return n}}}}(t,e.weight),a=new Map,l=0;for(let e of t)for(let t of e)if(!a.has(t)){let e=`${l++}`;a.set(t,e),r[e]={}}function h(t){return a.get(t)}for(let e of t)for(let[t,n]of tx(e)){let e=h(t),s=h(n),a=`layer ${e} -> ${s}`,l=i(t,n);o[a]={min:l},r[e][a]=-1,r[s][a]=1}let u=function(t){let e=0,i=0;for(let n of t)i++,e+=(n-e)/i;return i?e:void 0}(tv(a.keys(),t=>ty(t.children(),e=>e.y-t.y)));for(let t of a.keys()){let e=h(t);for(let i of t.children()){let n=h(i),a=`link ${e} -> ${n}`,l=`${a} parent`;o[l]={min:0};let c=`${a} child`;o[c]={min:0},r[e][l]=1,r[e][c]=-1,r[n][l]=-1,r[n][c]=1;let f=s(t,i),d=(i.y-t.y)/u;r[a]={opt:f/d,[l]:1,[c]:1}}}let c=en("opt","min",r,o);for(let[t,e]of a)t.x=null!=(n=c[e])?n:0;let f=0,d=0;for(let e of t){let t=e[0];f=Math.min(f,t.x-i(void 0,t));let n=e[e.length-1];d=Math.max(d,n.x+i(n,void 0))}for(let t of a.keys())t.x-=f;let p=d-f;if(p<=0)throw tu`must assign nonzero width to at least one node; double check the callback passed to \`sugiyama().nodeSize(...)\``;return p}return i.weight=function(i){if(void 0===i)return e.weight;{"function"!=typeof i&&es(i);let{weight:n}=e;return t(y(v({},m(e,["weight"])),{weight:i}))}},i.d3dagBuiltin=!0,i}({weight:[1,2,8]})}(),nodeSize:[1,1],tweaks:[]},{gap:[1,1]})}x(ti());function ey(t,e,i,n){let[r,o]=t,[s,a]=e,[l,h]=i,[u,c]=n,f=r-s/2,d=r+s/2,p=o-a/2,v=o+a/2;function y(t,e){let i=0;return t<f?i|=1:t>d&&(i|=2),e<p?i|=4:e>v&&(i|=8),i}let m=y(l,h),g=y(u,c);if(!g)throw tu`line from [${l}, ${h}] -> [${u}, ${c}] ended inside rectangle centered at [${r}, ${o}] with size [${s}, ${a}]`;for(;;){if(!g)return[u,c];if(m&g)return[l,h];8&g?(u=l+(u-l)*(v-h)/(c-h),c=v):4&g?(u=l+(u-l)*(p-h)/(c-h),c=p):2&g?(c=h+(c-h)*(d-l)/(u-l),u=d):(c=h+(c-h)*(f-l)/(u-l),u=f),g=y(u,c)}}function em(t,e=ey){return function(i,n){for(let n of i.nodes()){let i=[n.x,n.y],r="function"==typeof t?t(n):t;for(let{points:t}of n.parentLinks()){let[n,o]=t.slice(-2),s=e(i,r,o,n);t.splice(-1,1,s)}for(let{points:t}of n.childLinks()){let[n,o]=t,s=e(i,r,n,o);t.splice(0,1,s)}}return n}}},31993:(t,e,i)=>{i.d(e,{j:()=>n});function n(t){return t}},12898:(t,e,i)=>{i.d(e,{n5:()=>E});var n=i(41089),r=i(16486),o=i(60070),s=i(50183),a=i(70240),l=i(72548);let h=t=>()=>t;function u(t,{sourceEvent:e,target:i,selection:n,mode:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},selection:{value:n,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function c(t){t.preventDefault(),t.stopImmediatePropagation()}var f={name:"drag"},d={name:"space"},p={name:"handle"},v={name:"center"};let{abs:y,max:m,min:g}=Math;function b(t){return[+t[0],+t[1]]}function x(t){return[b(t[0]),b(t[1])]}var w={name:"x",handles:["w","e"].map(V),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},_={name:"y",handles:["n","s"].map(V),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},I=(["n","w","e","s","nw","ne","sw","se"].map(V),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),k={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},M={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},C={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},B={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function V(t){return{type:t}}function z(t){return!t.ctrlKey&&!t.button}function S(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function $(){return navigator.maxTouchPoints||"ontouchstart"in this}function O(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function E(){return function(t){var e,i=S,b=z,E=$,T=!0,j=(0,n.A)("start","brush","end"),R=6;function A(e){var i=e.property("__brush",q).selectAll(".overlay").data([V("overlay")]);i.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",I.overlay).merge(i).each(function(){var t=O(this).extent;(0,s.A)(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),e.selectAll(".selection").data([V("selection")]).enter().append("rect").attr("class","selection").attr("cursor",I.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var n=e.selectAll(".handle").data(t.handles,function(t){return t.type});n.exit().remove(),n.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return I[t.type]}),e.each(P).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",D).filter(E).on("touchstart.brush",D).on("touchmove.brush",F).on("touchend.brush touchcancel.brush",W).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function P(){var t=(0,s.A)(this),e=O(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-R/2:e[0][0]-R/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-R/2:e[0][1]-R/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+R:R}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+R:R})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function N(t,e,i){var n=t.__brush.emitter;return!n||i&&n.clean?new L(t,e,i):n}function L(t,e,i){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=i}function D(i){if((!e||i.touches)&&b.apply(this,arguments)){var n,o,h,u,x,V,z,S,$,E,j,R=this,A=i.target.__data__.type,L=(T&&i.metaKey?A="overlay":A)==="selection"?f:T&&i.altKey?v:p,D=t===_?null:C[A],F=t===w?null:B[A],W=O(R),q=W.extent,U=W.selection,G=q[0][0],Y=q[0][1],X=q[1][0],H=q[1][1],J=0,K=0,Q=D&&F&&T&&i.shiftKey,Z=Array.from(i.touches||[i],t=>{let e=t.identifier;return(t=(0,a.A)(t,R)).point0=t.slice(),t.identifier=e,t});(0,l.G)(R);var tt=N(R,arguments,!0).beforestart();if("overlay"===A){U&&($=!0);let e=[Z[0],Z[1]||Z[0]];W.selection=U=[[n=t===_?G:g(e[0][0],e[1][0]),h=t===w?Y:g(e[0][1],e[1][1])],[x=t===_?X:m(e[0][0],e[1][0]),z=t===w?H:m(e[0][1],e[1][1])]],Z.length>1&&to(i)}else n=U[0][0],h=U[0][1],x=U[1][0],z=U[1][1];o=n,u=h,V=x,S=z;var te=(0,s.A)(R).attr("pointer-events","none"),ti=te.selectAll(".overlay").attr("cursor",I[A]);if(i.touches)tt.moved=tr,tt.ended=ts;else{var tn=(0,s.A)(i.view).on("mousemove.brush",tr,!0).on("mouseup.brush",ts,!0);T&&tn.on("keydown.brush",function(t){switch(t.keyCode){case 16:Q=D&&F;break;case 18:L===p&&(D&&(x=V-J*D,n=o+J*D),F&&(z=S-K*F,h=u+K*F),L=v,to(t));break;case 32:(L===p||L===v)&&(D<0?x=V-J:D>0&&(n=o-J),F<0?z=S-K:F>0&&(h=u-K),L=d,ti.attr("cursor",I.selection),to(t));break;default:return}c(t)},!0).on("keyup.brush",function(t){switch(t.keyCode){case 16:Q&&(E=j=Q=!1,to(t));break;case 18:L===v&&(D<0?x=V:D>0&&(n=o),F<0?z=S:F>0&&(h=u),L=p,to(t));break;case 32:L===d&&(t.altKey?(D&&(x=V-J*D,n=o+J*D),F&&(z=S-K*F,h=u+K*F),L=v):(D<0?x=V:D>0&&(n=o),F<0?z=S:F>0&&(h=u),L=p),ti.attr("cursor",I[A]),to(t));break;default:return}c(t)},!0),(0,r.A)(i.view)}P.call(R),tt.start(i,L.name)}function tr(t){for(let e of t.changedTouches||[t])for(let t of Z)t.identifier===e.identifier&&(t.cur=(0,a.A)(e,R));if(Q&&!E&&!j&&1===Z.length){let t=Z[0];y(t.cur[0]-t[0])>y(t.cur[1]-t[1])?j=!0:E=!0}for(let t of Z)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);$=!0,c(t),to(t)}function to(t){var e;let i=Z[0],r=i.point0;switch(J=i[0]-r[0],K=i[1]-r[1],L){case d:case f:D&&(J=m(G-n,g(X-x,J)),o=n+J,V=x+J),F&&(K=m(Y-h,g(H-z,K)),u=h+K,S=z+K);break;case p:Z[1]?(D&&(o=m(G,g(X,Z[0][0])),V=m(G,g(X,Z[1][0])),D=1),F&&(u=m(Y,g(H,Z[0][1])),S=m(Y,g(H,Z[1][1])),F=1)):(D<0?(J=m(G-n,g(X-n,J)),o=n+J,V=x):D>0&&(J=m(G-x,g(X-x,J)),o=n,V=x+J),F<0?(K=m(Y-h,g(H-h,K)),u=h+K,S=z):F>0&&(K=m(Y-z,g(H-z,K)),u=h,S=z+K));break;case v:D&&(o=m(G,g(X,n-J*D)),V=m(G,g(X,x+J*D))),F&&(u=m(Y,g(H,h-K*F)),S=m(Y,g(H,z+K*F)))}V<o&&(D*=-1,e=n,n=x,x=e,e=o,o=V,V=e,A in k&&ti.attr("cursor",I[A=k[A]])),S<u&&(F*=-1,e=h,h=z,z=e,e=u,u=S,S=e,A in M&&ti.attr("cursor",I[A=M[A]])),W.selection&&(U=W.selection),E&&(o=U[0][0],V=U[1][0]),j&&(u=U[0][1],S=U[1][1]),(U[0][0]!==o||U[0][1]!==u||U[1][0]!==V||U[1][1]!==S)&&(W.selection=[[o,u],[V,S]],P.call(R),tt.brush(t,L.name))}function ts(t){var i;if(!function(t){t.stopImmediatePropagation()}(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout(function(){e=null},500)}else(0,r.y)(t.view,$),tn.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);te.attr("pointer-events","all"),ti.attr("cursor",I.overlay),W.selection&&(U=W.selection),((i=U)[0][0]===i[1][0]||i[0][1]===i[1][1])&&(W.selection=null,P.call(R)),tt.end(t,L.name)}}function F(t){N(this,arguments).moved(t)}function W(t){N(this,arguments).ended(t)}function q(){var e=this.__brush||{selection:null};return e.extent=x(i.apply(this,arguments)),e.dim=t,e}return A.move=function(e,i,n){e.tween?e.on("start.brush",function(t){N(this,arguments).beforestart().start(t)}).on("interrupt.brush end.brush",function(t){N(this,arguments).end(t)}).tween("brush",function(){var e=this,n=e.__brush,r=N(e,arguments),s=n.selection,a=t.input("function"==typeof i?i.apply(this,arguments):i,n.extent),l=(0,o.A)(s,a);function h(t){n.selection=1===t&&null===a?null:l(t),P.call(e),r.brush()}return null!==s&&null!==a?h:h(1)}):e.each(function(){var e=arguments,r=this.__brush,o=t.input("function"==typeof i?i.apply(this,e):i,r.extent),s=N(this,e).beforestart();(0,l.G)(this),r.selection=null===o?null:o,P.call(this),s.start(n).brush(n).end(n)})},A.clear=function(t,e){A.move(t,null,e)},L.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,i,n){var r=(0,s.A)(this.that).datum();j.call(e,this.that,new u(e,{sourceEvent:i,target:A,selection:t.output(this.state.selection),mode:n,dispatch:j}),r)}},A.extent=function(t){return arguments.length?(i="function"==typeof t?t:h(x(t)),A):i},A.filter=function(t){return arguments.length?(b="function"==typeof t?t:h(!!t),A):b},A.touchable=function(t){return arguments.length?(E="function"==typeof t?t:h(!!t),A):E},A.handleSize=function(t){return arguments.length?(R=+t,A):R},A.keyModifiers=function(t){return arguments.length?(T=!!t,A):T},A.on=function(){var t=j.on.apply(j,arguments);return t===j?A:t},A}(w)}},16486:(t,e,i)=>{i.d(e,{A:()=>s,y:()=>a});var n=i(50183);let r={capture:!0,passive:!1};function o(t){t.preventDefault(),t.stopImmediatePropagation()}function s(t){var e=t.document.documentElement,i=(0,n.A)(t).on("dragstart.drag",o,r);"onselectstart"in e?i.on("selectstart.drag",o,r):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function a(t,e){var i=t.document.documentElement,s=(0,n.A)(t).on("dragstart.drag",null);e&&(s.on("click.drag",o,r),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in i?s.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}},70240:(t,e,i)=>{i.d(e,{A:()=>n});function n(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}},32658:(t,e,i)=>{i.d(e,{s_:()=>_});var n=i(41089),r=i(16486);function o(t){return((t=Math.exp(t))+1/t)/2}let s=function t(e,i,n){function r(t,r){var s,a,l=t[0],h=t[1],u=t[2],c=r[0],f=r[1],d=r[2],p=c-l,v=f-h,y=p*p+v*v;if(y<1e-12)a=Math.log(d/u)/e,s=function(t){return[l+t*p,h+t*v,u*Math.exp(e*t*a)]};else{var m=Math.sqrt(y),g=(d*d-u*u+n*y)/(2*u*i*m),b=(d*d-u*u-n*y)/(2*d*i*m),x=Math.log(Math.sqrt(g*g+1)-g);a=(Math.log(Math.sqrt(b*b+1)-b)-x)/e,s=function(t){var n,r,s=t*a,c=o(x),f=u/(i*m)*(c*(((n=Math.exp(2*(n=e*s+x)))-1)/(n+1))-((r=Math.exp(r=x))-1/r)/2);return[l+f*p,h+f*v,u*c/o(e*s+x)]}}return s.duration=1e3*a*e/Math.SQRT2,s}return r.rho=function(e){var i=Math.max(.001,+e),n=i*i;return t(i,n,n*n)},r}(Math.SQRT2,2,4);var a=i(50183),l=i(70240),h=i(72548);let u=t=>()=>t;function c(t,{sourceEvent:e,target:i,transform:n,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:r}})}function f(t,e,i){this.k=t,this.x=e,this.y=i}f.prototype={constructor:f,scale:function(t){return 1===t?this:new f(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new f(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var d=new f(1,0,0);function p(t){t.stopImmediatePropagation()}function v(t){t.preventDefault(),t.stopImmediatePropagation()}function y(t){return(!t.ctrlKey||"wheel"===t.type)&&!t.button}function m(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function g(){return this.__zoom||d}function b(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function x(){return navigator.maxTouchPoints||"ontouchstart"in this}function w(t,e,i){var n=t.invertX(e[0][0])-i[0][0],r=t.invertX(e[1][0])-i[1][0],o=t.invertY(e[0][1])-i[0][1],s=t.invertY(e[1][1])-i[1][1];return t.translate(r>n?(n+r)/2:Math.min(0,n)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function _(){var t,e,i,o=y,_=m,I=w,k=b,M=x,C=[0,1/0],B=[[-1/0,-1/0],[1/0,1/0]],V=250,z=s,S=(0,n.A)("start","zoom","end"),$=0,O=10;function E(t){t.property("__zoom",g).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",F).filter(M).on("touchstart.zoom",W).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function T(t,e){return(e=Math.max(C[0],Math.min(C[1],e)))===t.k?t:new f(e,t.x,t.y)}function j(t,e,i){var n=e[0]-i[0]*t.k,r=e[1]-i[1]*t.k;return n===t.x&&r===t.y?t:new f(t.k,n,r)}function R(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function A(t,e,i,n){t.on("start.zoom",function(){P(this,arguments).event(n).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(n).end()}).tween("zoom",function(){var t=arguments,r=P(this,t).event(n),o=_.apply(this,t),s=null==i?R(o):"function"==typeof i?i.apply(this,t):i,a=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),l=this.__zoom,h="function"==typeof e?e.apply(this,t):e,u=z(l.invert(s).concat(a/l.k),h.invert(s).concat(a/h.k));return function(t){if(1===t)t=h;else{var e=u(t),i=a/e[2];t=new f(i,s[0]-e[0]*i,s[1]-e[1]*i)}r.zoom(null,t)}})}function P(t,e,i){return!i&&t.__zooming||new N(t,e)}function N(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=_.apply(t,e),this.taps=0}function L(t,...e){if(o.apply(this,arguments)){var i=P(this,e).event(t),n=this.__zoom,r=Math.max(C[0],Math.min(C[1],n.k*Math.pow(2,k.apply(this,arguments)))),s=(0,l.A)(t);if(i.wheel)(i.mouse[0][0]!==s[0]||i.mouse[0][1]!==s[1])&&(i.mouse[1]=n.invert(i.mouse[0]=s)),clearTimeout(i.wheel);else{if(n.k===r)return;i.mouse=[s,n.invert(s)],(0,h.G)(this),i.start()}v(t),i.wheel=setTimeout(function(){i.wheel=null,i.end()},150),i.zoom("mouse",I(j(T(n,r),i.mouse[0],i.mouse[1]),i.extent,B))}}function D(t,...e){if(!i&&o.apply(this,arguments)){var n=t.currentTarget,s=P(this,e,!0).event(t),u=(0,a.A)(t.view).on("mousemove.zoom",function(t){if(v(t),!s.moved){var e=t.clientX-f,i=t.clientY-d;s.moved=e*e+i*i>$}s.event(t).zoom("mouse",I(j(s.that.__zoom,s.mouse[0]=(0,l.A)(t,n),s.mouse[1]),s.extent,B))},!0).on("mouseup.zoom",function(t){u.on("mousemove.zoom mouseup.zoom",null),(0,r.y)(t.view,s.moved),v(t),s.event(t).end()},!0),c=(0,l.A)(t,n),f=t.clientX,d=t.clientY;(0,r.A)(t.view),p(t),s.mouse=[c,this.__zoom.invert(c)],(0,h.G)(this),s.start()}}function F(t,...e){if(o.apply(this,arguments)){var i=this.__zoom,n=(0,l.A)(t.changedTouches?t.changedTouches[0]:t,this),r=i.invert(n),s=i.k*(t.shiftKey?.5:2),h=I(j(T(i,s),n,r),_.apply(this,e),B);v(t),V>0?(0,a.A)(this).transition().duration(V).call(A,h,n,t):(0,a.A)(this).call(E.transform,h,n,t)}}function W(i,...n){if(o.apply(this,arguments)){var r,s,a,u,c=i.touches,f=c.length,d=P(this,n,i.changedTouches.length===f).event(i);for(p(i),s=0;s<f;++s)a=c[s],u=[u=(0,l.A)(a,this),this.__zoom.invert(u),a.identifier],d.touch0?d.touch1||d.touch0[2]===u[2]||(d.touch1=u,d.taps=0):(d.touch0=u,r=!0,d.taps=1+!!t);t&&(t=clearTimeout(t)),r&&(d.taps<2&&(e=u[0],t=setTimeout(function(){t=null},500)),(0,h.G)(this),d.start())}}function q(t,...e){if(this.__zooming){var i,n,r,o,s=P(this,e).event(t),a=t.changedTouches,h=a.length;for(v(t),i=0;i<h;++i)n=a[i],r=(0,l.A)(n,this),s.touch0&&s.touch0[2]===n.identifier?s.touch0[0]=r:s.touch1&&s.touch1[2]===n.identifier&&(s.touch1[0]=r);if(n=s.that.__zoom,s.touch1){var u=s.touch0[0],c=s.touch0[1],f=s.touch1[0],d=s.touch1[1],p=(p=f[0]-u[0])*p+(p=f[1]-u[1])*p,y=(y=d[0]-c[0])*y+(y=d[1]-c[1])*y;n=T(n,Math.sqrt(p/y)),r=[(u[0]+f[0])/2,(u[1]+f[1])/2],o=[(c[0]+d[0])/2,(c[1]+d[1])/2]}else{if(!s.touch0)return;r=s.touch0[0],o=s.touch0[1]}s.zoom("touch",I(j(n,r,o),s.extent,B))}}function U(t,...n){if(this.__zooming){var r,o,s=P(this,n).event(t),h=t.changedTouches,u=h.length;for(p(t),i&&clearTimeout(i),i=setTimeout(function(){i=null},500),r=0;r<u;++r)o=h[r],s.touch0&&s.touch0[2]===o.identifier?delete s.touch0:s.touch1&&s.touch1[2]===o.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(o=(0,l.A)(o,this),Math.hypot(e[0]-o[0],e[1]-o[1])<O)){var c=(0,a.A)(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return E.transform=function(t,e,i,n){var r=t.selection?t.selection():t;r.property("__zoom",g),t!==r?A(t,e,i,n):r.interrupt().each(function(){P(this,arguments).event(n).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},E.scaleBy=function(t,e,i,n){E.scaleTo(t,function(){var t=this.__zoom.k,i="function"==typeof e?e.apply(this,arguments):e;return t*i},i,n)},E.scaleTo=function(t,e,i,n){E.transform(t,function(){var t=_.apply(this,arguments),n=this.__zoom,r=null==i?R(t):"function"==typeof i?i.apply(this,arguments):i,o=n.invert(r),s="function"==typeof e?e.apply(this,arguments):e;return I(j(T(n,s),r,o),t,B)},i,n)},E.translateBy=function(t,e,i,n){E.transform(t,function(){return I(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof i?i.apply(this,arguments):i),_.apply(this,arguments),B)},null,n)},E.translateTo=function(t,e,i,n,r){E.transform(t,function(){var t=_.apply(this,arguments),r=this.__zoom,o=null==n?R(t):"function"==typeof n?n.apply(this,arguments):n;return I(d.translate(o[0],o[1]).scale(r.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof i?-i.apply(this,arguments):-i),t,B)},n,r)},N.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=(0,a.A)(this.that).datum();S.call(t,this.that,new c(t,{sourceEvent:this.sourceEvent,target:E,type:t,transform:this.that.__zoom,dispatch:S}),e)}},E.wheelDelta=function(t){return arguments.length?(k="function"==typeof t?t:u(+t),E):k},E.filter=function(t){return arguments.length?(o="function"==typeof t?t:u(!!t),E):o},E.touchable=function(t){return arguments.length?(M="function"==typeof t?t:u(!!t),E):M},E.extent=function(t){return arguments.length?(_="function"==typeof t?t:u([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),E):_},E.scaleExtent=function(t){return arguments.length?(C[0]=+t[0],C[1]=+t[1],E):[C[0],C[1]]},E.translateExtent=function(t){return arguments.length?(B[0][0]=+t[0][0],B[1][0]=+t[1][0],B[0][1]=+t[0][1],B[1][1]=+t[1][1],E):[[B[0][0],B[0][1]],[B[1][0],B[1][1]]]},E.constrain=function(t){return arguments.length?(I=t,E):I},E.duration=function(t){return arguments.length?(V=+t,E):V},E.interpolate=function(t){return arguments.length?(z=t,E):z},E.on=function(){var t=S.on.apply(S,arguments);return t===S?E:t},E.clickDistance=function(t){return arguments.length?($=(t=+t)*t,E):Math.sqrt($)},E.tapDistance=function(t){return arguments.length?(O=+t,E):O},E}f.prototype},25831:(t,e,i)=>{function n(t){return function(){return t}}function r(t){this._context=t}function o(t){return new r(t)}i.d(e,{uxU:()=>b,n8j:()=>f}),i(12898),Array.prototype.slice,r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};let s=Math.PI,a=2*s,l=a-1e-6;function h(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=arguments[e]+t[e]}let Path=class Path{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?h:function(t){let e=Math.floor(t);if(!(e>=0))throw Error(`invalid digits: ${t}`);if(e>15)return h;let i=10**e;return function(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=Math.round(arguments[e]*i)/i+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,i,n){this._append`Q${+t},${+e},${this._x1=+i},${this._y1=+n}`}bezierCurveTo(t,e,i,n,r,o){this._append`C${+t},${+e},${+i},${+n},${this._x1=+r},${this._y1=+o}`}arcTo(t,e,i,n,r){if(t=+t,e=+e,i=+i,n=+n,(r=+r)<0)throw Error(`negative radius: ${r}`);let o=this._x1,a=this._y1,l=i-t,h=n-e,u=o-t,c=a-e,f=u*u+c*c;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(f>1e-6){if(Math.abs(c*l-h*u)>1e-6&&r){let d=i-o,p=n-a,v=l*l+h*h,y=Math.sqrt(v),m=Math.sqrt(f),g=r*Math.tan((s-Math.acos((v+f-(d*d+p*p))/(2*y*m)))/2),b=g/m,x=g/y;Math.abs(b-1)>1e-6&&this._append`L${t+b*u},${e+b*c}`,this._append`A${r},${r},0,0,${+(c*d>u*p)},${this._x1=t+x*l},${this._y1=e+x*h}`}else this._append`L${this._x1=t},${this._y1=e}`}}arc(t,e,i,n,r,o){if(t=+t,e=+e,o=!!o,(i=+i)<0)throw Error(`negative radius: ${i}`);let h=i*Math.cos(n),u=i*Math.sin(n),c=t+h,f=e+u,d=1^o,p=o?n-r:r-n;null===this._x1?this._append`M${c},${f}`:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-f)>1e-6)&&this._append`L${c},${f}`,i&&(p<0&&(p=p%a+a),p>l?this._append`A${i},${i},0,1,${d},${t-h},${e-u}A${i},${i},0,1,${d},${this._x1=c},${this._y1=f}`:p>1e-6&&this._append`A${i},${i},0,${+(p>=s)},${d},${this._x1=t+i*Math.cos(r)},${this._y1=e+i*Math.sin(r)}`)}rect(t,e,i,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${i=+i}v${+n}h${-i}Z`}toString(){return this._}};function u(t){return t[0]}function c(t){return t[1]}function f(t,e){let i;var r=n(!0),s=null,a=o,l=null,h=(i=3,f.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{let e=Math.floor(t);if(!(e>=0))throw RangeError(`invalid digits: ${t}`);i=e}return f},()=>new Path(i));function f(i){var n,o,u,c,f=(i="object"==typeof(n=i)&&"length"in n?n:Array.from(n)).length,d=!1;for(null==s&&(l=a(c=h())),o=0;o<=f;++o)!(o<f&&r(u=i[o],o,i))===d&&((d=!d)?l.lineStart():l.lineEnd()),d&&l.point(+t(u,o,i),+e(u,o,i));if(c)return l=null,c+""||null}return t="function"==typeof t?t:void 0===t?u:n(t),e="function"==typeof e?e:void 0===e?c:n(e),f.x=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),f):t},f.y=function(t){return arguments.length?(e="function"==typeof t?t:n(+t),f):e},f.defined=function(t){return arguments.length?(r="function"==typeof t?t:n(!!t),f):r},f.curve=function(t){return arguments.length?(a=t,null!=s&&(l=a(s)),f):a},f.context=function(t){return arguments.length?(null==t?s=l=null:l=a(s=t),f):s},f}function d(t,e,i){var n=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(n||r<0&&-0),s=(i-t._y1)/(r||n<0&&-0);return((o<0?-1:1)+(s<0?-1:1))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs((o*r+s*n)/(n+r)))||0}function p(t,e){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-e)/2:e}function v(t,e,i){var n=t._x0,r=t._y0,o=t._x1,s=t._y1,a=(o-n)/3;t._context.bezierCurveTo(n+a,r+a*e,o-a,s-a*i,o,s)}function y(t){this._context=t}function m(t){this._context=new g(t)}function g(t){this._context=t}function b(t){return new m(t)}Path.prototype,y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:v(this,this._t0,p(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var i=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,v(this,p(this,i=d(this,t,e)),i);break;default:v(this,this._t0,i=d(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=i}}},(m.prototype=Object.create(y.prototype)).point=function(t,e){y.prototype.point.call(this,e,t)},g.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,i,n,r,o){this._context.bezierCurveTo(e,t,n,i,o,r)}},i(72548),i(32658)}}]);
//# sourceMappingURL=vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_tanstack_react-query_build_-971f15-d49d92e66577.js.map